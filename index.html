<!DOCTYPE html>
<html lang="pl">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
Â  <meta name="theme-color" content="#FFC107" />
Â  <meta name="mobile-web-app-capable" content="yes" />
Â  <meta name="apple-mobile-web-app-capable" content="yes" />
Â  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
Â  <meta name="apple-mobile-web-app-title" content="eatmi" />
Â  <link rel="icon" type="image/png" sizes="112x112" href="/logo-112x112.png">
Â  <link rel="icon" type="image/png" sizes="192x192" href="/logo-192x192.png">
Â  <link rel="icon" type="image/png" sizes="512x512" href="/logo-512x512.png">

Â  <title>eatmi.pl â€” ZamÃ³w online</title>
Â  <meta name="description" content="eatmi.pl â€” Boxy Å›niadaniowe, lunche, kanapki, zdrowe, sÅ‚odkie i napoje." />

Â  <link rel="icon" type="image/png" href="favicon.png">
Â  <link rel="manifest" href="/manifest.webmanifest">
Â  <link rel="apple-touch-icon" href="appicon.png">

Â  <script>
Â  Â  tailwind = window.tailwind || {};
Â  Â  tailwind.config = {
Â  Â  Â  theme: {
Â  Â  Â  Â  extend: {
Â  Â  Â  Â  Â  colors: {
Â  Â  Â  Â  Â  Â  brand: {
Â  Â  Â  Â  Â  Â  Â  yellow: '#FFC107',
Â  Â  Â  Â  Â  Â  Â  dark: '#111827',
Â  Â  Â  Â  Â  Â  Â  light: '#F9FAFB'
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  kiosk: {
Â  Â  Â  Â  Â  Â  Â  bg: '#0B0F1A',
Â  Â  Â  Â  Â  Â  Â  card: '#0F1629',
Â  Â  Â  Â  Â  Â  Â  card2: '#111B34',
Â  Â  Â  Â  Â  Â  Â  green: '#22C55E',
Â  Â  Â  Â  Â  Â  Â  red: '#EF4444',
Â  Â  Â  Â  Â  Â  Â  blue: '#3B82F6',
Â  Â  Â  Â  Â  Â  Â  violet: '#8B5CF6',
Â  Â  Â  Â  Â  Â  Â  orange: '#F59E0B',
Â  Â  Â  Â  Â  Â  Â  gray: '#94A3B8'
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  boxShadow: {
Â  Â  Â  Â  Â  Â  soft: '0 10px 30px rgba(0,0,0,.08)',
Â  Â  Â  Â  Â  Â  glass: '0 8px 25px rgba(0,0,0,.12)',
Â  Â  Â  Â  Â  Â  kiosk: '0 14px 50px rgba(0,0,0,.35)'
Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  borderRadius: { xl2: '1.25rem' }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  };
Â  </script>
Â  <script src="https://cdn.tailwindcss.com"></script>

Â  <style>
Â  Â  :root{
Â  Â  Â  --tabbar-h: 72px;
Â  Â  Â  --cta-h: 56px;
Â  Â  Â  --safe-b: env(safe-area-inset-bottom, 0px);
Â  Â  Â  --safe-t: env(safe-area-inset-top, 0px);
Â  Â  }

Â  Â  html, body { height: 100%; }
Â  Â  body { overscroll-behavior-y: none; }

Â  Â  .liquid { background: rgba(255,255,255,.75); backdrop-filter: blur(12px); }
Â  Â  .logo-glow { box-shadow: 0 12px 30px rgba(255,193,7,.18); }
Â  Â  .toast-enter { animation: toastIn .18s ease-out; }
Â  Â  .toast-bar { animation: toastBar 2.4s linear; transform-origin: left; }
Â  Â  @keyframes toastIn { from { transform: translateY(8px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
Â  Â  @keyframes toastBar { from { transform: scaleX(1) } to { transform: scaleX(0) } }

Â  Â  .input-focus { outline: none; }
Â  Â  .input-focus:focus { box-shadow: 0 0 0 3px rgba(255,193,7,.35); border-color: rgba(255,193,7,.75); }

Â  Â  /* Wymuszenie Å¼Ã³Å‚tego dla 2 CTA w HERO */
Â  Â  .btn-yellow{
Â  Â  Â  background:#FFC107 !important;
Â  Â  Â  color:#111827 !important;
Â  Â  Â  border-color: rgba(0,0,0,.08) !important;
Â  Â  }
Â  Â  .btn-yellow:hover{
Â  Â  Â  filter: brightness(.98);
Â  Â  Â  box-shadow: 0 0 0 3px rgba(255,193,7,.30);
Â  Â  }

Â  Â  /* App-like: treÅ›Ä‡ nie moÅ¼e chowaÄ‡ siÄ™ pod tabbarem (i CTA) */
Â  Â  .app-content-pad {
Â  Â  Â  padding-bottom: calc(var(--tabbar-h) + var(--safe-b) + 18px);
Â  Â  }
Â  Â  .app-content-pad.has-cta {
Â  Â  Â  padding-bottom: calc(var(--tabbar-h) + var(--safe-b) + var(--cta-h) + 22px);
Â  Â  }
Â  Â  /* JeÅ›li jest aktywny tracker, dodajemy wiÄ™cej miejsca na dole */
Â  Â  .app-content-pad.has-tracker {
Â  Â  Â  padding-bottom: calc(var(--tabbar-h) + var(--safe-b) + 200px);Â 
Â  Â  }

Â  Â  .no-overscroll { overscroll-behavior: none; }

Â  Â  /* Info bar (top) */
Â  Â  .info-bar {
Â  Â  Â  background: rgba(17, 24, 39, 0.92);
Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  color: #fff;
Â  Â  Â  border-bottom: 1px solid rgba(255,255,255,0.12);
Â  Â  }

Â  Â  /* Simple spinner */
Â  Â  @keyframes spin { from { transform: rotate(0deg) } to { transform: rotate(360deg) } }
Â  Â  .spin { animation: spin 1s linear infinite; }

Â  Â  .kbd-hint {
Â  Â  Â  background: rgba(255,193,7,.12);
Â  Â  Â  border: 1px solid rgba(255,193,7,.35);
Â  Â  Â  color: #111827;
Â  Â  }

Â  Â  /* =======================
Â  Â  Â  Â Left slide-in account nudge
Â  Â  ======================= */
Â  Â  @keyframes nudgeIn {
Â  Â  Â  from { transform: translateX(-110%); opacity: 0; }
Â  Â  Â  toÂ  Â { transform: translateX(0); opacity: 1; }
Â  Â  }
Â  Â  @keyframes nudgeOut {
Â  Â  Â  from { transform: translateX(0); opacity: 1; }
Â  Â  Â  toÂ  Â { transform: translateX(-110%); opacity: 0; }
Â  Â  }
Â  Â  .nudge-in { animation: nudgeIn .38s cubic-bezier(.2,.9,.2,1) both; }
Â  Â  .nudge-out { animation: nudgeOut .26s ease-in both; }

Â  Â  /* =======================
Â  Â  Â  Â Add-ons modal (fade)
Â  Â  ======================= */
Â  Â  @keyframes popIn {
Â  Â  Â  from { transform: translateY(10px) scale(.98); opacity: 0; }
Â  Â  Â  toÂ  Â { transform: translateY(0) scale(1); opacity: 1; }
Â  Â  }
Â  Â  .pop-in { animation: popIn .18s ease-out both; }
Â  Â Â 
Â  Â  /* =======================
Â  Â  Â  Â Order Tracker Animation
Â  Â  ======================= */
Â  Â  @keyframes slideUp {
Â  Â  Â  from { transform: translateY(100%); opacity: 0; }
Â  Â  Â  to { transform: translateY(0); opacity: 1; }
Â  Â  }
Â  Â  .tracker-enter { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) both; }
Â  </style>

Â  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
Â  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

Â  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

Â  <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-brand-light text-gray-900">
Â  <div id="root"></div>

Â  <script type="text/babel">
Â  Â  const { useState, useEffect, useMemo, createContext, useContext } = React;

Â  Â  /* =======================
Â  Â  Â  Â MENU
Â  Â  ======================= */

Â  Â  // âœ… kaÅ¼dy wpis ma osobne image: "..."
Â  Â  const PRODUCT_CATEGORIES = [
Â  Â  Â  { id: 'boxy-sniadaniowe', name: 'Boxy Å›niadaniowe', icon: 'package-open', description: 'MaÅ‚e, Å›rednie i duÅ¼e zestawy. TakÅ¼e VEGE.', image: 'https://i.imgur.com/qtZTWY1.jpeg' },
Â  Â  Â  { id: 'lunche', name: 'Lunche', icon: 'utensils-crossed', description: 'Lunch tygodnia, miesiÄ…ca i vege (12:00â€“16:00).', image: 'https://i.imgur.com/sn5VMfS.jpeg' },
Â  Â  Â  { id: 'kanapki', name: 'Kanapki', icon: 'sandwich', description: 'Kanapki i buritto na maÅ›lanym pieczywie.', image: 'https://i.imgur.com/PFoY1Oc.jpeg' },
Â  Â  Â  { id: 'zdrowe', name: 'Zdrowe', icon: 'leaf', description: 'Granola i saÅ‚atki w wersjach fit.', image: 'https://i.imgur.com/RmVJ6d6.jpeg' },
Â  Â  Â  { id: 'slodkie', name: 'SÅ‚odkie', icon: 'ice-cream', description: 'Desery, pancakes, tost francuski i smoothie.', image: 'https://i.imgur.com/yKYFN0z.jpeg' },
Â  Â  Â  { id: 'napoje', name: 'Napoje', icon: 'cup-soda', description: 'Kawy, herbaty, lemoniada i sok.', image: 'https://i.imgur.com/QiPsFDo.jpeg' },
Â  Â  ];

Â  Â  const BREAKFAST_BOXES = [
Â  Â  Â  { id:'bs-small-1', name:'Box Å›niadaniowy maÅ‚y nr 1', price: 43, image:'https://i.imgur.com/eom3rVn.jpeg', subtitle:'Kanapka z jajecznicÄ… i bekonem, majonez sriracha â€¢ Domowa granola z jogurtem greckim, owocami i miodem â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-small-2', name:'Box Å›niadaniowy maÅ‚y nr 2', price: 45, image:'https://i.imgur.com/4O2NNaB.jpeg', subtitle:'Buritto z jajecznicÄ… i chorizo â€¢ SaÅ‚atka koreaÅ„ska z kurczakiem w panko, warzywami i sezamem â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-small-3', name:'Box Å›niadaniowy maÅ‚y nr 3', price: 47, image:'https://i.imgur.com/ErBUGrk.jpeg', subtitle:'Kanapka z rostbefem, jajkiem poche, sosem musztardowo-chrzanowym i oliwÄ… truflowÄ… â€¢ SaÅ‚atka Cezar z kurczakiem, bekonem, saÅ‚atÄ… rzymskÄ… i grzankami â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-small-vege', name:'Box Å›niadaniowy maÅ‚y VEGE', price: 43, image:'https://i.imgur.com/CLHRTL9.jpeg', subtitle:'Kanapka z jajecznicÄ… i awokado, majonez sriracha â€¢ SaÅ‚atka z carpaccio z buraka z kozim serem i orzechami pekan, mix saÅ‚at, pomaraÅ„czowy dressing z oliwÄ… â€¢ Sok pomaraÅ„czowy 250 ml' },

Â  Â  Â  { id:'bs-med-1', name:'Box Å›niadaniowy Å›redni nr 1', price: 58, image:'https://i.imgur.com/QTpLAsM.jpeg', subtitle:'Kanapka z jajecznicÄ… i bekonem, majonez sriracha â€¢ Domowa granola z jogurtem greckim, owocami i miodem â€¢ Tost francuski z owocami i miodem â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-med-2', name:'Box Å›niadaniowy Å›redni nr 2', price: 60, image:'https://i.imgur.com/N1BOLT8.jpeg', subtitle:'Buritto z jajecznicÄ… i chorizo â€¢ SaÅ‚atka koreaÅ„ska z kurczakiem w panko, warzywa i sezamem â€¢ Pancakes (2 szt.) z NutellÄ… i owocami â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-med-3', name:'Box Å›niadaniowy Å›redni nr 3', price: 62, image:'https://i.imgur.com/nFAk3Mf.jpeg', subtitle:'Kanapka z rostbefem, jajkiem poche, sosem musztardowo-chrzanowym i oliwÄ… truflowÄ… â€¢ SaÅ‚atka Cezar z kurczakiem, bekonem, saÅ‚atÄ… rzymskÄ… i grzankami â€¢ Deser czekoladowy z owocami i kruszonkÄ… â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-med-vege', name:'Box Å›niadaniowy Å›redni VEGE', price: 58, image:'https://i.imgur.com/P3nuucU.jpeg', subtitle:'Kanapka z jajecznicÄ… i awokado, majonez sriracha â€¢ SaÅ‚atka z carpaccio z buraka z kozim serem i orzechami pekan, mix saÅ‚at, pomaraÅ„czowy dressing z oliwÄ… â€¢ Smoothie Mango Lassi z miodem â€¢ Sok pomaraÅ„czowy 250 ml' },

Â  Â  Â  { id:'bs-big-1', name:'Box Å›niadaniowy duÅ¼y nr 1', price: 87, image:'https://i.imgur.com/fpAw7zH.jpeg', subtitle:'Kanapka z jajecznicÄ… i bekonem, majonez sriracha â€¢ Club sandwich z kurczakiem i bekonem, majonez, saÅ‚ata, pomidor â€¢ Domowa granola z jogurtem greckim, owocami i miodem â€¢ SaÅ‚atka Cezar z kurczakiem, bekonem, saÅ‚atÄ… rzymskÄ… i grzankami â€¢ Tost francuski z owocami i miodem â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-big-2', name:'Box Å›niadaniowy duÅ¼y nr 2', price: 89, image:'https://i.imgur.com/VINVw4c.jpeg', subtitle:'Buritto z jajecznicÄ… i chorizo â€¢ Kanapka z jajecznicÄ… i bekonem, majonez sriracha â€¢ SaÅ‚atka koreaÅ„ska z kurczakiem w panko, warzywa i sezamem â€¢ Domowa granola z jogurtem greckim, owocami i miodem â€¢ Pancakes (2 szt.) z NutellÄ… i owocami â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-big-3', name:'Box Å›niadaniowy duÅ¼y nr 3', price: 91, image:'https://i.imgur.com/0fc2NHh.jpeg', subtitle:'Kanapka z rostbefem, jajkiem poche, sosem musztardowo-chrzanowym i oliwÄ… truflowÄ… â€¢ Kanapka z jajecznicÄ… i bekonem, majonez sriracha â€¢ SaÅ‚atka Cezar z kurczakiem, bekonem, saÅ‚atÄ… rzymskÄ… i grzankami â€¢ Domowa granola z jogurtem greckim, owocami i miodem â€¢ Deser czekoladowy z owocami i kruszonkÄ… â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  Â  { id:'bs-big-vege', name:'Box Å›niadaniowy duÅ¼y VEGE', price: 87, image:'https://i.imgur.com/Gtl4J4b.jpeg', subtitle:'Kanapka z jajecznicÄ… i awokado, majonez sriracha â€¢ Vege club sandwich z camembert i awokado, majonez, saÅ‚ata, pomidor â€¢ SaÅ‚atka z carpaccio z buraka z kozim serem i orzechami pekan, mix saÅ‚at, pomaraÅ„czowy dressing z oliwÄ… â€¢ Domowa granola z jogurtem greckim, owocami i miodem â€¢ Smoothie Mango Lassi z miodem â€¢ Sok pomaraÅ„czowy 250 ml' },
Â  Â  ];

Â  Â  const LUNCHES = [
Â  Â  Â  { id:'lunch-week', name:'Lunch tygodnia', price: 55, image:'https://i.imgur.com/sn5VMfS.jpeg', subtitle:'DostÄ™pny 12:00â€“16:00 â€¢ Zupa krem z pieczonych burakÃ³w 200 ml â€¢ Corn Flake Chicken: panierowana w pÅ‚atkach kukurydzianych pierÅ› z kurczaka z ziemniaczanym puree i coleslawem â€¢ Domowa lemoniada 250 ml' },
Â  Â  Â  { id:'lunch-month', name:'Lunch miesiÄ…ca', price: 65, image:'https://i.imgur.com/xGCYJZQ.jpeg', subtitle:'DostÄ™pny 12:00â€“16:00 â€¢ Zupa krem z pieczonych burakÃ³w 200 ml â€¢ Kurczak Supreme: pieczona pierÅ› z kurczaka z ziemniaczanym puree, warzywami i sosem demi glace â€¢ Domowa lemoniada 250 ml' },
Â  Â  Â  { id:'lunch-vege', name:'Lunch VEGE', price: 55, image:'https://i.imgur.com/0hvAvxJ.jpeg', subtitle:'DostÄ™pny 12:00â€“16:00 â€¢ Zupa krem z pieczonych burakÃ³w 200 ml â€¢ Tagliatelle z warzywami, oliwÄ… z oliwek i pastÄ… truflowÄ… â€¢ Domowa lemoniada 250 ml' },
Â  Â  ];

Â  Â  const SANDWICHES = [
Â  Â  Â  { id:'k-jajecznica-bekon', name:'MaÅ›lane pieczywo z jajecznicÄ…, bekonem i majonezem sriracha', price: 19, image:'https://i.imgur.com/QZlDhsa.jpeg' },
Â  Â  Â  { id:'k-club-kurczak', name:'Club sandwich z grillowanym kurczakiem, chrupiÄ…cy bekon, majonez, saÅ‚ata i pomidor', price: 18, image:'https://i.imgur.com/a0GP7lJ.jpeg' },
Â  Â  Â  { id:'k-club-vege', name:'Vege club sandwich z camembert, palonym awokado, majonez, saÅ‚ata i pomidorem', price: 19, image:'https://i.imgur.com/a0GP7lJ.jpeg' },
Â  Â  Â  { id:'k-jajecznica-avo', name:'MaÅ›lane pieczywo z jajecznicÄ…, awokado i majonezem sriracha', price: 18, image:'https://i.imgur.com/nkLtUQG.jpeg' },
Â  Â  Â  { id:'k-buritto-chorizo', name:'Buritto z jajecznicÄ… z mozzarellÄ…, chorizo i majonezem sriracha', price: 20, image:'https://i.imgur.com/Ixbu5bk.jpeg' },
Â  Â  Â  { id:'k-rostbef', name:'MaÅ›lane pieczywo z rostbefem, jajkiem poche, rukolÄ…, sosem musztardowo-chrzanowym i oliwÄ… truflowÄ…', price: 22, image:'https://i.imgur.com/iF8vvVj.jpeg' },
Â  Â  ];

Â  Â  const HEALTHY = [
Â  Â  Â  { id:'z-granola', name:'Domowa granola z jogurtem greckim, owoce i miÃ³d', price: 20, image:'https://i.imgur.com/qOZTV6Y.jpeg' },
Â  Â  Â  { id:'z-cezar', name:'SaÅ‚atka Cezar z kurczakiem, bekonem, saÅ‚atÄ… rzymskÄ…, parmezanem i grzankami', price: 20, image:'https://i.imgur.com/ZBbo6rD.jpeg' },
Â  Â  Â  { id:'z-koreanska', name:'SaÅ‚atka koreaÅ„ska z kurczakiem w panko, warzywa i sezam, sÅ‚odki sos sojowy', price: 20, image:'https://i.imgur.com/1cE6tVB.jpeg' },
Â  Â  Â  { id:'z-burak', name:'SaÅ‚atka z carpaccio z buraka i serem kozim, karmelizowane orzechy pekan, mix saÅ‚at i pomaraÅ„czowy dressing', price: 20, image:'https://i.imgur.com/VYRNIFt.jpeg' },
Â  Â  ];

Â  Â  const SWEETS = [
Â  Â  Â  { id:'s-smoothie', name:'Smoothie Mango Lassi (mango, jogurt grecki, miÃ³d)', price: 20, image:'https://i.imgur.com/RHmXGlZ.jpeg' },
Â  Â  Â  { id:'s-tost-fr', name:'Tost francuski z owocami i miodem', price: 20, image:'https://i.imgur.com/JwN4PMV.jpeg' },
Â  Â  Â  { id:'s-pancakes', name:'Pancakes (2 szt.) z NutellÄ… i owocami', price: 20, image:'https://i.imgur.com/yKYFN0z.jpeg' },
Â  Â  Â  { id:'s-deser-czeko', name:'Deser czekoladowy z owocami i kruszonkÄ…', price: 20, image:'https://i.imgur.com/mVjnusq.jpeg' },
Â  Â  ];

Â  Â  const DRINKS = [
Â  Â  Â  { id:'n-lemoniada', name:'Domowa lemoniada 250 ml', price: 13, image:'https://i.imgur.com/zKRceju.jpeg' },
Â  Â  Â  { id:'n-sok-pom', name:'Sok pomaraÅ„czowy 250 ml', price: 13, image:'https://i.imgur.com/vOgARPy.jpeg' },
Â  Â  Â  { id:'n-kawa-filt-cz', name:'Kawa filtrowana czarna 300 ml', price: 11, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-kawa-filt-b', name:'Kawa filtrowana biaÅ‚a 300 ml', price: 11, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-espresso-double', name:'Kawa czarna (podwÃ³jne espresso) 300 ml', price: 12, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-flat-white', name:'Kawa Flat White (podwÃ³jne espresso) 300 ml', price: 12, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-latte', name:'Latte (podwÃ³jne espresso) 300 ml', price: 13, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-cappu', name:'Cappuccino (podwÃ³jne espresso) 300 ml', price: 12, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-matcha', name:'Matcha 300 ml', price: 19, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-herbata-cz', name:'Herbata czarna z cytrynÄ… 300 ml', price: 10, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  Â  { id:'n-zimowa', name:'Zimowa herbata z miodem, cytrusami, goÅºdzikami i sokiem malinowym 300 ml', price: 16, image:'https://i.imgur.com/AbtHMCT.jpeg' },
Â  Â  ];

Â  Â  // âœ… EXTRA teÅ¼ osobno
Â  Â  const EXTRA_ITEMS = [
Â  Â  Â  { id:'extra-granola', name:'Domowa granola', price: 20, image:'https://i.imgur.com/5Vg6Fk2.png' },
Â  Â  Â  { id:'extra-lemoniada', name:'Domowa lemoniada', price: 13, image:'https://i.imgur.com/5Vg6Fk2.png' },
Â  Â  Â  { id:'extra-deser', name:'Deser czekoladowy', price: 20, image:'https://i.imgur.com/5Vg6Fk2.png' },
Â  Â  ];

Â  Â  const PRODUCTS = {
Â  Â  Â  'boxy-sniadaniowe': BREAKFAST_BOXES,
Â  Â  Â  'lunche': LUNCHES,
Â  Â  Â  'kanapki': SANDWICHES,
Â  Â  Â  'zdrowe': HEALTHY,
Â  Â  Â  'slodkie': SWEETS,
Â  Â  Â  'napoje': DRINKS,
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â ADD-ONS (kawa/herbata)
Â  Â  ======================= */

Â  Â  const DRINK_ADDONS = [
Â  Â  Â  { id: "milk-oat", label: "Mleko owsiane", price: 2 },
Â  Â  Â  { id: "milk-coconut", label: "Mleko kokosowe", price: 2 },
Â  Â  Â  { id: "milk-pea", label: "Mleko grochowe", price: 2 },
Â  Â  Â  { id: "honey-50", label: "MiÃ³d 50 ml", price: 3 },
Â  Â  ];

Â  Â  const isCoffeeOrTea = (name = "") => {
Â  Â  Â  const s = String(name).toLowerCase();
Â  Â  Â  return s.includes("kawa") || s.includes("herbata") || s.includes("matcha");
Â  Â  };

Â  Â  const shouldPromptDrinkAddons = ({ categoryId, item }) => {
Â  Â  Â  if (categoryId !== "napoje") return false;
Â  Â  Â  return isCoffeeOrTea(item?.name || "");
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â UTIL
Â  Â  ======================= */

Â  Â  const useLocalStorage = (key, initial) => {
Â  Â  Â  const [state, setState] = useState(() => {
Â  Â  Â  Â  try { return JSON.parse(localStorage.getItem(key)) ?? initial } catch { return initial }
Â  Â  Â  });
Â  Â  Â  useEffect(() => { localStorage.setItem(key, JSON.stringify(state)) }, [key, state]);
Â  Â  Â  return [state, setState];
Â  Â  };

Â  Â  const currency = (n) =>
Â  Â  Â  new Intl.NumberFormat('pl-PL', { style:'currency', currency:'PLN' }).format(n);

Â  Â  const haptics = () => {
Â  Â  Â  try { if (navigator.vibrate) navigator.vibrate(10); } catch {}
Â  Â  };

Â  Â  const useIsMobile = (breakpoint = 768) => {
Â  Â  Â  const [isMobile, setIsMobile] = useState(() => window.innerWidth < breakpoint);
Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  const onResize = () => setIsMobile(window.innerWidth < breakpoint);
Â  Â  Â  Â  window.addEventListener("resize", onResize, { passive: true });
Â  Â  Â  Â  return () => window.removeEventListener("resize", onResize);
Â  Â  Â  }, [breakpoint]);
Â  Â  Â  return isMobile;
Â  Â  };

Â  Â  // âœ… Customer localStorage helpers
Â  Â  const CUSTOMER_STORAGE_KEY = "eatmi-customer";

Â  Â  const safeParse = (raw, fallback) => {
Â  Â  Â  try {
Â  Â  Â  Â  const v = JSON.parse(raw);
Â  Â  Â  Â  return (v && typeof v === "object") ? v : fallback;
Â  Â  Â  } catch {
Â  Â  Â  Â  return fallback;
Â  Â  Â  }
Â  Â  };

Â  Â  const loadSavedCustomer = () => {
Â  Â  Â  if (typeof localStorage === "undefined") return null;
Â  Â  Â  const raw = localStorage.getItem(CUSTOMER_STORAGE_KEY);
Â  Â  Â  if (!raw) return null;
Â  Â  Â  return safeParse(raw, null);
Â  Â  };

Â  Â  const saveCustomer = (customerObj) => {
Â  Â  Â  if (typeof localStorage === "undefined") return;
Â  Â  Â  try {
Â  Â  Â  Â  localStorage.setItem(CUSTOMER_STORAGE_KEY, JSON.stringify(customerObj));
Â  Â  Â  } catch {}
Â  Â  };

Â  Â  const clearSavedCustomer = () => {
Â  Â  Â  if (typeof localStorage === "undefined") return;
Â  Â  Â  try { localStorage.removeItem(CUSTOMER_STORAGE_KEY); } catch {}
Â  Â  };

Â  Â  // âœ… AUTH token
Â  Â  const AUTH_TOKEN_KEY = "eatmi-auth-token";

Â  Â  const loadAuthToken = () => {
Â  Â  Â  try { return localStorage.getItem(AUTH_TOKEN_KEY) || ""; } catch { return ""; }
Â  Â  };
Â  Â  const saveAuthToken = (token) => {
Â  Â  Â  try { localStorage.setItem(AUTH_TOKEN_KEY, token || ""); } catch {}
Â  Â  };
Â  Â  const clearAuthToken = () => {
Â  Â  Â  try { localStorage.removeItem(AUTH_TOKEN_KEY); } catch {}
Â  Â  };

Â  Â  // âœ… API helper
Â  Â  async function apiFetch(url, { method="GET", body=null, token=null } = {}) {
Â  Â  Â  const headers = { "Content-Type": "application/json" };
Â  Â  Â  if (token) headers.Authorization = `Bearer ${token}`;
Â  Â  Â  const r = await fetch(url, {
Â  Â  Â  Â  method,
Â  Â  Â  Â  headers,
Â  Â  Â  Â  body: body ? JSON.stringify(body) : null
Â  Â  Â  });
Â  Â  Â  const data = await r.json().catch(() => ({}));
Â  Â  Â  if (!r.ok) {
Â  Â  Â  Â  const msg = data?.error || `HTTP ${r.status}`;
Â  Â  Â  Â  const err = new Error(msg);
Â  Â  Â  Â  err.status = r.status;
Â  Â  Â  Â  err.data = data;
Â  Â  Â  Â  throw err;
Â  Â  Â  }
Â  Â  Â  return data;
Â  Â  }

Â  Â  /* =======================
Â  Â  Â  Â TOAST
Â  Â  ======================= */

Â  Â  const ToastContext = createContext();
Â  Â  const useToast = () => useContext(ToastContext);

Â  Â  const ToastProvider = ({children}) => {
Â  Â  Â  const [toast, setToast] = useState(null);
Â  Â  Â  const timeoutRef = React.useRef(null);

Â  Â  Â  const show = (message) => {
Â  Â  Â  Â  setToast(message);
Â  Â  Â  Â  if (timeoutRef.current) clearTimeout(timeoutRef.current);
Â  Â  Â  Â  timeoutRef.current = setTimeout(() => setToast(null), 2500);
Â  Â  Â  };

Â  Â  Â  const close = () => {
Â  Â  Â  Â  if (timeoutRef.current) clearTimeout(timeoutRef.current);
Â  Â  Â  Â  setToast(null);
Â  Â  Â  };

Â  Â  Â  return (
Â  Â  Â  Â  <ToastContext.Provider value={{ show }}>
Â  Â  Â  Â  Â  {children}
Â  Â  Â  Â  Â  {toast && (
Â  Â  Â  Â  Â  Â  <div className="fixed bottom-[calc(var(--tabbar-h)+var(--safe-b)+18px)] left-1/2 -translate-x-1/2 z-[80] pointer-events-none">
Â  Â  Â  Â  Â  Â  Â  <div className="relative pointer-events-auto toast-enter bg-white/95 border border-emerald-200 shadow-glass rounded-2xl px-4 py-3 min-w-[260px] max-w-[90vw] flex items-start gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-9 h-9 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 text-lg">âœ“</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-[10px] font-semibold uppercase tracking-[0.12em] text-emerald-600">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Powiadomienie
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-sm text-gray-900 mt-0.5">{toast}</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={close}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="ml-2 text-gray-400 hover:text-gray-600 text-xl leading-none"
Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-label="Zamknij powiadomienie"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Ã—
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="absolute left-4 right-4 -bottom-1.5 h-1 rounded-full overflow-hidden bg-emerald-50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="toast-bar h-full bg-emerald-400"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  </ToastContext.Provider>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â ACTIVE ORDER CONTEXT
Â  Â  Â  Â (Widget na dole)
Â  Â  ======================= */
Â  Â  /* =======================
Â  Â  Â  Â ACTIVE ORDER CONTEXT (Z POPRAWKÄ„ LIVE UPDATE)
Â  Â  Â  Â ======================= */
Â  Â  const ActiveOrderContext = createContext();
Â  Â  const useActiveOrder = () => useContext(ActiveOrderContext);

Â  Â  const ActiveOrderProvider = ({ children }) => {
Â  Â  Â  const [activeOrder, setActiveOrder] = useLocalStorage('eatmi-active-order', null);

Â  Â  Â  const saveOrder = (orderData) => {
Â  Â  Â  Â  const now = Date.now();
Â  Â  Â  Â  setActiveOrder({
Â  Â  Â  Â  Â  ...orderData,
Â  Â  Â  Â  Â  status: 'PENDING', // Startowy status
Â  Â  Â  Â  Â  statusTimestamp: now,
Â  Â  Â  Â  Â  timestamp: now
Â  Â  Â  Â  });
Â  Â  Â  };

Â  Â  Â  const clearActiveOrder = () => setActiveOrder(null);

Â  Â  Â  // âœ… NOWOÅšÄ†: Odpytywanie serwera o status (Polling)
Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  if (!activeOrder || !activeOrder.extOrderId) return;

Â  Â  Â  Â  // JeÅ›li zamÃ³wienie jest juÅ¼ zakoÅ„czone, przestajemy pytaÄ‡ (oszczÄ™dnoÅ›Ä‡ baterii/danych)
Â  Â  Â  Â  if (['COMPLETED', 'CANCELED', 'Zrealizowane', 'Anulowane'].includes(activeOrder.status)) return;

Â  Â  Â  Â  const checkStatus = async () => {
Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  // Pytamy backend o status tego konkretnego zamÃ³wienia
Â  Â  Â  Â  Â  Â  const res = await fetch(`/api/orders/${activeOrder.extOrderId}`);
Â  Â  Â  Â  Â  Â  if (!res.ok) return;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // JeÅ›li status na serwerze jest inny niÅ¼ u nas -> aktualizujemy
Â  Â  Â  Â  Â  Â  if (data.status && data.status !== activeOrder.status) {
Â  Â  Â  Â  Â  Â  Â  setActiveOrder(prev => ({
Â  Â  Â  Â  Â  Â  Â  Â  ...prev,
Â  Â  Â  Â  Â  Â  Â  Â  status: data.status,
Â  Â  Â  Â  Â  Â  Â  Â  statusTimestamp: Date.now()
Â  Â  Â  Â  Â  Â  Â  }));
Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  // Opcjonalnie: wibracja przy zmianie statusu
Â  Â  Â  Â  Â  Â  Â  try { if (navigator.vibrate) navigator.vibrate([100, 50, 100]); } catch {}
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("BÅ‚Ä…d sprawdzania statusu:", e);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  };

Â  Â  Â  Â  // Sprawdzaj co 10 sekund
Â  Â  Â  Â  const interval = setInterval(checkStatus, 10000);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // SprawdÅº teÅ¼ od razu po zaÅ‚adowaniu
Â  Â  Â  Â  checkStatus();

Â  Â  Â  Â  return () => clearInterval(interval);
Â  Â  Â  }, [activeOrder, setActiveOrder]);

Â  Â  Â  // Auto-hide logic: po 15 minutach od 'Zrealizowane' lub 'Anulowane'
Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  if (!activeOrder) return;
Â  Â  Â  Â  const finalStatuses = ['COMPLETED', 'CANCELED', 'Zrealizowane', 'Anulowane', 'Odbierz'];
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Sprawdzamy czy status zawiera siÄ™ w liÅ›cie koÅ„cowej (rÃ³wnieÅ¼ mapowanie z PayU)
Â  Â  Â  Â  const isFinal = finalStatuses.some(s =>Â 
Â  Â  Â  Â  Â  Â  String(activeOrder.status).toUpperCase().includes(s.toUpperCase())
Â  Â  Â  Â  );

Â  Â  Â  Â  if (isFinal) {
Â  Â  Â  Â  Â  const now = Date.now();
Â  Â  Â  Â  Â  const diff = now - (activeOrder.statusTimestamp || 0);
Â  Â  Â  Â  Â  // 15 min = 900000 ms (dajemy klientowi czas na dojÅ›cie)
Â  Â  Â  Â  Â  if (diff > 900000) {
Â  Â  Â  Â  Â  Â  clearActiveOrder();
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }, [activeOrder]);

Â  Â  Â  return (
Â  Â  Â  Â  <ActiveOrderContext.Provider value={{ activeOrder, saveOrder, clearActiveOrder }}>
Â  Â  Â  Â  Â  {children}
Â  Â  Â  Â  </ActiveOrderContext.Provider>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â AUTH (CONTEXT)
Â  Â  ======================= */

Â  Â  const AuthContext = createContext();
Â  Â  const useAuth = () => useContext(AuthContext);

Â  Â  const AuthProvider = ({ children }) => {
Â  Â  Â  const toast = useToast();
Â  Â  Â  const showToast = toast?.show;

Â  Â  Â  const [token, setToken] = useState(() => loadAuthToken());
Â  Â  Â  const [user, setUser] = useState(null);
Â  Â  Â  const [loading, setLoading] = useState(true);

Â  Â  Â  const refreshMe = async (tkn) => {
Â  Â  Â  Â  const tk = typeof tkn === "string" ? tkn : token;
Â  Â  Â  Â  if (!tk) { setUser(null); return; }
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  const data = await apiFetch("/api/auth/me", { token: tk });
Â  Â  Â  Â  Â  setUser(data?.user || null);
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  setUser(null);
Â  Â  Â  Â  Â  setToken("");
Â  Â  Â  Â  Â  clearAuthToken();
Â  Â  Â  Â  }
Â  Â  Â  };

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  (async () => {
Â  Â  Â  Â  Â  try { await refreshMe(token); }
Â  Â  Â  Â  Â  finally { setLoading(false); }
Â  Â  Â  Â  })();
Â  Â  Â  }, []);

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  if (!loading) refreshMe(token);
Â  Â  Â  }, [token]);

Â  Â  Â  const login = async ({ email, password }) => {
Â  Â  Â  Â  const data = await apiFetch("/api/auth/login", { method: "POST", body: { email, password } });
Â  Â  Â  Â  const tk = data?.token || "";
Â  Â  Â  Â  if (tk) {
Â  Â  Â  Â  Â  setToken(tk);
Â  Â  Â  Â  Â  saveAuthToken(tk);
Â  Â  Â  Â  Â  setUser(data?.user || null);
Â  Â  Â  Â  Â  showToast?.("Zalogowano âœ…");
Â  Â  Â  Â  }
Â  Â  Â  Â  return data;
Â  Â  Â  };

Â  Â  Â  const register = async ({ email, fullName, password, confirm }) => {
Â  Â  Â  Â  const data = await apiFetch("/api/auth/register", {
Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  body: { email, fullName, password, confirm }
Â  Â  Â  Â  });

Â  Â  Â  Â  const tk = data?.token || "";
Â  Â  Â  Â  if (tk) {
Â  Â  Â  Â  Â  setToken(tk);
Â  Â  Â  Â  Â  saveAuthToken(tk);
Â  Â  Â  Â  Â  setUser(data?.user || null);
Â  Â  Â  Â  Â  showToast?.("Konto utworzone âœ…");
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  showToast?.("Konto utworzone âœ…");
Â  Â  Â  Â  }

Â  Â  Â  Â  return data;
Â  Â  Â  };

Â  Â  Â  const logout = () => {
Â  Â  Â  Â  setUser(null);
Â  Â  Â  Â  setToken("");
Â  Â  Â  Â  clearAuthToken();
Â  Â  Â  Â  showToast?.("Wylogowano");
Â  Â  Â  };

Â  Â  Â  return (
Â  Â  Â  Â  <AuthContext.Provider value={{ token, user, loading, login, register, logout, refreshMe }}>
Â  Â  Â  Â  Â  {children}
Â  Â  Â  Â  </AuthContext.Provider>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â CART
Â  Â  ======================= */

Â  Â  const CartContext = createContext();
Â  Â  const useCart = () => useContext(CartContext);

Â  Â  const CartProvider = ({children}) => {
Â  Â  Â  const [cart, setCart] = useLocalStorage('eatmi-cart', []);
Â  Â  Â  const toast = useToast();
Â  Â  Â  const show = toast?.show;

Â  Â  Â  const add = (entry) => {
Â  Â  Â  Â  const uuid =
Â  Â  Â  Â  Â  (typeof window !== "undefined" &&
Â  Â  Â  Â  Â  Â  window.crypto &&
Â  Â  Â  Â  Â  Â  typeof window.crypto.randomUUID === "function")
Â  Â  Â  Â  Â  Â  ? window.crypto.randomUUID()
Â  Â  Â  Â  Â  Â  : `${Date.now()}-${Math.random().toString(16).slice(2)}`;

Â  Â  Â  Â  const newItem = {
Â  Â  Â  Â  Â  id: uuid,
Â  Â  Â  Â  Â  qty: 1,
Â  Â  Â  Â  Â  addons: [],
Â  Â  Â  Â  Â  ...entry
Â  Â  Â  Â  };

Â  Â  Â  Â  setCart(prev => [...prev, newItem]);
Â  Â  Â  Â  if (show) show(`Dodano: ${entry.name}`);
Â  Â  Â  Â  haptics();
Â  Â  Â  Â  return newItem.id;
Â  Â  Â  };


Â  Â  Â  const removeÂ  = (id) => setCart(prev => prev.filter(i => i.id !== id));

Â  Â  Â  const updateItem = (id, patch) => {
Â  Â  Â  Â  setCart(prev => prev.map(i => i.id === id ? { ...i, ...patch } : i));
Â  Â  Â  };

Â  Â  Â  const setQtyÂ  = (id, qty) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: Math.max(1, qty|0)} : i));
Â  Â  Â  const incQtyÂ  = (id) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: (i.qty||1)+1} : i));
Â  Â  Â  const decQtyÂ  = (id) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: Math.max(1, (i.qty||1)-1)} : i));
Â  Â  Â  const clearÂ  Â = () => setCart([]);

Â  Â  Â  const addonsTotalPerUnit = (i) => {
Â  Â  Â  Â  const arr = Array.isArray(i?.addons) ? i.addons : [];
Â  Â  Â  Â  return arr.reduce((s,a)=> s + (a?.price || 0), 0);
Â  Â  Â  };

Â  Â  Â  const lineTotal = (i) => {
Â  Â  Â  Â  const base = (i.price || 0);
Â  Â  Â  Â  const addOns = addonsTotalPerUnit(i);
Â  Â  Â  Â  return (base + addOns) * (i.qty || 1);
Â  Â  Â  };

Â  Â  Â  const totalÂ  = useMemo(() => cart.reduce((s,i)=> s + lineTotal(i), 0), [cart]);
Â  Â  Â  const countÂ  = useMemo(() => cart.reduce((s,i)=> s + (i.qty||1), 0), [cart]);

Â  Â  Â  return (
Â  Â  Â  Â  <CartContext.Provider value={{
Â  Â  Â  Â  Â  cart, add, remove, updateItem, setQty, incQty, decQty, clear,
Â  Â  Â  Â  Â  lineTotal, total, count,
Â  Â  Â  Â  Â  addonsTotalPerUnit
Â  Â  Â  Â  }}>
Â  Â  Â  Â  Â  {children}
Â  Â  Â  Â  </CartContext.Provider>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â ORDER TRACKER WIDGET
Â  Â  ======================= */
Â  Â  const OrderTrackerWidget = () => {
Â  Â  Â  const { activeOrder } = useActiveOrder();
Â  Â  Â  const [expanded, setExpanded] = useState(false);

Â  Â  Â  if (!activeOrder) return null;

Â  Â  Â  // Status styling
Â  Â  Â  const getStatusStyles = (s) => {
Â  Â  Â  Â  switch(s) {
Â  Â  Â  Â  Â  case 'Zrealizowane': return 'bg-green-100 text-green-700 border-green-200';
Â  Â  Â  Â  Â  case 'Anulowane': return 'bg-red-100 text-red-700 border-red-200';
Â  Â  Â  Â  Â  case 'W drodze': return 'bg-brand-yellow/20 text-yellow-800 border-brand-yellow/40';
Â  Â  Â  Â  Â  case 'OpÃ³Åºniony': return 'bg-orange-100 text-orange-700 border-orange-200';
Â  Â  Â  Â  Â  default: return 'bg-blue-50 text-blue-700 border-blue-200'; // W przygotowaniu
Â  Â  Â  Â  }
Â  Â  Â  };

Â  Â  Â  // Time calculation: 60 - 80 mins from timestamp
Â  Â  Â  const formatTimeRange = (ts) => {
Â  Â  Â  Â  if (!ts) return "";
Â  Â  Â  Â  const date = new Date(ts);
Â  Â  Â  Â  const start = new Date(date.getTime() + 60 * 60000); // +60m
Â  Â  Â  Â  const end = new Date(date.getTime() + 80 * 60000);Â  Â // +80m
Â  Â  Â  Â Â 
Â  Â  Â  Â  const f = (d) => d.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
Â  Â  Â  Â  return `${f(start)} â€“ ${f(end)}`;
Â  Â  Â  };

Â  Â  Â  return (
Â  Â  Â  Â  <div className="fixed inset-x-0 bottom-[calc(var(--tabbar-h)+var(--safe-b)+10px)] z-[60] px-3 md:px-0 md:bottom-10 md:right-10 md:left-auto md:w-96 tracker-enter">
Â  Â  Â  Â  Â  <div className="bg-white border border-gray-200 shadow-kiosk rounded-2xl overflow-hidden">
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  {/* Header */}
Â  Â  Â  Â  Â  Â  <div className="bg-gray-900 text-white p-4 flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-[10px] uppercase tracking-widest font-semibold opacity-80">Twoje zamÃ³wienie</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-bold flex items-center gap-2 mt-0.5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span className={`text-[10px] px-2 py-0.5 rounded border uppercase tracking-wider font-extrabold ${getStatusStyles(activeOrder.status)}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {activeOrder.status}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div className="text-right">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-[10px] opacity-70">Przewidywana dostawa</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-lg font-extrabold leading-none text-brand-yellow">
Â  Â  Â  Â  Â  Â  Â  Â  Â  {formatTimeRange(activeOrder.timestamp)}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  {/* Body */}
Â  Â  Â  Â  Â  Â  <div className="p-4 bg-white">
Â  Â  Â  Â  Â  Â  Â  <div className="flex items-start justify-between gap-3 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="font-semibold text-gray-900">Adres dostawy:</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="text-gray-600 text-xs mt-0.5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {activeOrder.customer.ulica} {activeOrder.customer.nrBud}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â {activeOrder.customer.lokal ? '/' + activeOrder.customer.lokal : ''}, {activeOrder.customer.miasto}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <div className="text-right">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-semibold text-gray-900">Kwota:</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold text-base">{currency(activeOrder.total)}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  {/* Items Toggle */}
Â  Â  Â  Â  Â  Â  Â  <div className="mt-3 pt-3 border-t border-gray-100">
Â  Â  Â  Â  Â  Â  Â  Â  <buttonÂ 
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => setExpanded(!expanded)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full flex items-center justify-between text-xs text-gray-500 hover:text-gray-900 font-semibold"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Co zamÃ³wiÅ‚eÅ› ({activeOrder.items.length})</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide={expanded ? "chevron-up" : "chevron-down"} className="w-4 h-4"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  {expanded && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-2 space-y-2 max-h-40 overflow-y-auto pr-1 custom-scrollbar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {activeOrder.items.map((item, idx) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div key={idx} className="flex justify-between text-xs text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>{item.qty}x {item.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>{currency(item.price)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };


Â  Â  /* =======================
Â  Â  Â  Â TOP INFO BAR
Â  Â  ======================= */

Â  Â  const TopInfoBar = () => (
Â  Â  Â  <div className="info-bar">
Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4 py-2.5 flex items-center justify-center gap-2 text-sm font-semibold">
Â  Â  Â  Â  Â  <i data-lucide="info" className="w-4 h-4"></i>
Â  Â  Â  Â  Â  <span>ZamÃ³wienia dostÄ™pne od <span className="font-extrabold">20 stycznia 2026</span></span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  );

Â  Â  /* =======================
Â  Â  Â  Â HEADER / LOGO / CART BTN
Â  Â  ======================= */

Â  Â  const Logo = () => (
Â  Â  Â  <a href="#/" className="flex items-center gap-3 group">
Â  Â  Â  Â  <div className="w-10 h-10 rounded-2xl bg-white flex items-center justify-center border border-gray-100 overflow-hidden shadow-soft logo-glow">
Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  src="https://i.imgur.com/f9TN0Gh.png"
Â  Â  Â  Â  Â  Â  alt="eatmi.pl â€” logo"
Â  Â  Â  Â  Â  Â  loading="lazy"
Â  Â  Â  Â  Â  Â  className="w-9 h-9 object-contain transition-transform duration-500 group-hover:-rotate-6 group-hover:scale-110"
Â  Â  Â  Â  Â  />
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <span className="font-extrabold tracking-tight">
Â  Â  Â  Â  Â  eatmi<span className="text-brand-yellow">.pl</span>
Â  Â  Â  Â  </span>
Â  Â  Â  </a>
Â  Â  );

Â  Â  const CartButton = () => {
Â  Â  Â  const { total, count } = useCart();
Â  Â  Â  return (
Â  Â  Â  Â  <a
Â  Â  Â  Â  Â  href="#/koszyk"
Â  Â  Â  Â  Â  className="relative inline-flex items-center justify-center gap-2 border border-gray-200 bg-white px-3 py-2 rounded-xl shadow-soft hover:shadow-md transition hover:ring-2 hover:ring-brand-yellow/50"
Â  Â  Â  Â  Â  aria-label="Koszyk"
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  <i data-lucide="shopping-cart" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  <span className="hidden sm:inline text-sm font-semibold">{currency(total)}</span>
Â  Â  Â  Â  Â  <span className="absolute -top-2 -right-2 bg-brand-yellow text-gray-900 text-xs font-extrabold w-6 h-6 rounded-full grid place-items-center ring-2 ring-white">
Â  Â  Â  Â  Â  Â  {count}
Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  </a>
Â  Â  Â  );
Â  Â  };

Â  Â  const Header = ({ onOpenAuth }) => {
Â  Â  Â  const { user, loading, logout } = useAuth();
Â  Â  Â  useEffect(() => { window.lucide?.createIcons?.(); }, [user, loading]);

Â  Â  Â  return (
Â  Â  Â  Â  <header className="sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-gray-200">
Â  Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
Â  Â  Â  Â  Â  Â  <Logo />

Â  Â  Â  Â  Â  Â  <div className="hidden md:flex items-center gap-6 text-sm">
Â  Â  Â  Â  Â  Â  Â  <a href="#kategorie" className="hover:text-gray-900 text-gray-600">Menu</a>
Â  Â  Â  Â  Â  Â  Â  <a href="#/kategoria/boxy-sniadaniowe" className="hover:text-gray-900 text-gray-600">Boxy</a>
Â  Â  Â  Â  Â  Â  Â  <a href="#/kategoria/lunche" className="hover:text-gray-900 text-gray-600">Lunche</a>
Â  Â  Â  Â  Â  Â  Â  <a href="#/kategoria/kanapki" className="hover:text-gray-900 text-gray-600">Kanapki</a>
Â  Â  Â  Â  Â  Â  Â  <a href="#/kategoria/napoje" className="hover:text-gray-900 text-gray-600">Napoje</a>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-3">
Â  Â  Â  Â  Â  Â  Â  {!loading && user ? (
Â  Â  Â  Â  Â  Â  Â  Â  <div className="hidden md:flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="px-3 py-2 rounded-xl border border-gray-200 bg-white shadow-soft text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-[10px] uppercase tracking-widest text-gray-500 font-semibold">Zalogowany</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold text-gray-900 leading-tight">{user.fullName || user.email}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={logout}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="inline-flex items-center gap-2 border border-gray-200 bg-white px-4 py-2 rounded-xl shadow-soft hover:shadow-md transition text-sm font-semibold text-gray-800 hover:ring-2 hover:ring-brand-yellow/50"
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="log-out" className="w-4 h-4"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Wyloguj
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={onOpenAuth}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden md:inline-flex items-center gap-2 border border-gray-200 bg-white px-4 py-2 rounded-xl shadow-soft hover:shadow-md transition text-sm font-semibold text-gray-800 hover:ring-2 hover:ring-brand-yellow/50">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="user" className="w-4 h-4"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>Konto</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  onClick={onOpenAuth}
Â  Â  Â  Â  Â  Â  Â  Â  className="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/50"
Â  Â  Â  Â  Â  Â  Â  Â  aria-label="Moje konto">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="user" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  <CartButton />
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </header>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â HERO / UI
Â  Â  ======================= */

Â  Â  const Hero = () => (
Â  Â  Â  <section className="relative overflow-hidden">
Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4 py-10 md:py-16">
Â  Â  Â  Â  Â  <div className="max-w-2xl">
Â  Â  Â  Â  Â  Â  <div className="inline-flex items-center gap-2 mb-3 px-4 py-2 rounded-full bg-white/80 border border-gray-200 shadow-soft">
Â  Â  Â  Â  Â  Â  Â  <span className="text-xl">ðŸ‘‹</span>
Â  Â  Â  Â  Â  Â  Â  <span className="text-sm md:text-base font-semibold text-gray-900">
Â  Â  Â  Â  Â  Â  Â  Â  CzeÅ›Ä‡, na co masz dziÅ› ochotÄ™?
Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <h1 className="text-4xl md:text-5xl font-extrabold leading-tight">
Â  Â  Â  Â  Â  Â  Â  Wybierz | ZamÃ³w {" "}
Â  Â  Â  Â  Â  Â  Â  <span className="text-brand-yellow">ZapÅ‚aÄ‡</span>
Â  Â  Â  Â  Â  Â  </h1>
Â  Â  Â  Â  Â  Â  <p className="mt-4 text-gray-600 max-w-prose">
Â  Â  Â  Â  Â  Â  Â  Boxy Å›niadaniowe, lunche, kanapki, zdrowe, sÅ‚odkie i napoje.
Â  Â  Â  Â  Â  Â  Â  Jak w kiosku â€” wybierasz kategoriÄ™, klikasz pozycje i finalizujesz zamÃ³wienie.
Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  <div className="mt-6 flex flex-wrap gap-3">
Â  Â  Â  Â  Â  Â  Â  <a
Â  Â  Â  Â  Â  Â  Â  Â  href="#kategorie"
Â  Â  Â  Â  Â  Â  Â  Â  className="btn-yellow inline-flex items-center gap-2 font-extrabold px-6 py-3 rounded-xl2 shadow-soft hover:scale-[1.02] transition"
Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="shopping-bag" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  PrzeglÄ…daj menu
Â  Â  Â  Â  Â  Â  Â  </a>

Â  Â  Â  Â  Â  Â  Â  <a
Â  Â  Â  Â  Â  Â  Â  Â  href="#/kategoria/boxy-sniadaniowe"
Â  Â  Â  Â  Â  Â  Â  Â  className="btn-yellow inline-flex items-center gap-2 font-extrabold px-6 py-3 rounded-xl2 shadow-soft hover:scale-[1.02] transition"
Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="package-open" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Zobacz boxy Å›niadaniowe
Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </section>
Â  Â  );

Â  Â  const SectionTitle = ({eyebrow, title, subtitle}) => (
Â  Â  Â  <div className="text-center max-w-2xl mx-auto">
Â  Â  Â  Â  {eyebrow && <div className="text-xs uppercase tracking-widest text-gray-500">{eyebrow}</div>}
Â  Â  Â  Â  <h2 className="text-3xl md:text-4xl font-extrabold mt-1">{title}</h2>
Â  Â  Â  Â  {subtitle && <p className="text-gray-600 mt-2">{subtitle}</p>}
Â  Â  Â  </div>
Â  Â  );

Â  Â  const CategoryCard = ({ category }) => {
Â  Â  Â  const handleClick = () => { window.location.hash = `#/kategoria/${category.id}`; };
Â  Â  Â  return (
Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  onClick={handleClick}
Â  Â  Â  Â  Â  className="group relative bg-white border border-gray-200 rounded-2xl text-left shadow-soft hover:shadow-md hover:-translate-y-1 transition w-full overflow-hidden hover:ring-2 hover:ring-brand-yellow/60"
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  <div className="absolute inset-x-0 top-0 h-1.5 bg-gradient-to-r from-brand-yellow via-amber-300 to-orange-400 opacity-80 z-[2]"></div>

Â  Â  Â  Â  Â  <div className="relative h-36 w-full overflow-hidden">
Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  src={category.image}
Â  Â  Â  Â  Â  Â  Â  alt={category.name}
Â  Â  Â  Â  Â  Â  Â  loading="lazy"
Â  Â  Â  Â  Â  Â  Â  className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.05]"
Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-gradient-to-t from-black/35 to-transparent"></div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div className="p-5">
Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between gap-3 mt-1">
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="inline-flex items-center gap-2 text-xs uppercase tracking-widest text-gray-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="w-2.5 h-2.5 rounded-full bg-brand-yellow shadow-sm"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Kategoria
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="mt-1 text-lg font-extrabold">{category.name}</h3>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div className="w-10 h-10 rounded-xl bg-brand-yellow/20 grid place-items-center ring-1 ring-brand-yellow/30 group-hover:bg-brand-yellow/30 transition">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide={category.icon} className="w-5 h-5 text-gray-900"></i>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <p className="mt-3 text-sm text-gray-600">{category.description}</p>
Â  Â  Â  Â  Â  Â  <div className="mt-4 inline-flex items-center gap-2 text-sm font-extrabold text-gray-900 group-hover:gap-3 transition">
Â  Â  Â  Â  Â  Â  Â  OtwÃ³rz kategoriÄ™ <i data-lucide="arrow-right" className="w-4 h-4"></i>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </button>
Â  Â  Â  );
Â  Â  };

Â  Â  const splitSubtitle = (text='') =>
Â  Â  Â  text.split('â€¢').map(s => s.trim()).filter(Boolean);

Â  Â  const getBadges = (categoryId, name) => {
Â  Â  Â  const badges = [];
Â  Â  Â  const upper = (name||'').toUpperCase();
Â  Â  Â  if (categoryId === 'boxy-sniadaniowe') badges.push({ label: 'BOX', color: 'bg-kiosk-blue/15 text-kiosk-blue border-kiosk-blue/30' });
Â  Â  Â  if (categoryId === 'lunche') badges.push({ label: 'LUNCH 12â€“16', color: 'bg-kiosk-orange/15 text-kiosk-orange border-kiosk-orange/30' });
Â  Â  Â  if (upper.includes('VEGE')) badges.push({ label: 'VEGE', color: 'bg-kiosk-green/15 text-kiosk-green border-kiosk-green/30' });
Â  Â  Â  return badges;
Â  Â  };

Â  Â  const ProductCard = ({ item, categoryId, onAdd }) => {
Â  Â  Â  const bullets = splitSubtitle(item.subtitle || '');
Â  Â  Â  const badges = getBadges(categoryId, item.name);

Â  Â  Â  return (
Â  Â  Â  Â  <div className="relative bg-white border border-gray-200 rounded-3xl p-5 md:p-6 shadow-soft hover:shadow-kiosk transition group overflow-hidden hover:ring-2 hover:ring-brand-yellow/40">
Â  Â  Â  Â  Â  <div className="absolute inset-x-0 top-0 h-1.5 bg-gradient-to-r from-brand-yellow via-amber-300 to-orange-400 opacity-70"></div>

Â  Â  Â  Â  Â  <div className="relative mt-3 h-36 w-full overflow-hidden rounded-2xl border border-gray-200">
Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  src={item.image}
Â  Â  Â  Â  Â  Â  Â  alt={item.name}
Â  Â  Â  Â  Â  Â  Â  loading="lazy"
Â  Â  Â  Â  Â  Â  Â  className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.04]"
Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-gradient-to-t from-black/25 to-transparent"></div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div className="mt-3 inline-flex items-center gap-2">
Â  Â  Â  Â  Â  Â  <span className="text-[10px] font-extrabold tracking-widest uppercase px-2.5 py-1 rounded-full bg-brand-yellow text-gray-900 shadow-sm">
Â  Â  Â  Â  Â  Â  Â  HIT
Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  <span className="text-[10px] font-extrabold tracking-widest uppercase px-2.5 py-1 rounded-full bg-brand-yellow/15 text-gray-900 border border-brand-yellow/30">
Â  Â  Â  Â  Â  Â  Â  Polecane
Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  {badges.length > 0 && (
Â  Â  Â  Â  Â  Â  <div className="flex flex-wrap gap-2 mt-3">
Â  Â  Â  Â  Â  Â  Â  {badges.map((b, i) => (
Â  Â  Â  Â  Â  Â  Â  Â  <span key={i}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`text-[10px] font-extrabold tracking-widest uppercase border px-2.5 py-1 rounded-full ${b.color}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  {b.label}
Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  <h3 className="text-lg md:text-xl font-extrabold text-gray-900 leading-snug mt-3">
Â  Â  Â  Â  Â  Â  {item.name}
Â  Â  Â  Â  Â  </h3>

Â  Â  Â  Â  Â  {bullets.length > 0 && (
Â  Â  Â  Â  Â  Â  <ul className="mt-3 space-y-1.5 text-sm text-gray-700">
Â  Â  Â  Â  Â  Â  Â  {bullets.map((b, idx) => (
Â  Â  Â  Â  Â  Â  Â  Â  <li key={idx} className="flex gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="mt-[6px] w-1.5 h-1.5 rounded-full bg-gray-900/60 shrink-0"></span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>{b}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  <div className="mt-5 flex items-center justify-between gap-3">
Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  <div className="px-3 py-1.5 rounded-xl bg-gray-900 text-white font-extrabold text-base md:text-lg shadow">
Â  Â  Â  Â  Â  Â  Â  Â  {currency(item.price)}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-500 font-semibold uppercase tracking-wider">
Â  Â  Â  Â  Â  Â  Â  Â  / szt.
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  onClick={() => onAdd(item)}
Â  Â  Â  Â  Â  Â  Â  className="inline-flex items-center justify-center gap-2 bg-brand-yellow text-gray-900 font-extrabold px-4 py-3 rounded-2xl shadow-soft hover:scale-[1.03] active:scale-[0.98] transition hover:ring-2 hover:ring-brand-yellow/40 min-h-[44px]"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="plus" className="w-4 h-4"></i> Dodaj
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â MODAL: dodatki do kawy/herbaty
Â  Â  ======================= */

Â  Â  const lockBodyScroll = (lock) => {
Â  Â  Â  const body = document.body;
Â  Â  Â  if (!body) return;
Â  Â  Â  if (lock) {
Â  Â  Â  Â  body.dataset._scrollY = String(window.scrollY || 0);
Â  Â  Â  Â  body.style.position = "fixed";
Â  Â  Â  Â  body.style.top = `-${window.scrollY || 0}px`;
Â  Â  Â  Â  body.style.left = "0";
Â  Â  Â  Â  body.style.right = "0";
Â  Â  Â  Â  body.style.width = "100%";
Â  Â  Â  } else {
Â  Â  Â  Â  const y = parseInt(body.dataset._scrollY || "0", 10) || 0;
Â  Â  Â  Â  body.style.position = "";
Â  Â  Â  Â  body.style.top = "";
Â  Â  Â  Â  body.style.left = "";
Â  Â  Â  Â  body.style.right = "";
Â  Â  Â  Â  body.style.width = "";
Â  Â  Â  Â  delete body.dataset._scrollY;
Â  Â  Â  Â  window.scrollTo(0, y);
Â  Â  Â  }
Â  Â  };

Â  Â  const DrinkAddonsModal = ({ open, onClose, cartItemId, title }) => {
Â  Â  Â  const { cart, updateItem } = useCart();
Â  Â  Â  const toast = useToast();
Â  Â  Â  const showToast = toast?.show;

Â  Â  Â  const item = useMemo(() => cart.find(x => x.id === cartItemId) || null, [cart, cartItemId]);
Â  Â  Â  const [selected, setSelected] = useState([]);

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  if (!open) return;
Â  Â  Â  Â  setSelected([]);
Â  Â  Â  Â  lockBodyScroll(true);
Â  Â  Â  Â  return () => lockBodyScroll(false);
Â  Â  Â  }, [open]);

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  const onKey = (e) => {
Â  Â  Â  Â  Â  if (!open) return;
Â  Â  Â  Â  Â  if (e.key === "Escape") onClose?.();
Â  Â  Â  Â  };
Â  Â  Â  Â  window.addEventListener("keydown", onKey);
Â  Â  Â  Â  return () => window.removeEventListener("keydown", onKey);
Â  Â  Â  }, [open, onClose]);

Â  Â  Â  useEffect(() => { window.lucide?.createIcons?.(); }, [open]);

Â  Â  Â  if (!open) return null;

Â  Â  Â  const toggle = (addonId) => {
Â  Â  Â  Â  setSelected((prev) => prev.includes(addonId) ? prev.filter(x => x !== addonId) : [...prev, addonId]);
Â  Â  Â  };

Â  Â  Â  const skip = () => {
Â  Â  Â  Â  onClose?.();
Â  Â  Â  };

Â  Â  Â  const apply = () => {
Â  Â  Â  Â  if (!item) { onClose?.(); return; }
Â  Â  Â  Â  const addons = DRINK_ADDONS
Â  Â  Â  Â  Â  .filter(a => selected.includes(a.id))
Â  Â  Â  Â  Â  .map(a => ({ id: a.id, label: a.label, price: a.price }));

Â  Â  Â  Â  updateItem(item.id, { addons });
Â  Â  Â  Â  if (addons.length) {
Â  Â  Â  Â  Â  const label = addons.map(a => a.label).join(", ");
Â  Â  Â  Â  Â  showToast?.(`Dodano dodatki: ${label}`);
Â  Â  Â  Â  }
Â  Â  Â  Â  onClose?.();
Â  Â  Â  };

Â  Â  Â  const addonsSum = selected
Â  Â  Â  Â  .map(id => DRINK_ADDONS.find(a => a.id === id))
Â  Â  Â  Â  .filter(Boolean)
Â  Â  Â  Â  .reduce((s,a)=> s + a.price, 0);

Â  Â  Â  return (
Â  Â  Â  Â  <div className="fixed inset-0 z-[110] bg-black/60 flex items-center justify-center px-4" onClick={skip} role="dialog" aria-modal="true">
Â  Â  Â  Â  Â  <div className="relative w-full max-w-md bg-white rounded-2xl shadow-glass border border-gray-200 p-6 pop-in" onClick={(e)=>e.stopPropagation()}>
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  onClick={skip}
Â  Â  Â  Â  Â  Â  Â  className="absolute top-3 right-3 p-2 rounded-full bg-white border border-gray-200 shadow-soft hover:bg-gray-50 hover:ring-2 hover:ring-brand-yellow/40"
Â  Â  Â  Â  Â  Â  Â  aria-label="Zamknij okno dodatkÃ³w"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="x" className="w-4 h-4"></i>
Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  <div className="mb-4">
Â  Â  Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Dodatki</div>
Â  Â  Â  Â  Â  Â  Â  <h3 className="text-xl font-extrabold mt-1">Wybierz dodatki do napoju</h3>
Â  Â  Â  Â  Â  Â  Â  <p className="text-xs text-gray-600 mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  {title || item?.name || "NapÃ³j"} â€¢ dodatki doliczÄ… siÄ™ do ceny w koszyku
Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div className="bg-gray-50 border border-gray-200 rounded-2xl p-3">
Â  Â  Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-widest text-gray-500 font-semibold">DostÄ™pne dodatki</div>

Â  Â  Â  Â  Â  Â  Â  <div className="mt-3 grid gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  {DRINK_ADDONS.map((a) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  const checked = selected.includes(a.id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={a.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`cursor-pointer flex items-center justify-between gap-3 rounded-2xl border px-4 py-3 shadow-soft transition ${
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checked ? "border-brand-yellow bg-white ring-2 ring-brand-yellow/30" : "border-gray-200 bg-white hover:ring-2 hover:ring-brand-yellow/20"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }`}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="flex items-center gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className={`w-5 h-5 rounded-md border grid place-items-center ${checked ? "bg-brand-yellow border-brand-yellow" : "bg-white border-gray-300"}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {checked ? <span className="text-[12px] font-extrabold">âœ“</span> : null}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-extrabold text-gray-900">{a.label}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-extrabold text-gray-900">{currency(a.price)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="checkbox"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checked={checked}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={() => toggle(a.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div className="mt-3 flex items-center justify-between text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-gray-600 font-semibold">Suma dodatkÃ³w</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-extrabold text-gray-900">{currency(addonsSum)}</span>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div className="mt-4 grid gap-2">
Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  onClick={apply}
Â  Â  Â  Â  Â  Â  Â  Â  className="w-full bg-gray-900 text-white font-extrabold rounded-xl px-4 py-3 min-h-[44px] hover:ring-2 hover:ring-brand-yellow/30"
Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Dodaj wybrane dodatki
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  onClick={skip}
Â  Â  Â  Â  Â  Â  Â  Â  className="w-full bg-brand-yellow text-gray-900 font-extrabold rounded-xl px-4 py-3 min-h-[44px] hover:ring-2 hover:ring-brand-yellow/40"
Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  PomiÅ„
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div className="mt-3 text-[11px] text-gray-500">
Â  Â  Â  Â  Â  Â  Â  Dodatki sÄ… liczone per sztuka (jeÅ›li zwiÄ™kszysz iloÅ›Ä‡ napoju, dodatki mnoÅ¼Ä… siÄ™ razem z iloÅ›ciÄ…).
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â CategoryPage
Â  Â  ======================= */

Â  Â  const CategoryPage = ({ categoryId }) => {
Â  Â  Â  const { add } = useCart();
Â  Â  Â  const category = PRODUCT_CATEGORIES.find(c => c.id === categoryId);
Â  Â  Â  const items = PRODUCTS[categoryId] || [];

Â  Â  Â  // âœ… modal dodatkÃ³w do kawy/herbaty
Â  Â  Â  const [addonsOpen, setAddonsOpen] = useState(false);
Â  Â  Â  const [addonsCartItemId, setAddonsCartItemId] = useState("");
Â  Â  Â  const [addonsTitle, setAddonsTitle] = useState("");

Â  Â  Â  // âœ… ZAWSZE STARTUJ OD GÃ“RY PO WEJÅšCIU W KATEGORIÄ˜
Â  Â  Â  React.useEffect(() => {
Â  Â  Â  Â  window.scrollTo({ top: 0, left: 0, behavior: "auto" });
Â  Â  Â  }, [categoryId]);

Â  Â  Â  if (!category) {
Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  <section className="py-10">
Â  Â  Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  <a href="#/" className="inline-flex items-center gap-2 text-sm text-gray-600">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="arrow-left" className="w-4 h-4"></i> WrÃ³Ä‡
Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  <h2 className="text-2xl font-extrabold mt-3">Kategoria nie istnieje</h2>
Â  Â  Â  Â  Â  Â  Â  <p className="mt-2 text-gray-600">WrÃ³Ä‡ do menu i wybierz jednÄ… z dostÄ™pnych kategorii.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </section>
Â  Â  Â  Â  );
Â  Â  Â  }

Â  Â  Â  const handleAdd = (item) => {
Â  Â  Â  Â  const cartItemId = add({
Â  Â  Â  Â  Â  type: 'product',
Â  Â  Â  Â  Â  productId: item.id,
Â  Â  Â  Â  Â  name: item.name,
Â  Â  Â  Â  Â  price: item.price,
Â  Â  Â  Â  Â  image: item.image
Â  Â  Â  Â  });

Â  Â  Â  Â  // âœ… po dodaniu kawy/herbaty: pokaÅ¼ okienko z dodatkami
Â  Â  Â  Â  if (shouldPromptDrinkAddons({ categoryId, item })) {
Â  Â  Â  Â  Â  setAddonsCartItemId(cartItemId);
Â  Â  Â  Â  Â  setAddonsTitle(item.name);
Â  Â  Â  Â  Â  setAddonsOpen(true);
Â  Â  Â  Â  }
Â  Â  Â  };

Â  Â  Â  return (
Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  <section className="py-6 md:py-10">
Â  Â  Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  <a href="#kategorie" className="mt-2 inline-flex items-center justify-center gap-2 text-lg font-extrabold text-gray-900 bg-brand-yellow/20 border border-brand-yellow/30 rounded-2xl px-5 py-3 shadow-soft hover:ring-2 hover:ring-brand-yellow/40 transition">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="arrow-left" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â WrÃ³Ä‡ do menu
Â  Â  Â  Â  Â  Â  Â  </a>

Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 flex items-center gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-11 h-11 rounded-2xl bg-brand-yellow/20 grid place-items-center ring-1 ring-brand-yellow/30">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide={category.icon} className="w-6 h-6 text-gray-900"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h2 className="text-2xl md:text-3xl font-extrabold">{category.name}</h2>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-600 mt-1">{category.description}</p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div className="mt-6 grid gap-5 sm:grid-cols-2 xl:grid-cols-3 md:gap-6">
Â  Â  Â  Â  Â  Â  Â  Â  {items.map(item => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <ProductCard
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={item.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item={item}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  categoryId={categoryId}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onAdd={handleAdd}
Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div className="mt-10 flex justify-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <a href="#kategorie" className="inline-flex items-center justify-center gap-2 text-lg font-extrabold text-gray-900 bg-brand-yellow border border-black/5 rounded-2xl px-6 py-4 shadow-soft hover:scale-[1.02] active:scale-[0.98] transition hover:ring-2 hover:ring-brand-yellow/40 min-h-[56px]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="arrow-left" className="w-6 h-6"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â WrÃ³Ä‡ do menu
Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </section>

Â  Â  Â  Â  Â  <DrinkAddonsModal
Â  Â  Â  Â  Â  Â  open={addonsOpen}
Â  Â  Â  Â  Â  Â  onClose={() => setAddonsOpen(false)}
Â  Â  Â  Â  Â  Â  cartItemId={addonsCartItemId}
Â  Â  Â  Â  Â  Â  title={addonsTitle}
Â  Â  Â  Â  Â  />
Â  Â  Â  Â  </>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â Koszyk
Â  Â  ======================= */

Â  Â  const Koszyk = () => {
Â  Â  Â  const { cart, remove, clear, total, incQty, decQty, setQty, lineTotal, add, addonsTotalPerUnit } = useCart();
Â  Â  Â  const goToCheckout = () => window.location.hash = '#/zamowienie';

Â  Â  Â  return (
Â  Â  Â  Â  <section className="py-8 md:py-10">
Â  Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  <a href="#/" className="inline-flex items-center gap-2 text-sm text-gray-600">
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="arrow-left" className="w-4 h-4"></i> WrÃ³Ä‡
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  <h2 className="text-2xl font-extrabold mt-3">Koszyk</h2>

Â  Â  Â  Â  Â  Â  {cart.length === 0 ? (
Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 bg-white border border-gray-200 rounded-2xl p-5">
Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-gray-700 font-semibold">TwÃ³j koszyk jest pusty.</p>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="#kategorie" className="inline-flex mt-3 items-center gap-2 bg-brand-yellow text-gray-900 font-extrabold rounded-xl px-4 py-3 hover:ring-2 hover:ring-brand-yellow/40 min-h-[44px]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="shopping-bag" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Wybierz menu
Â  Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  ) : (
Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-6 grid md:grid-cols-3 gap-6 items-start">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="md:col-span-2 space-y-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {cart.map(item => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const addSum = addonsTotalPerUnit(item);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={item.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="bg-white border border-gray-200 rounded-2xl p-4 flex flex-col md:flex-row gap-4 md:items-center justify-between w-full hover:ring-2 hover:ring-brand-yellow/30 transition">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-start gap-3 min-w-0 flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-14 h-14 rounded-2xl overflow-hidden border border-gray-200 shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  src={item.image}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alt={item.name}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loading="lazy"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full h-full object-cover"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="min-w-0 flex-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-bold break-words">{item.name}</div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {/* âœ… pokazujemy dodatki */}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Array.isArray(item.addons) && item.addons.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-1 flex flex-wrap gap-1.5">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {item.addons.map((a) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span key={a.id} className="text-[11px] font-extrabold px-2 py-1 rounded-full bg-brand-yellow/20 border border-brand-yellow/30">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  + {a.label} ({currency(a.price)})
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-500 mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ID produktu: <span className="font-mono">{item.productId || 'brak'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {addSum > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-500 mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Dodatki / szt.: <span className="font-extrabold text-gray-900">{currency(addSum)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col sm:flex-row md:flex-row gap-3 md:gap-4 items-stretch md:items-center w-full md:w-auto justify-between md:justify-end">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-2 self-start">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={()=> decQty(item.id)} className="w-10 h-10 rounded-xl border border-gray-200 grid place-items-center hover:ring-2 hover:ring-brand-yellow/40">âˆ’</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value={item.qty||1}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e)=> setQty(item.id, parseInt(e.target.value||'1',10))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-16 text-center border border-gray-200 rounded-xl py-2"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputMode="numeric"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pattern="[0-9]*"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={()=> incQty(item.id)} className="w-10 h-10 rounded-xl border border-gray-200 grid place-items-center hover:ring-2 hover:ring-brand-yellow/40">+</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-right self-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold whitespace-nowrap">{currency(lineTotal(item))}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-500 whitespace-nowrap">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ({currency(item.price + (addSum || 0))} / szt.)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={()=> remove(item.id)} className="text-red-600 hover:underline self-center text-sm">UsuÅ„</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <aside className="bg-white border border-gray-200 rounded-2xl p-5 sticky top-[84px]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-semibold">Suma</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-extrabold">{currency(total)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 grid gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={goToCheckout}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full bg-brand-yellow text-gray-900 font-extrabold rounded-xl px-4 py-3 hover:ring-2 hover:ring-brand-yellow/40 min-h-[44px]"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  PrzejdÅº do zamÃ³wienia
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onClick={clear} className="w-full bg-gray-100 text-gray-700 rounded-xl px-4 py-3 hover:ring-2 hover:ring-brand-yellow/20 min-h-[44px]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  WyczyÅ›Ä‡ koszyk
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </aside>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-10 border-t border-gray-200 pt-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 className="text-lg font-bold flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>MoÅ¼e dorzucisz coÅ› jeszcze?</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-xs px-2 py-0.5 rounded-full bg-brand-yellow text-gray-900 font-extrabold">1 klik i dodane</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <p className="text-sm text-gray-600 mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  SÅ‚odki dodatek lub napÃ³j czÄ™sto robi rÃ³Å¼nicÄ™ â€” szczegÃ³lnie przy wiÄ™kszych zamÃ³wieniach.
Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 flex flex-wrap gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {EXTRA_ITEMS.map(extra => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button key={extra.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => add({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type:'extra',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  productId: extra.id,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: extra.name,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  price: extra.price,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  image: extra.image
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="flex items-center gap-3 px-4 py-3 rounded-full bg-white border border-gray-200 shadow-soft text-sm hover:shadow-md hover:-translate-y-0.5 transition hover:ring-2 hover:ring-brand-yellow/30 min-h-[44px]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-8 h-8 rounded-full overflow-hidden border border-gray-200 shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src={extra.image} alt={extra.name} className="w-full h-full object-cover" loading="lazy" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="text-base font-extrabold text-brand-yellow">+</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>{extra.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-extrabold text-gray-900">{currency(extra.price)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â ZAMOWIENIE (3 metody pÅ‚atnoÅ›ci) + ACTIVE ORDER TRACKING
Â  Â  ======================= */

Â  Â  const Zamowienie = () => {
Â  Â  Â  const { cart, total, lineTotal, clear, addonsTotalPerUnit } = useCart();
Â  Â  Â  const { user } = useAuth();
Â  Â  Â  const { saveOrder } = useActiveOrder();
Â  Â  Â  const toast = useToast();
Â  Â  Â  const showToast = toast?.show;

Â  Â  Â  const emptyForm = {
Â  Â  Â  Â  imieNazwisko:'', telefon:'', email:'', miasto:'', kod:'', ulica:'', nrBud:'', pietro:'', lokal:'', uwagi:'', faktura:false, nip:'', firma:''
Â  Â  Â  };

Â  Â  Â  const [form, setForm] = useState(() => {
Â  Â  Â  Â  const saved = loadSavedCustomer();
Â  Â  Â  Â  const base = { ...emptyForm };
Â  Â  Â  Â  if (saved && typeof saved === "object") {
Â  Â  Â  Â  Â  Object.keys(base).forEach((k) => {
Â  Â  Â  Â  Â  Â  if (typeof saved[k] !== "undefined" && saved[k] !== null) base[k] = saved[k];
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  if (user?.email) base.email = base.email || user.email;
Â  Â  Â  Â  if (user?.fullName) base.imieNazwisko = base.imieNazwisko || user.fullName;
Â  Â  Â  Â  return base;
Â  Â  Â  });

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  setForm((prev) => {
Â  Â  Â  Â  Â  const next = { ...prev };
Â  Â  Â  Â  Â  if (user?.email) next.email = next.email || user.email;
Â  Â  Â  Â  Â  if (user?.fullName) next.imieNazwisko = next.imieNazwisko || user.fullName;
Â  Â  Â  Â  Â  return next;
Â  Â  Â  Â  });
Â  Â  Â  }, [user]);

Â  Â  Â  const [remember, setRemember] = useState(true);
Â  Â  Â  const [hadSaved, setHadSaved] = useState(() => !!loadSavedCustomer());

Â  Â  Â  // payu | card | cash
Â  Â  Â  const [paymentMethod, setPaymentMethod] = useState("payu");
Â  Â  Â  const [busyPay, setBusyPay] = useState(false);

Â  Â  Â  const handle = (k,v)=> setForm(s=> ({...s,[k]:v}));

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  if (!remember) return;
Â  Â  Â  Â  const t = setTimeout(() => {
Â  Â  Â  Â  Â  saveCustomer({ ...form });
Â  Â  Â  Â  Â  setHadSaved(true);
Â  Â  Â  Â  }, 250);
Â  Â  Â  Â  return () => clearTimeout(t);
Â  Â  Â  }, [form, remember]);

Â  Â  Â  const clearRemembered = () => {
Â  Â  Â  Â  clearSavedCustomer();
Â  Â  Â  Â  setHadSaved(false);
Â  Â  Â  };

Â  Â  Â  const validateBeforeOrder = () => {
Â  Â  Â  Â  if(!form.imieNazwisko || !form.telefon || !form.miasto || !form.ulica) {
Â  Â  Â  Â  Â  alert('UzupeÅ‚nij wymagane pola');
Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  }
Â  Â  Â  Â  if (!cart.length) {
Â  Â  Â  Â  Â  alert('Koszyk jest pusty.');
Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  }
Â  Â  Â  Â  const missing = cart.find(i => !i.productId);
Â  Â  Â  Â  if (missing) {
Â  Â  Â  Â  Â  alert("W koszyku jest pozycja bez productId. Dodaj produkt ponownie.");
Â  Â  Â  Â  Â  console.log("Missing productId item:", missing);
Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  }
Â  Â  Â  Â  return true;
Â  Â  Â  };

Â  Â  Â const placeOrder = async (method) => {
Â  Â  Â  Â  if (!validateBeforeOrder()) return;

Â  Â  Â  Â  if (remember) {
Â  Â  Â  Â  Â  saveCustomer({ ...form });
Â  Â  Â  Â  Â  setHadSaved(true);
Â  Â  Â  Â  }

Â  Â  Â  Â  setBusyPay(true);

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  const payload = {
Â  Â  Â  Â  Â  Â  customer: form,
Â  Â  Â  Â  Â  Â  cart: cart.map(i => ({
Â  Â  Â  Â  Â  Â  Â  productId: i.productId,
Â  Â  Â  Â  Â  Â  Â  name: i.name,
Â  Â  Â  Â  Â  Â  Â  price: i.price,
Â  Â  Â  Â  Â  Â  Â  qty: i.qty || 1,
Â  Â  Â  Â  Â  Â  Â  addons: Array.isArray(i.addons) ? i.addons.map(a => ({ id: a.id, label: a.label, price: a.price })) : []
Â  Â  Â  Â  Â  Â  })),
Â  Â  Â  Â  Â  Â  total: total
Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  // --- PÅATNOÅšÄ† ONLINE (PAYU) ---
Â  Â  Â  Â  Â  if (method === "payu") {
Â  Â  Â  Â  Â  Â  const r = await fetch("/api/payu/order", {
Â  Â  Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(payload),
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const data = await r.json().catch(() => ({}));
Â  Â  Â  Â  Â  Â  if (!r.ok) {
Â  Â  Â  Â  Â  Â  Â  alert("BÅ‚Ä…d serwera: " + (data.error || r.status));
Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // âœ… WAÅ»NE: Zapisujemy extOrderId z serwera przed przekierowaniem
Â  Â  Â  Â  Â  Â  // (choÄ‡ przy redirect to moÅ¼e byÄ‡ trudne, bo strona siÄ™ przeÅ‚aduje,
Â  Â  Â  Â  Â  Â  //Â  ale PayU po powrocie powinno obsÅ‚uÅ¼yÄ‡ status - to temat na osobny wÄ…tek "powrÃ³t z PayU").
Â  Â  Â  Â  Â  Â  //Â  W prostym scenariuszu PayU: status sprawdzimy po powrocie na stronÄ™ Success (jeÅ›li takÄ… zrobisz).
Â  Â  Â  Â  Â  Â  //Â  Tutaj skupiamy siÄ™ na redirect.
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (data.redirectUri) {
Â  Â  Â  Â  Â  Â  Â  Â window.location.href = data.redirectUri;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â alert("BÅ‚Ä…d: Brak linku do pÅ‚atnoÅ›ci");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  // --- PÅATNOÅšÄ† OFFLINE (PRZY ODBIORZE) ---
Â  Â  Â  Â  Â  const offlinePayload = { ...payload, paymentMethod: method };

Â  Â  Â  Â  Â  const r2 = await fetch("/api/order/offline", {
Â  Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  Â  body: JSON.stringify(offlinePayload),
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  const data2 = await r2.json();

Â  Â  Â  Â  Â  if (!r2.ok) {
Â  Â  Â  Â  Â  Â  Â throw new Error(data2.error || "BÅ‚Ä…d zamÃ³wienia");
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  // âœ… KLUCZOWA ZMIANA: UÅ¼ywamy extOrderId zwrÃ³conego przez serwer
Â  Â  Â  Â  Â  saveOrder({
Â  Â  Â  Â  Â  Â  Â extOrderId: data2.extOrderId, // <--- TO JEST KLUCZ DO ÅšLEDZENIA
Â  Â  Â  Â  Â  Â  Â customer: form,
Â  Â  Â  Â  Â  Â  Â items: cart,
Â  Â  Â  Â  Â  Â  Â total: total,
Â  Â  Â  Â  Â  Â  Â paymentMethod: method
Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  showToast?.("Twoje zamÃ³wienie zostaÅ‚o przyjÄ™te! ðŸ‘¨â€ðŸ³");
Â  Â  Â  Â  Â  clear();
Â  Â  Â  Â  Â  window.location.hash = "#/";
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  alert("Nie udaÅ‚o siÄ™ zÅ‚oÅ¼yÄ‡ zamÃ³wienia: " + e.message);
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  setBusyPay(false);
Â  Â  Â  Â  }
Â  Â  Â  };

Â  Â  Â  const paymentLabel =
Â  Â  Â  Â  paymentMethod === "payu" ? "PÅ‚atnoÅ›Ä‡ online (PayU)" :
Â  Â  Â  Â  paymentMethod === "card" ? "ZÅ‚Ã³Å¼ zamÃ³wienie (karta przy odbiorze)" :
Â  Â  Â  Â  "ZÅ‚Ã³Å¼ zamÃ³wienie (gotÃ³wka przy odbiorze)";

Â  Â  Â  return (
Â  Â  Â  Â  <section className="py-8 md:py-10">
Â  Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  <a href="#/koszyk" className="inline-flex items-center gap-2 text-sm text-gray-600">
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="arrow-left" className="w-4 h-4"></i> WrÃ³Ä‡ do koszyka
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  <h2 className="text-2xl font-extrabold mt-3">ZamÃ³wienie</h2>

Â  Â  Â  Â  Â  Â  {!user && (
Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 bg-white border border-gray-200 rounded-2xl p-4 shadow-soft">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-widest text-gray-500 font-semibold">Konto (opcjonalnie)</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold text-gray-900">Zaloguj siÄ™, Å¼eby szybciej uzupeÅ‚niaÄ‡ dane</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-sm text-gray-600 mt-1">Email i imiÄ™/nazwisko mogÄ… uzupeÅ‚niÄ‡ siÄ™ automatycznie.</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  <div className="mt-4 bg-white border border-gray-200 rounded-2xl p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3 shadow-soft">
Â  Â  Â  Â  Â  Â  Â  <label className="flex items-center gap-2 text-sm font-semibold text-gray-800">
Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="checkbox"
Â  Â  Â  Â  Â  Â  Â  Â  Â  checked={remember}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e)=>setRemember(e.target.checked)}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  ZapamiÄ™taj dane na przyszÅ‚oÅ›Ä‡
Â  Â  Â  Â  Â  Â  Â  </label>

Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  {hadSaved && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-500">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Mamy zapisane dane â€” formularz uzupeÅ‚nia siÄ™ automatycznie.
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={clearRemembered}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="inline-flex items-center gap-2 px-3 py-2 rounded-xl border border-gray-200 bg-gray-50 text-gray-800 text-sm font-semibold hover:ring-2 hover:ring-brand-yellow/20"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="trash-2" className="w-4 h-4"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  WyczyÅ›Ä‡ zapamiÄ™tane dane
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  {/* âœ… wybÃ³r metody pÅ‚atnoÅ›ci */}
Â  Â  Â  Â  Â  Â  <div className="mt-4 bg-white border border-gray-200 rounded-2xl p-4 shadow-soft">
Â  Â  Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-widest text-gray-500 font-semibold">Metoda pÅ‚atnoÅ›ci</div>
Â  Â  Â  Â  Â  Â  Â  <div className="mt-3 grid md:grid-cols-3 gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  <label className={`cursor-pointer rounded-2xl border p-4 shadow-soft hover:ring-2 hover:ring-brand-yellow/30 transition ${paymentMethod==="payu" ? "border-brand-yellow ring-2 ring-brand-yellow/30" : "border-gray-200"}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="radio"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name="payment"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value="payu"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checked={paymentMethod==="payu"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={() => setPaymentMethod("payu")}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-start gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-11 h-11 rounded-2xl bg-brand-yellow/20 grid place-items-center ring-1 ring-brand-yellow/30 shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="credit-card" className="w-5 h-5 text-gray-900"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold text-gray-900">Online (PayU)</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-600 mt-0.5">ZapÅ‚aÄ‡ od razu i przejdÅº do PayU.</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </label>

Â  Â  Â  Â  Â  Â  Â  Â  <label className={`cursor-pointer rounded-2xl border p-4 shadow-soft hover:ring-2 hover:ring-brand-yellow/30 transition ${paymentMethod==="card" ? "border-brand-yellow ring-2 ring-brand-yellow/30" : "border-gray-200"}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="radio"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name="payment"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value="card"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checked={paymentMethod==="card"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={() => setPaymentMethod("card")}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-start gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-11 h-11 rounded-2xl bg-brand-yellow/20 grid place-items-center ring-1 ring-brand-yellow/30 shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="credit-card" className="w-5 h-5 text-gray-900"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold text-gray-900">Karta przy odbiorze</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-600 mt-0.5">ZapÅ‚acisz kartÄ… na miejscu.</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </label>

Â  Â  Â  Â  Â  Â  Â  Â  <label className={`cursor-pointer rounded-2xl border p-4 shadow-soft hover:ring-2 hover:ring-brand-yellow/30 transition ${paymentMethod==="cash" ? "border-brand-yellow ring-2 ring-brand-yellow/30" : "border-gray-200"}`}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="radio"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name="payment"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value="cash"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checked={paymentMethod==="cash"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={() => setPaymentMethod("cash")}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="hidden"
Â  Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-start gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-11 h-11 rounded-2xl bg-brand-yellow/20 grid place-items-center ring-1 ring-brand-yellow/30 shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="banknote" className="w-5 h-5 text-gray-900"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold text-gray-900">GotÃ³wka przy odbiorze</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-600 mt-0.5">ZapÅ‚acisz gotÃ³wkÄ… na miejscu.</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div className="mt-6 grid lg:grid-cols-3 gap-6 items-start">
Â  Â  Â  Â  Â  Â  Â  <div className="lg:col-span-2 bg-white border border-gray-200 rounded-2xl p-5">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid md:grid-cols-2 gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">ImiÄ™ i nazwisko *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.imieNazwisko} onChange={e=>handle('imieNazwisko', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Nr telefonu *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.telefon} onChange={e=>handle('telefon', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Adres email</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.email} onChange={e=>handle('email', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Miasto *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.miasto} onChange={e=>handle('miasto', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Kod pocztowy</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.kod} onChange={e=>handle('kod', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Ulica *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.ulica} onChange={e=>handle('ulica', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Nr budynku</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.nrBud} onChange={e=>handle('nrBud', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">PiÄ™tro</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.pietro} onChange={e=>handle('pietro', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Nr lokalu</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.lokal} onChange={e=>handle('lokal', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="md:col-span-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Uwagi do zamÃ³wienia</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea value={form.uwagi} onChange={e=>handle('uwagi', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 min-h-[120px] bg-white"></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="flex items-center gap-2 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" checked={form.faktura} onChange={e=>handle('faktura', e.target.checked)} />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ChcÄ™ dane do faktury
Â  Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  {form.faktura && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="grid md:grid-cols-2 gap-4 mt-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">NIP</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.nip} onChange={e=>handle('nip', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Nazwa firmy</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input value={form.firma} onChange={e=>handle('firma', e.target.value)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <aside className="bg-white border border-gray-200 rounded-2xl p-5 sticky top-[84px]">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-semibold">Podsumowanie</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-3 space-y-3 max-h-64 overflow-auto pr-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  {cart.map(i => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const addSum = addonsTotalPerUnit(i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div key={i.id} className="text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-medium">{i.name} Ã— {i.qty||1}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-bold">{currency(lineTotal(i))}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {Array.isArray(i.addons) && i.addons.length > 0 && (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-1 flex flex-wrap gap-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {i.addons.map((a) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span key={a.id} className="text-[10px] font-extrabold px-2 py-1 rounded-full bg-brand-yellow/15 border border-brand-yellow/30">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  + {a.label}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  Â  })}
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 bg-gray-50 border border-gray-200 rounded-2xl p-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-widest text-gray-500 font-semibold">Wybrana pÅ‚atnoÅ›Ä‡</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-1 font-extrabold text-gray-900">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {paymentMethod === "payu" && "Online (PayU)"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {paymentMethod === "card" && "Karta przy odbiorze"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {paymentMethod === "cash" && "GotÃ³wka przy odbiorze"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between mt-4 text-lg">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-bold">Do zapÅ‚aty</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-extrabold">{currency(total)}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => placeOrder(paymentMethod)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  disabled={busyPay}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className={`w-full mt-4 font-extrabold rounded-xl px-4 py-3 min-h-[44px] hover:ring-2 hover:ring-brand-yellow/40 ${busyPay ? "bg-gray-200 text-gray-600 cursor-not-allowed" : "bg-brand-yellow text-gray-900"}`}
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="inline-flex items-center justify-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {busyPay && <i data-lucide="loader" className="w-4 h-4 spin"></i>}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {paymentLabel}
Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </aside>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â AUTH MODAL (bez kodÃ³w)
Â  Â  ======================= */

Â  Â  const AuthModal = ({ open, onClose, initialStep }) => {
Â  Â  Â  const { user, login, register, logout } = useAuth();
Â  Â  Â  const toast = useToast();
Â  Â  Â  const showToast = toast?.show;

Â  Â  Â  const [step, setStep] = useState("login");
Â  Â  Â  const [busy, setBusy] = useState(false);
Â  Â  Â  const [error, setError] = useState("");

Â  Â  Â  const [loginForm, setLoginForm] = useState({ email: "", password: "" });
Â  Â  Â  const [regForm, setRegForm] = useState({ email: "", fullName: "", password: "", confirm: "" });

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  if (!open) return;
Â  Â  Â  Â  setError("");
Â  Â  Â  Â  setBusy(false);

Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  setStep("account");
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  if (initialStep && ["login","register","account"].includes(initialStep)) {
Â  Â  Â  Â  Â  Â  setStep(initialStep === "account" ? "login" : initialStep);
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  setStep("login");
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }, [open, initialStep, user]);

Â  Â  Â  useEffect(() => { window.lucide?.createIcons?.(); }, [open, step, busy, error, user]);

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  const onKey = (e) => {
Â  Â  Â  Â  Â  if (!open) return;
Â  Â  Â  Â  Â  if (e.key === "Escape") onClose?.();
Â  Â  Â  Â  };
Â  Â  Â  Â  window.addEventListener("keydown", onKey);
Â  Â  Â  Â  return () => window.removeEventListener("keydown", onKey);
Â  Â  Â  }, [open, onClose]);

Â  Â  Â  if (!open) return null;

Â  Â  Â  const submitLogin = async (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  setError("");
Â  Â  Â  Â  setBusy(true);
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  await login({ email: loginForm.email, password: loginForm.password });
Â  Â  Â  Â  Â  onClose?.();
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  setError(err?.message || "BÅ‚Ä…d logowania");
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  setBusy(false);
Â  Â  Â  Â  }
Â  Â  Â  };

Â  Â  Â  const submitRegister = async (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  setError("");
Â  Â  Â  Â  setBusy(true);
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  await register(regForm);
Â  Â  Â  Â  Â  onClose?.();
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  setError(err?.message || "BÅ‚Ä…d rejestracji");
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  setBusy(false);
Â  Â  Â  Â  }
Â  Â  Â  };

Â  Â  Â  const Title = ({ eyebrow, title, subtitle }) => (
Â  Â  Â  Â  <div className="mb-4">
Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">{eyebrow}</div>
Â  Â  Â  Â  Â  <h3 className="text-xl font-extrabold mt-1">{title}</h3>
Â  Â  Â  Â  Â  {subtitle && <p className="text-xs text-gray-500 mt-1">{subtitle}</p>}
Â  Â  Â  Â  Â  {error && (
Â  Â  Â  Â  Â  Â  <div className="mt-3 text-sm bg-red-50 border border-red-200 text-red-700 rounded-xl px-3 py-2">
Â  Â  Â  Â  Â  Â  Â  {error}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  </div>
Â  Â  Â  );

Â  Â  Â  const Button = ({ children, onClick, type="button", variant="dark", disabled=false }) => {
Â  Â  Â  Â  const cls =
Â  Â  Â  Â  Â  variant === "dark"
Â  Â  Â  Â  Â  Â  ? "bg-gray-900 text-white hover:bg-black hover:ring-2 hover:ring-brand-yellow/30"
Â  Â  Â  Â  Â  Â  : variant === "yellow"
Â  Â  Â  Â  Â  Â  Â  ? "bg-brand-yellow text-gray-900 hover:ring-2 hover:ring-brand-yellow/40"
Â  Â  Â  Â  Â  Â  Â  : "bg-gray-100 text-gray-900 hover:ring-2 hover:ring-brand-yellow/20";

Â  Â  Â  Â  return (
Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  type={type}
Â  Â  Â  Â  Â  Â  onClick={onClick}
Â  Â  Â  Â  Â  Â  disabled={disabled}
Â  Â  Â  Â  Â  Â  className={`w-full mt-1 font-semibold rounded-xl px-4 py-3 text-sm min-h-[44px] transition ${cls} ${disabled ? "opacity-60 cursor-not-allowed" : ""}`}
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  <span className="inline-flex items-center justify-center gap-2">
Â  Â  Â  Â  Â  Â  Â  {disabled && <i data-lucide="loader" className="w-4 h-4 spin"></i>}
Â  Â  Â  Â  Â  Â  Â  {children}
Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  );
Â  Â  Â  };

Â  Â  Â  return (
Â  Â  Â  Â  <div className="fixed inset-0 z-[90] bg-black/60 flex items-center justify-center px-4" onClick={onClose} role="dialog" aria-modal="true">
Â  Â  Â  Â  Â  <div className="relative w-full max-w-md bg-white rounded-2xl shadow-glass border border-gray-200 p-6" onClick={(e) => e.stopPropagation()}>
Â  Â  Â  Â  Â  Â  <button type="button" onClick={onClose} className="absolute top-3 right-3 p-2 rounded-full bg-white border border-gray-200 shadow-soft hover:bg-gray-50 hover:ring-2 hover:ring-brand-yellow/40" aria-label="Zamknij okno konta">
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="x" className="w-4 h-4"></i>
Â  Â  Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  {step === "account" && user && (
Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  <Title
Â  Â  Â  Â  Â  Â  Â  Â  Â  eyebrow="Konto"
Â  Â  Â  Â  Â  Â  Â  Â  Â  title="JesteÅ› zalogowany"
Â  Â  Â  Â  Â  Â  Â  Â  Â  subtitle="MoÅ¼esz siÄ™ wylogowaÄ‡ albo zamknÄ…Ä‡ okno."
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <div className="bg-white border border-gray-200 rounded-2xl p-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-widest text-gray-500 font-semibold">UÅ¼ytkownik</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-1 font-extrabold text-gray-900">{user.fullName || "-"}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-1 text-sm text-gray-700">{user.email || "-"}</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 grid gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <Button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  variant="yellow"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => { showToast?.("OK ðŸ‘"); onClose?.(); }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Zamknij
Â  Â  Â  Â  Â  Â  Â  Â  Â  </Button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <Button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  variant="ghost"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => { logout(); setStep("login"); }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Wyloguj
Â  Â  Â  Â  Â  Â  Â  Â  Â  </Button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  {step === "login" && (
Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  <Title
Â  Â  Â  Â  Â  Â  Â  Â  Â  eyebrow="Logowanie"
Â  Â  Â  Â  Â  Â  Â  Â  Â  title="Zaloguj siÄ™ do eatmi"
Â  Â  Â  Â  Â  Â  Â  Â  Â  subtitle="Zaloguj siÄ™, aby szybciej zamawiaÄ‡ i mieÄ‡ zapisane dane."
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={submitLogin} className="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Adres e-mail</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" required value={loginForm.email}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setLoginForm(s => ({...s, email: e.target.value}))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="np. jan.kowalski@example.com"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus mt-1 w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">HasÅ‚o</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" required value={loginForm.password}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setLoginForm(s => ({...s, password: e.target.value}))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Wpisz hasÅ‚o"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus mt-1 w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <Button type="submit" variant="dark" disabled={busy}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Zaloguj siÄ™
Â  Â  Â  Â  Â  Â  Â  Â  Â  </Button>
Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 text-xs text-gray-600 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Nie masz konta?{" "}
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => { setStep("register"); setError(""); }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="font-semibold text-gray-900 underline underline-offset-2"
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Zarejestruj siÄ™
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  )}

Â  Â  Â  Â  Â  Â  {step === "register" && (
Â  Â  Â  Â  Â  Â  Â  <>
Â  Â  Â  Â  Â  Â  Â  Â  <Title
Â  Â  Â  Â  Â  Â  Â  Â  Â  eyebrow="Rejestracja"
Â  Â  Â  Â  Â  Â  Â  Â  Â  title="ZaÅ‚Ã³Å¼ konto w eatmi"
Â  Â  Â  Â  Â  Â  Â  Â  Â  subtitle="Rejestracja bez kodÃ³w â€” po utworzeniu konta zalogujemy CiÄ™ automatycznie."
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <form onSubmit={submitRegister} className="space-y-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">Adres e-mail</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" required value={regForm.email}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setRegForm(s => ({...s, email: e.target.value}))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="np. jan.kowalski@example.com"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus mt-1 w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">ImiÄ™ i nazwisko</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" required value={regForm.fullName}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setRegForm(s => ({...s, fullName: e.target.value}))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="np. Jan Kowalski"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus mt-1 w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">HasÅ‚o (min. 8 znakÃ³w)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" required value={regForm.password}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setRegForm(s => ({...s, password: e.target.value}))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="Ustaw hasÅ‚o"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus mt-1 w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label className="text-xs uppercase tracking-wider text-gray-500">PowtÃ³rz hasÅ‚o</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="password" required value={regForm.confirm}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onChange={(e) => setRegForm(s => ({...s, confirm: e.target.value}))}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  placeholder="PowtÃ³rz hasÅ‚o"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="input-focus mt-1 w-full border border-gray-200 rounded-xl px-4 py-3 bg-white min-h-[44px]"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <Button type="submit" variant="dark" disabled={busy}>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ZaÅ‚Ã³Å¼ konto
Â  Â  Â  Â  Â  Â  Â  Â  Â  </Button>
Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 text-xs text-gray-600 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Masz konto?{" "}
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => { setStep("login"); setError(""); }}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="font-semibold text-gray-900 underline underline-offset-2"
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Zaloguj siÄ™
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </>
Â  Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â HOME (bez formularza kontaktowego)
Â  Â  ======================= */

Â  Â  const Home = () => (
Â  Â  Â  <>
Â  Â  Â  Â  <Hero />

Â  Â  Â  Â  <section id="kategorie" className="py-12 md:py-20 bg-gradient-to-b from-white to-brand-light">
Â  Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  <SectionTitle eyebrow="Menu" title="Wybierz z Menu" subtitle="Najpierw wybierz kategoriÄ™, potem dodawaj pozycje do koszyka â€” w kilka klikniÄ™Ä‡!" />
Â  Â  Â  Â  Â  Â  <div className="mt-8 grid gap-5 md:grid-cols-3 md:gap-6">
Â  Â  Â  Â  Â  Â  Â  {PRODUCT_CATEGORIES.map(cat => <CategoryCard key={cat.id} category={cat} />)}
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </section>
Â  Â  Â  </>
Â  Â  );

Â  Â  /* =======================
Â  Â  Â  Â Router (hash) â€” FIX (route split '?')
Â  Â  ======================= */

Â  Â  const Router = () => {
Â  Â  Â  const [route, setRoute] = useState(window.location.hash || '#/');

Â  Â  Â  useEffect(()=>{
Â  Â  Â  Â  const onHash = () => setRoute(window.location.hash || '#/');
Â  Â  Â  Â  window.addEventListener('hashchange', onHash);
Â  Â  Â  Â  return ()=> window.removeEventListener('hashchange', onHash);
Â  Â  Â  },[]);

Â  Â  Â  useEffect(()=> { window.lucide?.createIcons?.(); }, [route]);

Â  Â  Â  const pathOnly = (route || '#/').split('?')[0];

Â  Â  Â  if (pathOnly.startsWith('#/kategoria/')) {
Â  Â  Â  Â  const id = pathOnly.split('/')[2];
Â  Â  Â  Â  return <CategoryPage categoryId={id} />;
Â  Â  Â  }
Â  Â  Â  if(pathOnly === '#/koszyk') return <Koszyk />;
Â  Â  Â  if(pathOnly === '#/zamowienie') return <Zamowienie />;
Â  Â  Â  return <Home />;
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â Mobile components
Â  Â  ======================= */

Â  Â  const CategorySheet = ({ open, onClose }) => {
Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  if (open) lockBodyScroll(true);
Â  Â  Â  Â  return () => lockBodyScroll(false);
Â  Â  Â  }, [open]);

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  const onKey = (e) => {
Â  Â  Â  Â  Â  if (!open) return;
Â  Â  Â  Â  Â  if (e.key === "Escape") onClose?.();
Â  Â  Â  Â  };
Â  Â  Â  Â  window.addEventListener("keydown", onKey);
Â  Â  Â  Â  return () => window.removeEventListener("keydown", onKey);
Â  Â  Â  }, [open, onClose]);

Â  Â  Â  useEffect(() => { window.lucide?.createIcons?.(); }, [open]);

Â  Â  Â  if (!open) return null;

Â  Â  Â  const go = (id) => {
Â  Â  Â  Â  window.location.hash = `#/kategoria/${id}`;
Â  Â  Â  Â  onClose?.();
Â  Â  Â  };

Â  Â  Â  return (
Â  Â  Â  Â  <div className="fixed inset-0 z-[100]">
Â  Â  Â  Â  Â  <div className="absolute inset-0 bg-black/50" onClick={onClose} aria-hidden="true"></div>

Â  Â  Â  Â  Â  <div className="absolute inset-x-0 bottom-0">
Â  Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  Â  className="mx-auto w-full max-w-2xl bg-white rounded-t-3xl border border-gray-200 shadow-glass p-4"
Â  Â  Â  Â  Â  Â  Â  style={{ paddingBottom: "calc(var(--safe-b) + 12px)" }}
Â  Â  Â  Â  Â  Â  Â  role="dialog"
Â  Â  Â  Â  Â  Â  Â  aria-modal="true"
Â  Â  Â  Â  Â  Â  Â  onClick={(e)=>e.stopPropagation()}
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">ZamÃ³w</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xl font-extrabold mt-0.5">Wybierz kategoriÄ™</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={onClose}
Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-11 h-11 rounded-2xl border border-gray-200 bg-white shadow-soft grid place-items-center hover:ring-2 hover:ring-brand-yellow/40"
Â  Â  Â  Â  Â  Â  Â  Â  Â  aria-label="Zamknij"
Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="x" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  <div className="mt-4 grid gap-3">
Â  Â  Â  Â  Â  Â  Â  Â  {PRODUCT_CATEGORIES.map((c) => (
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  key={c.id}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => go(c.id)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  className="w-full flex items-center justify-between gap-3 rounded-2xl border border-gray-200 bg-white px-4 py-4 shadow-soft hover:ring-2 hover:ring-brand-yellow/40"
Â  Â  Â  Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="flex items-center gap-3 text-left min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="w-11 h-11 rounded-2xl overflow-hidden border border-gray-200 shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src={c.image} alt={c.name} className="w-full h-full object-cover" loading="lazy" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="min-w-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold">{c.name}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-xs text-gray-600 mt-0.5 line-clamp-2">{c.description}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="chevron-right" className="w-5 h-5 text-gray-400"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };

Â  Â  const TabButton = ({ active, label, icon, onClick, badge }) => (
Â  Â  Â  <button
Â  Â  Â  Â  type="button"
Â  Â  Â  Â  onClick={onClick}
Â  Â  Â  Â  className={`flex flex-col items-center justify-center gap-1 py-2 px-3 rounded-2xl transition min-h-[52px] ${
Â  Â  Â  Â  Â  active ? "bg-brand-yellow/20 ring-1 ring-brand-yellow/30" : "hover:bg-gray-100"
Â  Â  Â  Â  }`}
Â  Â  Â  Â  aria-label={label}
Â  Â  Â  >
Â  Â  Â  Â  <span className="relative">
Â  Â  Â  Â  Â  <i data-lucide={icon} className="w-6 h-6"></i>
Â  Â  Â  Â  Â  {typeof badge === "number" && badge > 0 && (
Â  Â  Â  Â  Â  Â  <span className="absolute -top-2 -right-2 bg-brand-yellow text-gray-900 text-[10px] font-extrabold w-5 h-5 rounded-full grid place-items-center ring-2 ring-white">
Â  Â  Â  Â  Â  Â  Â  {badge > 99 ? "99+" : badge}
Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  )}
Â  Â  Â  Â  </span>
Â  Â  Â  Â  <span className={`text-[11px] font-extrabold ${active ? "text-gray-900" : "text-gray-600"}`}>
Â  Â  Â  Â  Â  {label}
Â  Â  Â  Â  </span>
Â  Â  Â  </button>
Â  Â  );

Â  Â  const BottomTabBar = ({ route, onOpenOrder, onOpenAuth }) => {
Â  Â  Â  const { count } = useCart();
Â  Â  Â  const { user } = useAuth();

Â  Â  Â  useEffect(() => { window.lucide?.createIcons?.(); }, [route, count, user]);

Â  Â  Â  const isHome = !route || route === "#/" || route === "#";
Â  Â  Â  const isCart = route === "#/koszyk";
Â  Â  Â  const isOrder = route?.startsWith("#/kategoria/") || route?.startsWith("#/zamowienie");

Â  Â  Â  return (
Â  Â  Â  Â  <div className="fixed inset-x-0 bottom-0 z-[70]">
Â  Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  Â  className="mx-auto w-full max-w-2xl px-3"
Â  Â  Â  Â  Â  Â  style={{ paddingBottom: "calc(var(--safe-b) + 10px)" }}
Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  <div className="liquid border border-white/60 shadow-glass rounded-3xl px-2 py-2">
Â  Â  Â  Â  Â  Â  Â  <div className="grid grid-cols-4 gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  <TabButton
Â  Â  Â  Â  Â  Â  Â  Â  Â  active={isHome}
Â  Â  Â  Â  Â  Â  Â  Â  Â  label="Start"
Â  Â  Â  Â  Â  Â  Â  Â  Â  icon="home"
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => { window.location.hash = "#/"; }}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <TabButton
Â  Â  Â  Â  Â  Â  Â  Â  Â  active={isOrder}
Â  Â  Â  Â  Â  Â  Â  Â  Â  label="ZamÃ³w"
Â  Â  Â  Â  Â  Â  Â  Â  Â  icon="shopping-bag"
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={onOpenOrder}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <TabButton
Â  Â  Â  Â  Â  Â  Â  Â  Â  active={isCart}
Â  Â  Â  Â  Â  Â  Â  Â  Â  label="Koszyk"
Â  Â  Â  Â  Â  Â  Â  Â  Â  icon="shopping-cart"
Â  Â  Â  Â  Â  Â  Â  Â  Â  badge={count}
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={() => { window.location.hash = "#/koszyk"; }}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  Â  <TabButton
Â  Â  Â  Â  Â  Â  Â  Â  Â  active={false}
Â  Â  Â  Â  Â  Â  Â  Â  Â  label={user ? "Profil" : "Konto"}
Â  Â  Â  Â  Â  Â  Â  Â  Â  icon="user"
Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick={onOpenAuth}
Â  Â  Â  Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };

Â  Â  const FloatingCheckoutCTA = ({ visible }) => {
Â  Â  Â  const { total, count } = useCart();
Â  Â  Â  useEffect(() => { window.lucide?.createIcons?.(); }, [visible, total, count]);
Â  Â  Â  if (!visible) return null;

Â  Â  Â  return (
Â  Â  Â  Â  <div
Â  Â  Â  Â  Â  className="fixed inset-x-0 z-[75] md:hidden"
Â  Â  Â  Â  Â  style={{ bottom: "calc(var(--tabbar-h) + var(--safe-b) + 10px)" }}
Â  Â  Â  Â  >
Â  Â  Â  Â  Â  <div className="mx-auto w-full max-w-2xl px-3">
Â  Â  Â  Â  Â  Â  <button
Â  Â  Â  Â  Â  Â  Â  type="button"
Â  Â  Â  Â  Â  Â  Â  onClick={() => { window.location.hash = "#/koszyk"; }}
Â  Â  Â  Â  Â  Â  Â  className="w-full bg-gray-900 text-white font-extrabold rounded-2xl px-4 py-4 shadow-glass hover:ring-2 hover:ring-brand-yellow/40 flex items-center justify-between gap-3 min-h-[56px]"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  <span className="flex items-center gap-2">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="receipt" className="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Zobacz swoje zamÃ³wienie
Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  <span className="text-sm font-extrabold">
Â  Â  Â  Â  Â  Â  Â  Â  {count} â€¢ {currency(total)}
Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â PWA: SERVICE WORKER REGISTER
Â  Â  ======================= */

Â  Â  const registerSW = async () => {
Â  Â  Â  if (!("serviceWorker" in navigator)) return;
Â  Â  Â  try {
Â  Â  Â  Â  const reg = await navigator.serviceWorker.register("/sw.js", { scope: "/" });
Â  Â  Â  Â  reg.addEventListener("updatefound", () => {
Â  Â  Â  Â  Â  const sw = reg.installing;
Â  Â  Â  Â  Â  if (!sw) return;
Â  Â  Â  Â  Â  sw.addEventListener("statechange", () => {
Â  Â  Â  Â  Â  Â  if (sw.state === "installed" && navigator.serviceWorker.controller) {
Â  Â  Â  Â  Â  Â  Â  console.log("SW updated. Refresh page to get latest version.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  console.log("SW register failed:", e);
Â  Â  Â  }
Â  Â  };

Â  Â  /* =======================
Â  Â  Â  Â APP
Â  Â  ======================= */

Â  Â  const App = () => {
Â  Â  Â  const [authOpen, setAuthOpen] = useState(false);
Â  Â  Â  const [authInitialStep, setAuthInitialStep] = useState("login");
Â  Â  Â  const [orderOpen, setOrderOpen] = useState(false);

Â  Â  Â  const [route, setRoute] = useState(window.location.hash || "#/");
Â  Â  Â  const isMobile = useIsMobile(768);

Â  Â  Â  useEffect(() => {
Â  Â  Â  Â  const onHash = () => setRoute(window.location.hash || "#/");
Â  Â  Â  Â  window.addEventListener("hashchange", onHash);
Â  Â  Â  Â  return () => window.removeEventListener("hashchange", onHash);
Â  Â  Â  }, []);

Â  Â  Â  const { count } = useCart();
Â  Â  Â  const { user, loading } = useAuth();
Â  Â  Â  const { activeOrder } = useActiveOrder();

Â  Â  Â  useEffect(() => { window.lucide?.createIcons?.(); }, [authOpen, orderOpen, route, count, user, loading, activeOrder]);
Â  Â  Â  useEffect(() => { registerSW(); }, []);

Â  Â  Â  const showCTA =
Â  Â  Â  Â  isMobile &&
Â  Â  Â  Â  count > 0 &&
Â  Â  Â  Â  route !== "#/koszyk" &&
Â  Â  Â  Â  !route.startsWith("#/zamowienie");

Â  Â  Â  return (
Â  Â  Â  Â  <div className="min-h-screen no-overscroll">
Â  Â  Â  Â  Â  <TopInfoBar />
Â  Â  Â  Â  Â  <Header onOpenAuth={() => { setAuthInitialStep("login"); setAuthOpen(true); }} />

Â  Â  Â  Â  Â  <main className={`app-content-pad ${showCTA ? "has-cta" : ""} ${activeOrder ? "has-tracker" : ""}`}>
Â  Â  Â  Â  Â  Â  <Router />

Â  Â  Â  Â  Â  Â  {/*âœ… FOOTER Z DANYMI PRZEDSIÄ˜BIORCY */}
Â  Â  Â  Â  Â  Â  <footer className="py-12 text-sm text-gray-600 border-t border-gray-200">
Â  Â  Â  Â  Â  Â  Â  <div className="max-w-6xl mx-auto px-4">
Â  Â  Â  Â  Â  Â  Â  Â  <div className="text-center">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div className="font-extrabold text-gray-900 mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Dane przedsiÄ™biorcy
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul className="space-y-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><span className="font-semibold">ImiÄ™:</span> Marcin</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><span className="font-semibold">Nazwisko:</span> Chojnacki</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><span className="font-semibold">NIP:</span> 8271982077</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li><span className="font-semibold">REGON:</span> 100473965</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span className="font-semibold">Firma przedsiÄ™biorcy:</span>{" "}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  MARCIN CHOJNACKI MILKSHAKE BAR
Â  Â  Â  Â  Â  Â  </li>
Â  Â  Â  Â  Â  </ul>
Â  Â Â 
Â  Â  Â  Â  Â  <div className="mt-4">
Â  Â  Â  Â  Â  Â  <div className="font-semibold text-gray-700">
Â  Â  Â  Â  Â  Â  Â  Adres prowadzenia dziaÅ‚alnoÅ›ci:
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div className="text-gray-600">
Â  Â  Â  Â  Â  Â  Â  ul. SzczeciÅ„ska 17, 76-200 SÅ‚upsk, pow. SÅ‚upsk, gm. SÅ‚upsk,
Â  Â  Â  Â  Â  Â  Â  woj. POMORSKIE, Polska
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â Â 
Â  Â  Â  Â  Â  <div className="mt-6 font-semibold text-gray-700">
Â  Â  Â  Â  Â  Â  Â© {new Date().getFullYear()} eatmi.pl â€¢ Wszystkie prawa zastrzeÅ¼one
Â  Â  Â  Â  Â  </div>
Â  Â Â 
Â  Â  Â  Â  Â  <div className="mt-4 flex flex-wrap items-center justify-center gap-3 text-sm">
Â  Â  Â  Â  Â  Â  <a
Â  Â  Â  Â  Â  Â  Â  href="/rule.html"
Â  Â  Â  Â  Â  Â  Â  target="_blank"
Â  Â  Â  Â  Â  Â  Â  rel="noopener noreferrer"
Â  Â  Â  Â  Â  Â  Â  className="font-semibold text-gray-700 hover:text-gray-900 underline underline-offset-4"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Regulamin
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  <span className="text-gray-300">â€¢</span>
Â  Â  Â  Â  Â  Â  <a
Â  Â  Â  Â  Â  Â  Â  href="/rule.html"
Â  Â  Â  Â  Â  Â  Â  target="_blank"
Â  Â  Â  Â  Â  Â  Â  rel="noopener noreferrer"
Â  Â  Â  Â  Â  Â  Â  className="font-semibold text-gray-700 hover:text-gray-900 underline underline-offset-4"
Â  Â  Â  Â  Â  Â  >
Â  Â  Â  Â  Â  Â  Â  Polityka prywatnoÅ›ci
Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </footer>

Â  Â  Â  Â  Â  </main>

Â  Â  Â  Â  Â  <AuthModal
Â  Â  Â  Â  Â  Â  open={authOpen}
Â  Â  Â  Â  Â  Â  onClose={() => setAuthOpen(false)}
Â  Â  Â  Â  Â  Â  initialStep={authInitialStep}
Â  Â  Â  Â  Â  />

Â  Â  Â  Â  Â  <CategorySheet open={orderOpen} onClose={() => setOrderOpen(false)} />

Â  Â  Â  Â  Â  <FloatingCheckoutCTA visible={showCTA} />
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <OrderTrackerWidget />

Â  Â  Â  Â  Â  <BottomTabBar
Â  Â  Â  Â  Â  Â  route={route}
Â  Â  Â  Â  Â  Â  onOpenOrder={() => setOrderOpen(true)}
Â  Â  Â  Â  Â  Â  onOpenAuth={() => { setAuthInitialStep("login"); setAuthOpen(true); }}
Â  Â  Â  Â  Â  />
Â  Â  Â  Â  </div>
Â  Â  Â  );
Â  Â  };

Â  Â  ReactDOM.createRoot(document.getElementById('root')).render(
Â  Â  Â  <ToastProvider>
Â  Â  Â  Â  <AuthProvider>
Â  Â  Â  Â  Â  <ActiveOrderProvider>
Â  Â  Â  Â  Â  Â  <CartProvider>
Â  Â  Â  Â  Â  Â  Â  <App />
Â  Â  Â  Â  Â  Â  </CartProvider>
Â  Â  Â  Â  Â  </ActiveOrderProvider>
Â  Â  Â  Â  </AuthProvider>
Â  Â  Â  </ToastProvider>
Â  Â  );
Â  </script>
</body>
</html>
