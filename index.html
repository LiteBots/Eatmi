<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>eatmi.pl ‚Äî Zam√≥w online</title>
  <meta name="description" content="eatmi.pl ‚Äî Boxy ≈õniadaniowe, lunche, kanapki, zdrowe, s≈Çodkie i napoje." />
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="manifest" href="/manifest.webmanifest">

  <!-- Tailwind config BEFORE tailwindcdn -->
  <script>
    tailwind = window.tailwind || {};
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              yellow: '#FFC107',  // g≈Ç√≥wny akcent
              yellow2: '#FFB300', // hover/ciemniejszy
              ink: '#0F172A',     // tekst
              muted: '#475569',   // opisy
              line: '#E2E8F0',    // border
              bg: '#FFFFFF'
            }
          },
          borderRadius: { xl2: '1.25rem' }
        }
      }
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 + ReactDOM 18 -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Babel for inline JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root{
      --y: #FFC107;
      --y2:#FFB300;
      --ink:#0F172A;
      --line:#E2E8F0;
      --muted:#475569;
    }
    html, body { background: #fff; }
    /* Flat: zero heavy shadows, tylko delikatna separacja */
    .flat-card { border: 1px solid var(--line); background: #fff; }
    .flat-card:hover { border-color: rgba(255,193,7,.65); }
    .focus-yellow:focus { outline: none; box-shadow: 0 0 0 3px rgba(255,193,7,.28); border-color: rgba(255,193,7,.75); }
    .btn-yellow { background: var(--y); color: #111827; }
    .btn-yellow:hover { background: var(--y2); }
    .btn-outline:hover { border-color: rgba(255,193,7,.8); }
    .link-yellow { color: #B45309; }
    .link-yellow:hover { color: #92400E; }
    /* ≈º√≥≈Çte podkre≈õlenie nag≈Ç√≥wk√≥w */
    .underline-yellow{
      background-image: linear-gradient(to right, rgba(255,193,7,.55), rgba(255,193,7,.55));
      background-size: 100% 0.35em;
      background-repeat: no-repeat;
      background-position: 0 88%;
    }
    /* ma≈Çe ‚Äúpill‚Äù ≈º√≥≈Çte */
    .pill-yellow{
      background: rgba(255,193,7,.18);
      border: 1px solid rgba(255,193,7,.55);
      color: #111827;
    }
    /* toast */
    .toast-in { animation: toastIn .16s ease-out; }
    @keyframes toastIn { from { transform: translateY(8px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
  </style>
</head>

<body class="text-brand-ink">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    /* =======================
       MENU
    ======================= */

    const PRODUCT_CATEGORIES = [
      { id: 'boxy-sniadaniowe', name: 'Boxy ≈õniadaniowe', icon: 'package-open', description: 'Ma≈Çe, ≈õrednie i du≈ºe zestawy. Tak≈ºe VEGE.' },
      { id: 'lunche', name: 'Lunche', icon: 'utensils-crossed', description: 'Lunch tygodnia, miesiƒÖca i vege (12:00‚Äì16:00).' },
      { id: 'kanapki', name: 'Kanapki', icon: 'sandwich', description: 'Kanapki i buritto na ma≈õlanym pieczywie.' },
      { id: 'zdrowe', name: 'Zdrowe', icon: 'leaf', description: 'Granola i sa≈Çatki w wersjach fit.' },
      { id: 'slodkie', name: 'S≈Çodkie', icon: 'ice-cream', description: 'Desery, pancakes, tost francuski i smoothie.' },
      { id: 'napoje', name: 'Napoje', icon: 'cup-soda', description: 'Kawy, herbaty, lemoniada i sok.' },
    ];

    const BREAKFAST_BOXES = [
      { id:'bs-small-1', name:'Box ≈õniadaniowy ma≈Çy nr 1', price: 38, subtitle:'Kanapka z jajecznicƒÖ i bekonem, majonez sriracha ‚Ä¢ Domowa granola z jogurtem greckim, owocami i miodem ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-small-2', name:'Box ≈õniadaniowy ma≈Çy nr 2', price: 40, subtitle:'Buritto z jajecznicƒÖ i chorizo ‚Ä¢ Sa≈Çatka korea≈Ñska z kurczakiem w panko, warzywami i sezamem ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-small-3', name:'Box ≈õniadaniowy ma≈Çy nr 3', price: 42, subtitle:'Kanapka z rostbefem, jajkiem poche, sosem musztardowo-chrzanowym i oliwƒÖ truflowƒÖ ‚Ä¢ Sa≈Çatka Cezar z kurczakiem, bekonem, sa≈ÇatƒÖ rzymskƒÖ i grzankami ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-small-vege', name:'Box ≈õniadaniowy ma≈Çy VEGE', price: 38, subtitle:'Kanapka z jajecznicƒÖ i awokado, majonez sriracha ‚Ä¢ Sa≈Çatka z carpaccio z buraka z kozim serem i orzechami pekan, mix sa≈Çat, pomara≈Ñczowy dressing z oliwƒÖ ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },

      { id:'bs-med-1', name:'Box ≈õniadaniowy ≈õredni nr 1', price: 52, subtitle:'Kanapka z jajecznicƒÖ i bekonem, majonez sriracha ‚Ä¢ Domowa granola z jogurtem greckim, owocami i miodem ‚Ä¢ Tost francuski z owocami i miodem ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-med-2', name:'Box ≈õniadaniowy ≈õredni nr 2', price: 54, subtitle:'Buritto z jajecznicƒÖ i chorizo ‚Ä¢ Sa≈Çatka korea≈Ñska z kurczakiem w panko, warzywami i sezamem ‚Ä¢ Pancakes (2 szt.) z NutellƒÖ i owocami ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-med-3', name:'Box ≈õniadaniowy ≈õredni nr 3', price: 56, subtitle:'Kanapka z rostbefem, jajkiem poche, sosem musztardowo-chrzanowym i oliwƒÖ truflowƒÖ ‚Ä¢ Sa≈Çatka Cezar z kurczakiem, bekonem, sa≈ÇatƒÖ rzymskƒÖ i grzankami ‚Ä¢ Deser czekoladowy z owocami i kruszonkƒÖ ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-med-vege', name:'Box ≈õniadaniowy ≈õredni VEGE', price: 52, subtitle:'Kanapka z jajecznicƒÖ i awokado, majonez sriracha ‚Ä¢ Sa≈Çatka z carpaccio z buraka z kozim serem i orzechami pekan, mix sa≈Çat, pomara≈Ñczowy dressing z oliwƒÖ ‚Ä¢ Smoothie Mango Lassi z miodem ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },

      { id:'bs-big-1', name:'Box ≈õniadaniowy du≈ºy nr 1', price: 80, subtitle:'Kanapka z jajecznicƒÖ i bekonem, majonez sriracha ‚Ä¢ Club sandwich z kurczakiem i bekonem, majonez, sa≈Çata, pomidor ‚Ä¢ Domowa granola z jogurtem greckim, owocami i miodem ‚Ä¢ Sa≈Çatka Cezar z kurczakiem, bekonem, sa≈ÇatƒÖ rzymskƒÖ i grzankami ‚Ä¢ Tost francuski z owocami i miodem ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-big-2', name:'Box ≈õniadaniowy du≈ºy nr 2', price: 82, subtitle:'Buritto z jajecznicƒÖ i chorizo ‚Ä¢ Kanapka z jajecznicƒÖ i bekonem, majonez sriracha ‚Ä¢ Sa≈Çatka korea≈Ñska z kurczakiem w panko, warzywa i sezamem ‚Ä¢ Domowa granola z jogurtem greckim, owocami i miodem ‚Ä¢ Pancakes (2 szt.) z NutellƒÖ i owocami ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-big-3', name:'Box ≈õniadaniowy du≈ºy nr 3', price: 84, subtitle:'Kanapka z rostbefem, jajkiem poche, sosem musztardowo-chrzanowym i oliwƒÖ truflowƒÖ ‚Ä¢ Kanapka z jajecznicƒÖ i bekonem, majonez sriracha ‚Ä¢ Sa≈Çatka Cezar z kurczakiem, bekonem, sa≈ÇatƒÖ rzymskƒÖ i grzankami ‚Ä¢ Domowa granola z jogurtem greckim, owocami i miodem ‚Ä¢ Deser czekoladowy z owocami i kruszonkƒÖ ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
      { id:'bs-big-vege', name:'Box ≈õniadaniowy du≈ºy VEGE', price: 80, subtitle:'Kanapka z jajecznicƒÖ i awokado, majonez sriracha ‚Ä¢ Vege club sandwich z camembert i awokado, majonez, sa≈Çata, pomidor ‚Ä¢ Sa≈Çatka z carpaccio z buraka z kozim serem i orzechami pekan, mix sa≈Çat, pomara≈Ñczowy dressing z oliwƒÖ ‚Ä¢ Domowa granola z jogurtem greckim, owocami i miodem ‚Ä¢ Smoothie Mango Lassi z miodem ‚Ä¢ Sok pomara≈Ñczowy 250 ml' },
    ];

    const LUNCHES = [
      { id:'lunch-week', name:'Lunch tygodnia', price: 49, subtitle:'Dostƒôpny 12:00‚Äì16:00 ‚Ä¢ Zupa krem z pieczonych burak√≥w 200 ml ‚Ä¢ Corn Flake Chicken: panierowana w p≈Çatkach kukurydzianych pier≈õ z kurczaka z ziemniaczanym puree i coleslawem ‚Ä¢ Domowa lemoniada 250 ml' },
      { id:'lunch-month', name:'Lunch miesiƒÖca', price: 59, subtitle:'Dostƒôpny 12:00‚Äì16:00 ‚Ä¢ Zupa krem z pieczonych burak√≥w 200 ml ‚Ä¢ Kurczak Supreme: pieczona pier≈õ z kurczaka z ziemniaczanym puree, warzywami i sosem demi glace ‚Ä¢ Domowa lemoniada 250 ml' },
      { id:'lunch-vege', name:'Lunch VEGE', price: 49, subtitle:'Dostƒôpny 12:00‚Äì16:00 ‚Ä¢ Zupa krem z pieczonych burak√≥w 200 ml ‚Ä¢ Tagliatelle z warzywami, oliwƒÖ z oliwek i pastƒÖ truflowƒÖ ‚Ä¢ Domowa lemoniada 250 ml' },
    ];

    const SANDWICHES = [
      { id:'k-jajecznica-bekon', name:'Ma≈õlane pieczywo z jajecznicƒÖ, bekonem i majonezem sriracha', price: 17 },
      { id:'k-club-kurczak', name:'Club sandwich z grillowanym kurczakiem, chrupiƒÖcy bekon, majonez, sa≈Çata i pomidor', price: 17 },
      { id:'k-club-vege', name:'Vege club sandwich z camembert, palonym awokado, majonezem, sa≈ÇatƒÖ i pomidorem', price: 17 },
      { id:'k-jajecznica-avo', name:'Ma≈õlane pieczywo z jajecznicƒÖ, awokado i majonezem sriracha', price: 17 },
      { id:'k-buritto-chorizo', name:'Buritto z jajecznicƒÖ z mozzarellƒÖ, chorizo i majonezem sriracha', price: 19 },
      { id:'k-rostbef', name:'Ma≈õlane pieczywo z rostbefem, jajkiem poche, rukolƒÖ, sosem musztardowo-chrzanowym i oliwƒÖ truflowƒÖ', price: 21 },
    ];

    const HEALTHY = [
      { id:'z-granola', name:'Domowa granola z jogurtem greckim, owoce i mi√≥d', price: 19 },
      { id:'z-cezar', name:'Sa≈Çatka Cezar z kurczakiem, bekonem, sa≈ÇatƒÖ rzymskƒÖ, parmezanem i grzankami', price: 19 },
      { id:'z-koreanska', name:'Sa≈Çatka korea≈Ñska z kurczakiem w panko, warzywa i sezam, s≈Çodki sos sojowy', price: 19 },
      { id:'z-burak', name:'Sa≈Çatka z carpaccio z buraka i serem kozim, karmelizowane orzechy pekan, mix sa≈Çat i pomara≈Ñczowy dressing', price: 19 },
    ];

    const SWEETS = [
      { id:'s-smoothie', name:'Smoothie Mango Lassi (mango, jogurt grecki, mi√≥d)', price: 19 },
      { id:'s-tost-fr', name:'Tost francuski z owocami i miodem', price: 19 },
      { id:'s-pancakes', name:'Pancakes (2 szt.) z NutellƒÖ i owocami', price: 19 },
      { id:'s-deser-czeko', name:'Deser czekoladowy z owocami i kruszonkƒÖ', price: 19 },
    ];

    const DRINKS = [
      { id:'n-lemoniada', name:'Domowa lemoniada 250 ml', price: 12 },
      { id:'n-sok-pom', name:'Sok pomara≈Ñczowy 250 ml', price: 12 },
      { id:'n-kawa-filt-cz', name:'Kawa filtrowana czarna 300 ml', price: 10 },
      { id:'n-kawa-filt-b', name:'Kawa filtrowana bia≈Ça 300 ml', price: 10 },
      { id:'n-espresso-double', name:'Kawa czarna (podw√≥jne espresso) 300 ml', price: 11 },
      { id:'n-flat-white', name:'Kawa Flat White (podw√≥jne espresso) 300 ml', price: 11 },
      { id:'n-latte', name:'Latte (podw√≥jne espresso) 300 ml', price: 12 },
      { id:'n-cappu', name:'Cappuccino (podw√≥jne espresso) 300 ml', price: 11 },
      { id:'n-matcha', name:'Matcha 300 ml', price: 18 },
      { id:'n-herbata-cz', name:'Herbata czarna z cytrynƒÖ 300 ml', price: 9 },
      { id:'n-zimowa', name:'Zimowa herbata z miodem, cytrusami, go≈∫dzikami i sokiem malinowym 300 ml', price: 15 },
    ];

    const PRODUCTS = {
      'boxy-sniadaniowe': BREAKFAST_BOXES,
      'lunche': LUNCHES,
      'kanapki': SANDWICHES,
      'zdrowe': HEALTHY,
      'slodkie': SWEETS,
      'napoje': DRINKS,
    };

    /* =======================
       STATE / HELPERS
    ======================= */

    const useLocalStorage = (key, initial) => {
      const [state, setState] = useState(() => {
        try { return JSON.parse(localStorage.getItem(key)) ?? initial } catch { return initial }
      });
      useEffect(() => { localStorage.setItem(key, JSON.stringify(state)) }, [key, state]);
      return [state, setState];
    };

    const currency = (n) =>
      new Intl.NumberFormat('pl-PL', { style:'currency', currency:'PLN' }).format(n);

    const ToastContext = React.createContext();
    const useToast = () => React.useContext(ToastContext);

    const ToastProvider = ({children}) => {
      const [toast, setToast] = useState(null);
      const tRef = React.useRef(null);

      const show = (message) => {
        setToast(message);
        if (tRef.current) clearTimeout(tRef.current);
        tRef.current = setTimeout(() => setToast(null), 2300);
      };

      return (
        <ToastContext.Provider value={{ show }}>
          {children}
          {toast && (
            <div className="fixed bottom-24 left-1/2 -translate-x-1/2 z-[80]">
              <div className="toast-in flat-card rounded-2xl px-4 py-3 min-w-[280px] max-w-[90vw] flex items-start gap-3">
                <div className="w-9 h-9 rounded-full flex items-center justify-center font-extrabold"
                     style={{background:"rgba(255,193,7,.22)", border:"1px solid rgba(255,193,7,.55)"}}>
                  ‚úì
                </div>
                <div className="flex-1">
                  <div className="text-[10px] font-extrabold uppercase tracking-[0.14em] text-brand-muted">
                    Dodano do koszyka
                  </div>
                  <div className="text-sm font-semibold mt-0.5">{toast}</div>
                </div>
              </div>
            </div>
          )}
        </ToastContext.Provider>
      );
    };

    const Logo = () => (
      <a href="#/" className="flex items-center gap-3">
        <div className="w-10 h-10 rounded-2xl grid place-items-center"
             style={{background:"rgba(255,193,7,.18)", border:"1px solid rgba(255,193,7,.55)"}}>
          <img
            src="https://i.imgur.com/f9TN0Gh.png"
            alt="eatmi.pl ‚Äî logo"
            loading="lazy"
            className="w-9 h-9 object-contain"
          />
        </div>
        <span className="font-extrabold tracking-tight text-brand-ink">
          eatmi<span className="text-brand-yellow">.pl</span>
        </span>
      </a>
    );

    const CartContext = React.createContext();

    const CartProvider = ({children}) => {
      const [cart, setCart] = useLocalStorage('eatmi-cart', []);
      const toast = useToast();
      const show = toast?.show;

      const add = (entry) => {
        const newItem = {
          id: (crypto?.randomUUID ? crypto.randomUUID() : `${Date.now()}-${Math.random()}`),
          qty: 1,
          ...entry
        };
        setCart(prev => [...prev, newItem]);
        if (show) show(`Dodano: ${entry.name}`);
      };

      const remove  = (id) => setCart(prev => prev.filter(i => i.id !== id));
      const setQty  = (id, qty) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: Math.max(1, qty|0)} : i));
      const incQty  = (id) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: (i.qty||1)+1} : i));
      const decQty  = (id) => setCart(prev => prev.map(i => i.id === id ? {...i, qty: Math.max(1, (i.qty||1)-1)} : i));
      const clear   = () => setCart([]);

      const lineTotal = (i) => (i.price || 0) * (i.qty || 1);
      const total  = useMemo(() => cart.reduce((s,i)=> s + lineTotal(i), 0), [cart]);

      return (
        <CartContext.Provider value={{cart, add, remove, setQty, incQty, decQty, clear, lineTotal, total}}>
          {children}
        </CartContext.Provider>
      );
    };

    const useCart = () => React.useContext(CartContext);

    const CartButton = () => {
      const { cart, total } = useCart();
      const count = cart.reduce((s,i)=>s+(i.qty||1),0);

      return (
        <a href="#/koszyk"
           className="inline-flex items-center gap-2 rounded-xl px-3 py-2 flat-card btn-outline"
           style={{borderColor:"rgba(255,193,7,.45)"}}>
          <i data-lucide="shopping-cart" className="w-5 h-5 text-brand-ink"></i>
          <span className="text-sm font-extrabold">{currency(total)}</span>
          <span className="ml-1 text-xs font-extrabold px-2 py-1 rounded-full pill-yellow">
            {count}
          </span>
        </a>
      );
    };

    const Header = ({ onOpenAuth }) => (
      <header className="sticky top-0 z-40 bg-white border-b border-brand-line">
        <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
          <Logo />

          <nav className="hidden md:flex items-center gap-6 text-sm font-semibold">
            <a href="#kategorie" className="link-yellow">Menu</a>
            <a href="#/kategoria/boxy-sniadaniowe" className="text-brand-ink hover:text-amber-700">Boxy</a>
            <a href="#/kategoria/lunche" className="text-brand-ink hover:text-amber-700">Lunche</a>
            <a href="#/kategoria/kanapki" className="text-brand-ink hover:text-amber-700">Kanapki</a>
            <a href="#/kategoria/napoje" className="text-brand-ink hover:text-amber-700">Napoje</a>
          </nav>

          <div className="flex items-center gap-3">
            <button
              type="button"
              onClick={onOpenAuth}
              className="hidden md:inline-flex items-center gap-2 rounded-xl px-4 py-2 flat-card btn-outline font-extrabold"
              style={{borderColor:"rgba(255,193,7,.45)"}}
            >
              <i data-lucide="user" className="w-4 h-4"></i>
              <span>Konto</span>
            </button>

            <button
              type="button"
              onClick={onOpenAuth}
              className="md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl flat-card"
              style={{borderColor:"rgba(255,193,7,.45)"}}
              aria-label="Moje konto"
            >
              <i data-lucide="user" className="w-5 h-5"></i>
            </button>

            <CartButton />
          </div>
        </div>
      </header>
    );

    const Stat = ({icon, title, desc}) => (
      <div className="rounded-2xl flat-card p-4">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 rounded-xl grid place-items-center"
               style={{background:"rgba(255,193,7,.18)", border:"1px solid rgba(255,193,7,.55)"}}>
            <i data-lucide={icon} className="w-5 h-5 text-brand-ink"></i>
          </div>
          <div>
            <div className="font-extrabold">{title}</div>
            <div className="text-xs text-brand-muted font-semibold">{desc}</div>
          </div>
        </div>
      </div>
    );

    const Hero = () => (
      <section className="py-10 md:py-14">
        <div className="max-w-6xl mx-auto px-4">
          <div className="rounded-3xl flat-card p-6 md:p-10">
            <div className="flex flex-col md:flex-row md:items-center gap-8">
              <div className="flex-1">
                <div className="inline-flex items-center gap-2 px-3 py-2 rounded-full pill-yellow font-extrabold text-sm">
                  <span>üëã</span>
                  <span>Witaj w eatmi</span>
                  <span className="px-2 py-1 rounded-full bg-brand-yellow text-brand-ink font-extrabold text-[11px]">
                    zam√≥w online
                  </span>
                </div>

                <h1 className="mt-4 text-3xl md:text-5xl font-extrabold leading-tight">
                  Wybierz kategoriƒô i{" "}
                  <span className="underline-yellow">zam√≥w w kilka klikniƒôƒá</span>
                </h1>

                <p className="mt-4 text-brand-muted font-medium max-w-prose">
                  Minimalnie, czytelnie, szybko. ≈ª√≥≈Çty prowadzi u≈ºytkownika do akcji ‚Äî
                  reszta jest czysta i flat.
                </p>

                <div className="mt-6 flex flex-wrap gap-3">
                  <a href="#kategorie"
                     className="btn-yellow inline-flex items-center gap-2 px-5 py-3 rounded-xl font-extrabold">
                    <i data-lucide="shopping-bag" className="w-5 h-5"></i>
                    PrzeglƒÖdaj menu
                  </a>
                  <a href="#/kategoria/boxy-sniadaniowe"
                     className="inline-flex items-center gap-2 px-5 py-3 rounded-xl font-extrabold flat-card btn-outline"
                     style={{borderColor:"rgba(255,193,7,.45)"}}>
                    <i data-lucide="package-open" className="w-5 h-5 text-amber-700"></i>
                    Zobacz boxy
                  </a>
                </div>

                <div className="mt-6 flex flex-wrap gap-2">
                  {["Boxy", "Lunch 12‚Äì16", "VEGE", "Szybkie dodawanie"].map((t, i) => (
                    <span key={i} className="text-xs font-extrabold px-3 py-1.5 rounded-full pill-yellow">
                      {t}
                    </span>
                  ))}
                </div>
              </div>

              <div className="w-full md:w-[360px] space-y-3">
                <Stat icon="zap" title="Szybko" desc="Dodajesz i lecisz do checkoutu" />
                <Stat icon="credit-card" title="PayU" desc="Redirect z /api/payu/order" />
                <Stat icon="layout-grid" title="Flat UI" desc="Bia≈Çe t≈Ço + ≈º√≥≈Çte akcenty" />
              </div>
            </div>
          </div>
        </div>
      </section>
    );

    const SectionTitle = ({eyebrow, title, subtitle}) => (
      <div className="max-w-2xl">
        {eyebrow && (
          <div className="inline-flex items-center gap-2 text-xs uppercase tracking-widest font-extrabold text-brand-muted">
            <span className="w-2 h-2 rounded-full bg-brand-yellow"></span>
            {eyebrow}
          </div>
        )}
        <h2 className="mt-2 text-2xl md:text-3xl font-extrabold">
          <span className="underline-yellow">{title}</span>
        </h2>
        {subtitle && <p className="mt-2 text-brand-muted font-medium">{subtitle}</p>}
      </div>
    );

    const CategoryCard = ({ category }) => {
      const go = () => { window.location.hash = `#/kategoria/${category.id}`; };
      return (
        <button type="button" onClick={go}
          className="flat-card rounded-2xl p-5 text-left w-full transition-colors"
        >
          <div className="flex items-start justify-between gap-3">
            <div>
              <div className="text-xs font-extrabold text-brand-muted uppercase tracking-widest">
                Kategoria
              </div>
              <div className="mt-1 text-lg font-extrabold">{category.name}</div>
            </div>
            <div className="w-11 h-11 rounded-xl grid place-items-center"
                 style={{background:"rgba(255,193,7,.18)", border:"1px solid rgba(255,193,7,.55)"}}>
              <i data-lucide={category.icon} className="w-6 h-6 text-brand-ink"></i>
            </div>
          </div>

          <div className="mt-3 text-sm text-brand-muted font-medium">
            {category.description}
          </div>

          <div className="mt-4 inline-flex items-center gap-2 text-sm font-extrabold link-yellow">
            Otw√≥rz <i data-lucide="arrow-right" className="w-4 h-4"></i>
          </div>
        </button>
      );
    };

    const splitSubtitle = (text='') =>
      text.split('‚Ä¢').map(s => s.trim()).filter(Boolean);

    const getBadges = (categoryId, name) => {
      const badges = [];
      const upper = (name||'').toUpperCase();
      if (categoryId === 'boxy-sniadaniowe') badges.push('BOX');
      if (categoryId === 'lunche') badges.push('LUNCH 12‚Äì16');
      if (upper.includes('VEGE')) badges.push('VEGE');
      return badges;
    };

    const ProductCard = ({ item, categoryId, onAdd }) => {
      const bullets = splitSubtitle(item.subtitle || '');
      const badges = getBadges(categoryId, item.name);

      return (
        <div className="flat-card rounded-2xl p-5">
          <div className="flex items-start justify-between gap-3">
            <div className="min-w-0">
              <div className="text-lg font-extrabold leading-snug">{item.name}</div>
              {badges.length > 0 && (
                <div className="mt-2 flex flex-wrap gap-2">
                  {badges.map((b,i)=>(
                    <span key={i} className="text-[10px] font-extrabold uppercase tracking-widest px-2 py-1 rounded-full pill-yellow">
                      {b}
                    </span>
                  ))}
                </div>
              )}
            </div>

            <div className="text-right">
              <div className="text-xs font-extrabold text-brand-muted uppercase tracking-widest">Cena</div>
              <div className="mt-1 inline-flex items-center gap-2">
                <span className="px-3 py-1 rounded-xl font-extrabold"
                      style={{background:"rgba(255,193,7,.18)", border:"1px solid rgba(255,193,7,.55)"}}>
                  {currency(item.price)}
                </span>
              </div>
            </div>
          </div>

          {bullets.length > 0 && (
            <ul className="mt-4 space-y-2 text-sm text-brand-muted font-medium">
              {bullets.map((b, idx) => (
                <li key={idx} className="flex gap-2">
                  <span className="mt-[7px] w-2 h-2 rounded-full bg-brand-yellow shrink-0"></span>
                  <span>{b}</span>
                </li>
              ))}
            </ul>
          )}

          <div className="mt-5 flex items-center justify-between gap-3">
            <button
              type="button"
              onClick={() => onAdd(item)}
              className="btn-yellow inline-flex items-center gap-2 px-4 py-2.5 rounded-xl font-extrabold"
            >
              <i data-lucide="plus" className="w-4 h-4"></i> Dodaj
            </button>

            <a href="#/koszyk" className="text-sm font-extrabold link-yellow">
              Zobacz koszyk ‚Üí
            </a>
          </div>
        </div>
      );
    };

    const CategoryPage = ({ categoryId }) => {
      const { add } = useCart();
      const category = PRODUCT_CATEGORIES.find(c => c.id === categoryId);
      const items = PRODUCTS[categoryId] || [];

      if (!category) {
        return (
          <section className="py-10">
            <div className="max-w-6xl mx-auto px-4">
              <a href="#/" className="inline-flex items-center gap-2 text-sm font-extrabold link-yellow">
                <i data-lucide="arrow-left" className="w-4 h-4"></i> Wr√≥ƒá
              </a>
              <h2 className="text-2xl font-extrabold mt-3">Kategoria nie istnieje</h2>
              <p className="mt-2 text-brand-muted font-medium">Wr√≥ƒá do menu i wybierz kategoriƒô.</p>
            </div>
          </section>
        );
      }

      const handleAdd = (item) => add({
        type: 'product',
        productId: item.id,
        name: item.name,
        price: item.price
      });

      return (
        <section className="py-8 md:py-10">
          <div className="max-w-6xl mx-auto px-4">
            <div className="flex items-center justify-between gap-3">
              <a href="#/" className="inline-flex items-center gap-2 text-sm font-extrabold link-yellow">
                <i data-lucide="arrow-left" className="w-4 h-4"></i> Wr√≥ƒá do menu
              </a>
              <span className="text-xs font-extrabold px-3 py-1 rounded-full pill-yellow">
                {items.length} pozycji
              </span>
            </div>

            <div className="mt-5 rounded-2xl flat-card p-5">
              <div className="flex items-center gap-3">
                <div className="w-11 h-11 rounded-xl grid place-items-center"
                     style={{background:"rgba(255,193,7,.18)", border:"1px solid rgba(255,193,7,.55)"}}>
                  <i data-lucide={category.icon} className="w-6 h-6"></i>
                </div>
                <div>
                  <h2 className="text-2xl md:text-3xl font-extrabold">
                    <span className="underline-yellow">{category.name}</span>
                  </h2>
                  <p className="text-sm text-brand-muted font-medium mt-1">{category.description}</p>
                </div>
              </div>
            </div>

            <div className="mt-6 grid sm:grid-cols-2 xl:grid-cols-3 gap-5">
              {items.map(item => (
                <ProductCard
                  key={item.id}
                  item={item}
                  categoryId={categoryId}
                  onAdd={handleAdd}
                />
              ))}
            </div>
          </div>
        </section>
      );
    };

    const EXTRA_ITEMS = [
      { id:'extra-granola', name:'Domowa granola', price: 19 },
      { id:'extra-lemoniada',name:'Domowa lemoniada', price: 12 },
      { id:'extra-deser', name:'Deser czekoladowy', price: 19 },
    ];

    const Koszyk = () => {
      const { cart, remove, clear, total, incQty, decQty, setQty, lineTotal, add } = useCart();
      const goToCheckout = () => window.location.hash = '#/zamowienie';

      return (
        <section className="py-10">
          <div className="max-w-6xl mx-auto px-4">
            <div className="flex items-center justify-between gap-3">
              <a href="#/" className="inline-flex items-center gap-2 text-sm font-extrabold link-yellow">
                <i data-lucide="arrow-left" className="w-4 h-4"></i> Wr√≥ƒá
              </a>
              <span className="text-xs font-extrabold px-3 py-1 rounded-full pill-yellow">
                {cart.reduce((s,i)=>s+(i.qty||1),0)} szt.
              </span>
            </div>

            <h2 className="mt-4 text-2xl font-extrabold">
              <span className="underline-yellow">Koszyk</span>
            </h2>

            {cart.length === 0 ? (
              <div className="mt-4 rounded-2xl flat-card p-6">
                <p className="text-brand-muted font-medium">Tw√≥j koszyk jest pusty.</p>
                <a href="#kategorie" className="btn-yellow inline-flex mt-4 items-center gap-2 px-5 py-3 rounded-xl font-extrabold">
                  <i data-lucide="shopping-bag" className="w-5 h-5"></i> Wr√≥ƒá do menu
                </a>
              </div>
            ) : (
              <>
                <div className="mt-6 grid md:grid-cols-3 gap-6 items-start">
                  <div className="md:col-span-2 space-y-4">
                    {cart.map(item => (
                      <div key={item.id} className="rounded-2xl flat-card p-4">
                        <div className="flex flex-col md:flex-row md:items-center gap-4 justify-between">
                          <div className="min-w-0 flex-1">
                            <div className="font-extrabold break-words">{item.name}</div>
                            <div className="text-xs text-brand-muted mt-1 font-medium">
                              ID: <span className="px-2 py-0.5 rounded-md pill-yellow font-mono">{item.productId || 'brak'}</span>
                            </div>
                          </div>

                          <div className="flex flex-col sm:flex-row gap-3 items-stretch md:items-center w-full md:w-auto justify-between md:justify-end">
                            <div className="flex items-center gap-2">
                              <button onClick={()=> decQty(item.id)}
                                      className="w-9 h-9 rounded-xl flat-card font-extrabold"
                                      style={{borderColor:"rgba(255,193,7,.45)"}}>‚àí</button>
                              <input
                                value={item.qty||1}
                                onChange={(e)=> setQty(item.id, parseInt(e.target.value||'1',10))}
                                className="w-16 text-center rounded-xl flat-card font-extrabold focus-yellow"
                                style={{borderColor:"rgba(255,193,7,.45)", padding:"8px 10px"}}
                                inputMode="numeric"
                                pattern="[0-9]*"
                              />
                              <button onClick={()=> incQty(item.id)}
                                      className="w-9 h-9 rounded-xl font-extrabold btn-yellow">+</button>
                            </div>

                            <div className="text-right self-center">
                              <div className="font-extrabold whitespace-nowrap">{currency(lineTotal(item))}</div>
                              <div className="text-xs text-brand-muted whitespace-nowrap font-medium">{currency(item.price)} / szt.</div>
                            </div>

                            <button onClick={()=> remove(item.id)} className="text-red-600 hover:underline self-center text-sm font-extrabold">
                              Usu≈Ñ
                            </button>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>

                  <aside className="rounded-2xl flat-card p-5">
                    <div className="flex items-center justify-between">
                      <span className="font-extrabold">Suma</span>
                      <span className="font-extrabold text-xl">{currency(total)}</span>
                    </div>
                    <div className="mt-4 grid gap-2">
                      <button onClick={goToCheckout} className="btn-yellow w-full rounded-xl px-4 py-3 font-extrabold">
                        Przejd≈∫ do zam√≥wienia
                      </button>
                      <button onClick={clear}
                              className="w-full rounded-xl px-4 py-3 font-extrabold flat-card btn-outline"
                              style={{borderColor:"rgba(255,193,7,.45)"}}>
                        Wyczy≈õƒá koszyk
                      </button>
                    </div>
                  </aside>
                </div>

                <div className="mt-10">
                  <div className="flex items-center justify-between gap-3">
                    <h3 className="text-lg font-extrabold">
                      <span className="underline-yellow">Dodaj co≈õ jeszcze</span>
                    </h3>
                    <span className="text-xs font-extrabold px-3 py-1 rounded-full pill-yellow">1 klik</span>
                  </div>

                  <div className="mt-4 flex flex-wrap gap-3">
                    {EXTRA_ITEMS.map(extra => (
                      <button key={extra.id}
                        onClick={() => add({ type:'extra', productId: extra.id, name: extra.name, price: extra.price })}
                        className="rounded-full px-4 py-2 font-extrabold flat-card btn-outline"
                        style={{borderColor:"rgba(255,193,7,.45)"}}
                      >
                        <span className="inline-flex items-center gap-2">
                          <span className="w-6 h-6 rounded-full btn-yellow grid place-items-center">+</span>
                          {extra.name}
                          <span className="pill-yellow px-2 py-1 rounded-full text-xs">{currency(extra.price)}</span>
                        </span>
                      </button>
                    ))}
                  </div>
                </div>
              </>
            )}
          </div>
        </section>
      );
    };

    const Zamowienie = () => {
      const { cart, total, lineTotal } = useCart();
      const [form, setForm] = useState({
        imieNazwisko:'', telefon:'', email:'', miasto:'', kod:'', ulica:'', nrBud:'', pietro:'', lokal:'', uwagi:'', faktura:false, nip:'', firma:''
      });
      const handle = (k,v)=> setForm(s=> ({...s,[k]:v}));

      const submit = async () => {
        if(!form.imieNazwisko || !form.telefon || !form.miasto || !form.ulica) {
          alert('Uzupe≈Çnij wymagane pola');
          return;
        }
        if (!cart.length) {
          alert('Koszyk jest pusty.');
          return;
        }
        const missing = cart.find(i => !i.productId);
        if (missing) {
          alert("W koszyku jest pozycja bez productId. Dodaj produkt ponownie.");
          console.log("Missing productId item:", missing);
          return;
        }

        try {
          const payload = {
            customer: form,
            cart: cart.map(i => ({ productId: i.productId, qty: i.qty || 1 }))
          };

          const r = await fetch("/api/payu/order", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          const data = await r.json().catch(() => ({}));

          if (!r.ok) {
            alert("B≈ÇƒÖd serwera: " + (data.error || r.status));
            console.log("PAYU ERROR DETAILS:", data);
            return;
          }
          if (!data.redirectUri) {
            alert("Brak redirectUri. Zobacz konsolƒô (PAYU RESPONSE).");
            console.log("PAYU RESPONSE:", data);
            return;
          }
          window.location.href = data.redirectUri;
        } catch (e) {
          alert("B≈ÇƒÖd po≈ÇƒÖczenia z serwerem.");
          console.log(e);
        }
      };

      const Input = ({label, required, value, onChange, type="text"}) => (
        <div>
          <label className="text-xs uppercase tracking-widest font-extrabold text-brand-muted">
            {label}{required ? " *" : ""}
          </label>
          <input
            type={type}
            value={value}
            onChange={onChange}
            className="mt-1 w-full rounded-xl flat-card focus-yellow font-semibold px-4 py-3"
            style={{borderColor:"rgba(255,193,7,.45)"}}
          />
        </div>
      );

      return (
        <section className="py-10">
          <div className="max-w-6xl mx-auto px-4">
            <div className="flex items-center justify-between gap-3">
              <a href="#/koszyk" className="inline-flex items-center gap-2 text-sm font-extrabold link-yellow">
                <i data-lucide="arrow-left" className="w-4 h-4"></i> Wr√≥ƒá do koszyka
              </a>
              <span className="text-xs font-extrabold px-3 py-1 rounded-full pill-yellow">
                do zap≈Çaty: {currency(total)}
              </span>
            </div>

            <h2 className="mt-4 text-2xl font-extrabold">
              <span className="underline-yellow">Zam√≥wienie</span>
            </h2>

            <div className="mt-6 grid lg:grid-cols-3 gap-6 items-start">
              <div className="lg:col-span-2 rounded-2xl flat-card p-5">
                <div className="grid md:grid-cols-2 gap-4">
                  <Input label="Imiƒô i nazwisko" required value={form.imieNazwisko} onChange={e=>handle('imieNazwisko', e.target.value)} />
                  <Input label="Nr telefonu" required value={form.telefon} onChange={e=>handle('telefon', e.target.value)} />
                  <Input label="Adres email" value={form.email} onChange={e=>handle('email', e.target.value)} type="email" />
                  <Input label="Miasto" required value={form.miasto} onChange={e=>handle('miasto', e.target.value)} />
                  <Input label="Kod pocztowy" value={form.kod} onChange={e=>handle('kod', e.target.value)} />
                  <Input label="Ulica" required value={form.ulica} onChange={e=>handle('ulica', e.target.value)} />
                  <Input label="Nr budynku" value={form.nrBud} onChange={e=>handle('nrBud', e.target.value)} />
                  <Input label="Piƒôtro" value={form.pietro} onChange={e=>handle('pietro', e.target.value)} />
                  <Input label="Nr lokalu" value={form.lokal} onChange={e=>handle('lokal', e.target.value)} />

                  <div className="md:col-span-2">
                    <label className="text-xs uppercase tracking-widest font-extrabold text-brand-muted">
                      Uwagi do zam√≥wienia
                    </label>
                    <textarea
                      value={form.uwagi}
                      onChange={e=>handle('uwagi', e.target.value)}
                      className="mt-1 w-full rounded-xl flat-card focus-yellow font-semibold px-4 py-3 min-h-[110px]"
                      style={{borderColor:"rgba(255,193,7,.45)"}}
                    ></textarea>
                  </div>
                </div>

                <div className="mt-4 pt-4 border-t border-brand-line">
                  <label className="flex items-center gap-2 text-sm font-extrabold">
                    <input type="checkbox" checked={form.faktura} onChange={e=>handle('faktura', e.target.checked)} />
                    Chcƒô dane do faktury
                  </label>

                  {form.faktura && (
                    <div className="grid md:grid-cols-2 gap-4 mt-3">
                      <Input label="NIP" value={form.nip} onChange={e=>handle('nip', e.target.value)} />
                      <Input label="Nazwa firmy" value={form.firma} onChange={e=>handle('firma', e.target.value)} />
                    </div>
                  )}
                </div>
              </div>

              <aside className="rounded-2xl flat-card p-5">
                <div className="font-extrabold">Podsumowanie</div>
                <div className="mt-3 space-y-3 max-h-64 overflow-auto pr-2">
                  {cart.map(i => (
                    <div key={i.id} className="rounded-xl p-3"
                         style={{border:"1px dashed rgba(255,193,7,.55)", background:"rgba(255,193,7,.10)"}}>
                      <div className="flex items-center justify-between text-sm">
                        <span className="font-extrabold">{i.name} √ó {i.qty||1}</span>
                        <span className="font-extrabold">{currency(lineTotal(i))}</span>
                      </div>
                      <div className="text-[11px] mt-1 font-mono text-brand-muted">{i.productId}</div>
                    </div>
                  ))}
                </div>

                <div className="flex items-center justify-between mt-4 text-lg">
                  <span className="font-extrabold">Do zap≈Çaty</span>
                  <span className="font-extrabold">{currency(total)}</span>
                </div>

                <button onClick={submit} className="btn-yellow w-full mt-4 rounded-xl px-4 py-3 font-extrabold">
                  P≈Çatno≈õƒá online (PayU)
                </button>

                <div className="text-xs text-brand-muted mt-3 font-medium">
                  Debug: F12 ‚Üí Console ‚Üí <span className="font-mono">PAYU ERROR DETAILS</span>
                </div>
              </aside>
            </div>
          </div>
        </section>
      );
    };

    const AuthModal = ({ open, onClose }) => {
      const [mode, setMode] = useState('login');
      const [form, setForm] = useState({ email: '', password: '', confirm: '' });
      if (!open) return null;

      const handleChange = (field, value) => setForm(prev => ({ ...prev, [field]: value }));

      const handleSubmit = (e) => {
        e.preventDefault();
        if (mode === 'register' && form.password !== form.confirm) {
          alert('Has≈Ça nie sƒÖ takie same.');
          return;
        }
        alert(`(${mode === 'login' ? 'Logowanie' : 'Rejestracja'}) to na razie makieta UI :)`);
        onClose();
      };

      return (
        <div className="fixed inset-0 z-[90] bg-black/40 flex items-center justify-center px-4" onClick={onClose} role="dialog" aria-modal="true">
          <div className="relative w-full max-w-md rounded-2xl flat-card p-6" onClick={(e) => e.stopPropagation()}>
            <button type="button" onClick={onClose}
              className="absolute top-3 right-3 w-10 h-10 rounded-xl btn-yellow font-extrabold">
              √ó
            </button>

            <div className="mb-4">
              <div className="text-xs uppercase tracking-widest text-brand-muted font-extrabold">
                {mode === 'login' ? 'Logowanie' : 'Rejestracja'}
              </div>
              <h3 className="text-xl font-extrabold mt-1">
                {mode === 'login' ? 'Zaloguj siƒô do eatmi' : 'Za≈Ç√≥≈º konto w eatmi'}
              </h3>
              <p className="text-xs text-brand-muted mt-1 font-medium">
                Makieta UI ‚Äî backend logowania dodamy p√≥≈∫niej.
              </p>
            </div>

            <form onSubmit={handleSubmit} className="space-y-3">
              <div>
                <label className="text-xs uppercase tracking-widest text-brand-muted font-extrabold">Adres e-mail</label>
                <input type="email" required value={form.email}
                  onChange={(e) => handleChange('email', e.target.value)}
                  className="mt-1 w-full rounded-xl flat-card focus-yellow font-semibold px-4 py-3"
                  style={{borderColor:"rgba(255,193,7,.45)"}} />
              </div>

              <div>
                <label className="text-xs uppercase tracking-widest text-brand-muted font-extrabold">Has≈Ço</label>
                <input type="password" required value={form.password}
                  onChange={(e) => handleChange('password', e.target.value)}
                  className="mt-1 w-full rounded-xl flat-card focus-yellow font-semibold px-4 py-3"
                  style={{borderColor:"rgba(255,193,7,.45)"}} />
              </div>

              {mode === 'register' && (
                <div>
                  <label className="text-xs uppercase tracking-widest text-brand-muted font-extrabold">Powt√≥rz has≈Ço</label>
                  <input type="password" required value={form.confirm}
                    onChange={(e) => handleChange('confirm', e.target.value)}
                    className="mt-1 w-full rounded-xl flat-card focus-yellow font-semibold px-4 py-3"
                    style={{borderColor:"rgba(255,193,7,.45)"}} />
                </div>
              )}

              <button type="submit" className="btn-yellow w-full rounded-xl px-4 py-3 font-extrabold">
                {mode === 'login' ? 'Zaloguj siƒô' : 'Zarejestruj siƒô'}
              </button>
            </form>

            <div className="mt-4 text-xs text-brand-muted text-center font-medium">
              {mode === 'login' ? (
                <>Nie masz konta?{' '}
                  <button type="button" onClick={() => { setMode('register'); setForm({ email:'', password:'', confirm:'' }) }}
                    className="font-extrabold link-yellow">
                    Zarejestruj siƒô
                  </button>
                </>
              ) : (
                <>Masz konto?{' '}
                  <button type="button" onClick={() => { setMode('login'); setForm({ email:'', password:'', confirm:'' }) }}
                    className="font-extrabold link-yellow">
                    Zaloguj siƒô
                  </button>
                </>
              )}
            </div>
          </div>
        </div>
      );
    };

    const Home = () => (
      <>
        <Hero />

        <section id="kategorie" className="py-10 md:py-14">
          <div className="max-w-6xl mx-auto px-4">
            <SectionTitle
              eyebrow="Menu"
              title="Wybierz kategoriƒô"
              subtitle="Bia≈Çe t≈Ço + ≈º√≥≈Çte akcenty, ca≈Ço≈õƒá flat i czytelna."
            />
            <div className="mt-6 grid md:grid-cols-3 gap-5">
              {PRODUCT_CATEGORIES.map(cat => <CategoryCard key={cat.id} category={cat} />)}
            </div>
          </div>
        </section>

        <section id="kontakt" className="py-10 md:py-14">
          <div className="max-w-6xl mx-auto px-4">
            <SectionTitle title="Kontakt" subtitle="Masz pytania? Napisz do nas." />
            <form className="max-w-xl mt-6 rounded-2xl flat-card p-6">
              <div className="grid md:grid-cols-2 gap-4">
                <input className="rounded-xl flat-card focus-yellow font-semibold px-4 py-3"
                       style={{borderColor:"rgba(255,193,7,.45)"}} placeholder="Imiƒô" />
                <input className="rounded-xl flat-card focus-yellow font-semibold px-4 py-3"
                       style={{borderColor:"rgba(255,193,7,.45)"}} placeholder="Email" />
              </div>
              <textarea className="mt-4 rounded-xl flat-card focus-yellow font-semibold px-4 py-3 w-full min-h-[120px]"
                        style={{borderColor:"rgba(255,193,7,.45)"}} placeholder="Wiadomo≈õƒá"></textarea>
              <button type="button" className="btn-yellow mt-4 rounded-xl px-5 py-3 font-extrabold">
                Wy≈õlij
              </button>
            </form>
          </div>
        </section>
      </>
    );

    const FloatingNav = () => (
      <nav className="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 w-[min(720px,92%)] bg-white rounded-2xl"
           style={{border:"1px solid rgba(255,193,7,.55)"}}>
        <ul className="grid grid-cols-4">
          <li><a href="#kategorie" className="flex flex-col items-center py-3 text-sm font-extrabold">
            <i data-lucide="shopping-bag" className="w-5 h-5 text-amber-700"></i>Menu</a></li>
          <li><a href="#/kategoria/boxy-sniadaniowe" className="flex flex-col items-center py-3 text-sm font-extrabold">
            <i data-lucide="package-open" className="w-5 h-5 text-amber-700"></i>Boxy</a></li>
          <li><a href="#/kategoria/lunche" className="flex flex-col items-center py-3 text-sm font-extrabold">
            <i data-lucide="utensils-crossed" className="w-5 h-5 text-amber-700"></i>Lunche</a></li>
          <li><a href="#/koszyk" className="flex flex-col items-center py-3 text-sm font-extrabold">
            <i data-lucide="shopping-cart" className="w-5 h-5 text-amber-700"></i>Koszyk</a></li>
        </ul>
      </nav>
    );

    const Router = () => {
      const [route, setRoute] = useState(window.location.hash || '#/');

      useEffect(()=>{
        const onHash = () => setRoute(window.location.hash || '#/');
        window.addEventListener('hashchange', onHash);
        return ()=> window.removeEventListener('hashchange', onHash);
      },[]);

      useEffect(()=> { window.lucide?.createIcons?.(); }, [route]);

      if (route.startsWith('#/kategoria/')) {
        const id = route.split('/')[2];
        return <CategoryPage categoryId={id} />;
      }
      if(route === '#/koszyk') return <Koszyk />;
      if(route === '#/zamowienie') return <Zamowienie />;
      return <Home />;
    };

    const App = () => {
      const [authOpen, setAuthOpen] = useState(false);
      useEffect(() => { window.lucide?.createIcons?.(); }, [authOpen]);

      return (
        <ToastProvider>
          <CartProvider>
            <Header onOpenAuth={() => setAuthOpen(true)} />
            <Router />
            <FloatingNav />
            <footer className="py-14 text-center text-sm text-brand-muted font-medium">
              <span className="inline-flex items-center gap-2 px-4 py-2 rounded-full pill-yellow font-extrabold">
                ¬© {new Date().getFullYear()} eatmi.pl
              </span>
            </footer>
            <AuthModal open={authOpen} onClose={() => setAuthOpen(false)} />
          </CartProvider>
        </ToastProvider>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
