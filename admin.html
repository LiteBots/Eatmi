<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#FFC107" />
  <title>Panel Administratora ‚Äî eatmi.pl</title>
  <meta name="description" content="Panel administratora: dashboard, zam√≥wienia, u≈ºytkownicy, pasek info." />

  <!-- Tailwind config MUST be before tailwindcdn script -->
  <script>
    tailwind = window.tailwind || {};
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: { yellow: "#FFC107", dark: "#111827", light: "#F9FAFB" },
            kiosk: {
              bg: "#0B0F1A",
              card: "#0F1629",
              card2: "#111B34",
              green: "#22C55E",
              red: "#EF4444",
              blue: "#3B82F6",
              violet: "#8B5CF6",
              orange: "#F59E0B",
              gray: "#94A3B8",
            },
          },
          boxShadow: {
            soft: "0 10px 30px rgba(0,0,0,.08)",
            glass: "0 8px 25px rgba(0,0,0,.12)",
            kiosk: "0 14px 50px rgba(0,0,0,.20)",
          },
          borderRadius: { xl2: "1.25rem" },
        },
      },
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 + ReactDOM 18 -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Babel for inline JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Lucide icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    :root{
      --safe-b: env(safe-area-inset-bottom, 0px);
      --safe-t: env(safe-area-inset-top, 0px);
    }
    html, body { height: 100%; }
    body { overscroll-behavior-y: none; background: #F9FAFB; }
    .liquid { background: rgba(255,255,255,.78); backdrop-filter: blur(12px); }
    .logo-glow { box-shadow: 0 12px 30px rgba(255,193,7,.18); }
    .input-focus { outline: none; }
    .input-focus:focus { box-shadow: 0 0 0 3px rgba(255,193,7,.35); border-color: rgba(255,193,7,.75); }
    .toast-enter { animation: toastIn .18s ease-out; }
    .toast-bar { animation: toastBar 2.4s linear; transform-origin: left; }
    @keyframes toastIn { from { transform: translateY(8px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
    @keyframes toastBar { from { transform: scaleX(1) } to { transform: scaleX(0) } }

    /* Subtelne t≈Ço jak ‚Äúkiosk‚Äù */
    .bg-noise {
      background:
        radial-gradient(1000px 500px at 10% -10%, rgba(255,193,7,.18), transparent 55%),
        radial-gradient(900px 500px at 110% 10%, rgba(59,130,246,.12), transparent 55%),
        radial-gradient(700px 500px at 40% 110%, rgba(139,92,246,.10), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,1) 0%, rgba(249,250,251,1) 70%, rgba(249,250,251,1) 100%);
    }

    /* Scrollbar: lekko */
    ::-webkit-scrollbar{ height:10px; width:10px; }
    ::-webkit-scrollbar-thumb{ background: rgba(17,24,39,.18); border-radius: 999px; }
    ::-webkit-scrollbar-track{ background: rgba(17,24,39,.04); }

    /* ‚ÄúPigu≈Çy‚Äù statusu */
    .chip { font-size: 10px; letter-spacing: .14em; text-transform: uppercase; font-weight: 800; padding: .35rem .6rem; border-radius: 999px; border: 1px solid rgba(17,24,39,.12); }
  </style>
</head>

<body class="text-gray-900 bg-noise">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    /* =======================
       UTILS
    ======================= */
    const currency = (n) => new Intl.NumberFormat("pl-PL", { style:"currency", currency:"PLN" }).format(n || 0);
    const fmtDate = (d) => new Intl.DateTimeFormat("pl-PL", { dateStyle:"medium", timeStyle:"short" }).format(d);
    const cn = (...a) => a.filter(Boolean).join(" ");
    const uid = () => (crypto?.randomUUID ? crypto.randomUUID() : `${Date.now()}-${Math.random()}`);

    const todayKey = () => {
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,"0");
      const da = String(d.getDate()).padStart(2,"0");
      return `${y}-${m}-${da}`;
    };

    /* =======================
       TOAST
    ======================= */
    const ToastContext = React.createContext();
    const useToast = () => React.useContext(ToastContext);

    const ToastProvider = ({children}) => {
      const [toast, setToast] = useState(null);
      const timer = useRef(null);

      const show = (message, variant="ok") => {
        setToast({ message, variant });
        if (timer.current) clearTimeout(timer.current);
        timer.current = setTimeout(() => setToast(null), 2500);
      };

      const close = () => {
        if (timer.current) clearTimeout(timer.current);
        setToast(null);
      };

      const styles = toast?.variant === "error"
        ? { ring: "border-red-200", iconBg:"bg-red-100", iconTx:"text-red-600", bar:"bg-red-400", label:"B≈ÇƒÖd" }
        : toast?.variant === "warn"
          ? { ring: "border-amber-200", iconBg:"bg-amber-100", iconTx:"text-amber-700", bar:"bg-amber-400", label:"Uwaga" }
          : { ring: "border-emerald-200", iconBg:"bg-emerald-100", iconTx:"text-emerald-600", bar:"bg-emerald-400", label:"OK" };

      return (
        <ToastContext.Provider value={{ show }}>
          {children}
          {toast && (
            <div className="fixed bottom-6 left-1/2 -translate-x-1/2 z-[200] pointer-events-none">
              <div className={cn("relative pointer-events-auto toast-enter bg-white/95 border shadow-glass rounded-2xl px-4 py-3 min-w-[280px] max-w-[92vw] flex items-start gap-3", styles.ring)}>
                <div className={cn("w-9 h-9 rounded-full flex items-center justify-center text-lg", styles.iconBg, styles.iconTx)}>
                  {toast.variant === "error" ? "!" : "‚úì"}
                </div>
                <div className="flex-1">
                  <div className={cn("text-[10px] font-semibold uppercase tracking-[0.12em]", styles.iconTx)}>
                    {styles.label}
                  </div>
                  <div className="text-sm text-gray-900 mt-0.5">{toast.message}</div>
                </div>
                <button
                  type="button"
                  onClick={close}
                  className="ml-2 text-gray-400 hover:text-gray-600 text-xl leading-none"
                  aria-label="Zamknij powiadomienie"
                >
                  √ó
                </button>
                <div className="absolute left-4 right-4 -bottom-1.5 h-1 rounded-full overflow-hidden bg-gray-50">
                  <div className={cn("toast-bar h-full", styles.bar)}></div>
                </div>
              </div>
            </div>
          )}
        </ToastContext.Provider>
      );
    };

    /* =======================
       MOCK DATA (demo)
    ======================= */
    const seedOrders = () => {
      const t = todayKey();
      const now = Date.now();
      return [
        {
          id: "ORD-10021",
          createdAt: new Date(now - 12*60*1000).toISOString(),
          dayKey: t,
          customer: { name: "Jan Kowalski", phone:"600 123 456", city:"Warszawa" },
          items: [
            { name:"Lunch tygodnia", qty: 1, price: 49 },
            { name:"Domowa lemoniada 250 ml", qty: 2, price: 12 },
          ],
          total: 49 + 2*12,
          status: "new", // new | accepted | done | rejected
          channel: "www",
        },
        {
          id: "ORD-10020",
          createdAt: new Date(now - 49*60*1000).toISOString(),
          dayKey: t,
          customer: { name: "Ala Nowak", phone:"502 555 444", city:"Warszawa" },
          items: [
            { name:"Box ≈õniadaniowy ≈õredni VEGE", qty: 1, price: 52 },
          ],
          total: 52,
          status: "accepted",
          channel: "www",
        },
        {
          id: "ORD-10019",
          createdAt: new Date(now - 4*60*60*1000).toISOString(),
          dayKey: t,
          customer: { name: "Kamil Zieli≈Ñski", phone:"789 222 111", city:"Piaseczno" },
          items: [
            { name:"Pancakes (2 szt.) z NutellƒÖ i owocami", qty: 1, price: 19 },
            { name:"Latte 300 ml", qty: 1, price: 12 },
          ],
          total: 31,
          status: "done",
          channel: "www",
        },
        {
          id: "ORD-10018",
          createdAt: new Date(now - 26*60*60*1000).toISOString(),
          dayKey: "yesterday",
          customer: { name: "Micha≈Ç K.", phone:"700 100 100", city:"Warszawa" },
          items: [{ name:"Box ≈õniadaniowy du≈ºy nr 1", qty: 1, price: 80 }],
          total: 80,
          status: "done",
          channel: "telefon",
        },
      ];
    };

    const seedUsers = () => ([
      { id:"USR-2001", name:"Jan Kowalski", email:"jan.kowalski@example.com", role:"user", createdAt:"2025-12-19", orders: 5, status:"active" },
      { id:"USR-2002", name:"Ala Nowak", email:"ala.nowak@example.com", role:"user", createdAt:"2025-12-28", orders: 2, status:"active" },
      { id:"USR-2003", name:"Kamil Zieli≈Ñski", email:"kamil.z@example.com", role:"user", createdAt:"2026-01-02", orders: 1, status:"active" },
      { id:"ADM-0001", name:"Admin", email:"admin@eatmi.pl", role:"admin", createdAt:"2025-10-01", orders: 0, status:"active" },
    ]);

    /* =======================
       STORAGE HOOK
    ======================= */
    const useLocalStorage = (key, initial) => {
      const [state, setState] = useState(() => {
        try { return JSON.parse(localStorage.getItem(key)) ?? initial; } catch { return initial; }
      });
      useEffect(() => { localStorage.setItem(key, JSON.stringify(state)); }, [key, state]);
      return [state, setState];
    };

    /* =======================
       LAYOUT: LOGO / HEADER
    ======================= */
    const Logo = () => (
      <div className="flex items-center gap-3">
        <div className="w-10 h-10 rounded-2xl bg-white flex items-center justify-center border border-gray-100 overflow-hidden shadow-soft logo-glow">
          <div className="w-9 h-9 rounded-2xl bg-brand-yellow/25 grid place-items-center">
            <i data-lucide="shield" className="w-5 h-5 text-gray-900"></i>
          </div>
        </div>
        <div className="leading-tight">
          <div className="font-extrabold tracking-tight">
            eatmi<span className="text-brand-yellow">.pl</span> <span className="text-gray-400">/</span> Admin
          </div>
          <div className="text-xs text-gray-500 font-semibold">Panel administratora</div>
        </div>
      </div>
    );

    const TopBar = ({ title, subtitle, right }) => (
      <div className="sticky top-0 z-40">
        <div className="px-4 md:px-6 pt-4" style={{ paddingTop: "calc(var(--safe-t) + 16px)" }}>
          <div className="liquid border border-white/60 shadow-glass rounded-3xl px-4 py-4 md:px-5 md:py-5 flex items-start gap-4 justify-between">
            <div className="min-w-0">
              <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">
                Administracja
              </div>
              <h1 className="text-xl md:text-2xl font-extrabold mt-1">{title}</h1>
              {subtitle && <p className="text-sm text-gray-600 mt-1 max-w-2xl">{subtitle}</p>}
            </div>
            {right && <div className="shrink-0">{right}</div>}
          </div>
        </div>
      </div>
    );

    /* =======================
       SIDEBAR NAV
    ======================= */
    const NavItem = ({ active, icon, label, onClick, badge }) => (
      <button
        type="button"
        onClick={onClick}
        className={cn(
          "w-full text-left px-3 py-3 rounded-2xl border transition flex items-center justify-between gap-3 shadow-soft",
          active
            ? "bg-brand-yellow/20 border-brand-yellow/30 ring-1 ring-brand-yellow/20"
            : "bg-white/90 border-gray-200 hover:ring-2 hover:ring-brand-yellow/25"
        )}
      >
        <span className="flex items-center gap-3 min-w-0">
          <span className={cn(
            "w-10 h-10 rounded-2xl grid place-items-center border",
            active ? "bg-brand-yellow/30 border-brand-yellow/30" : "bg-white border-gray-200"
          )}>
            <i data-lucide={icon} className="w-5 h-5 text-gray-900"></i>
          </span>
          <span className="font-extrabold text-sm truncate">{label}</span>
        </span>
        {typeof badge === "number" && badge > 0 && (
          <span className="px-2 py-1 rounded-full bg-brand-yellow text-gray-900 text-xs font-extrabold border border-black/5">
            {badge > 99 ? "99+" : badge}
          </span>
        )}
      </button>
    );

    const Sidebar = ({ route, setRoute, pendingCount, collapsed, setCollapsed }) => {
      const is = (r) => route === r;
      return (
        <aside className={cn(
          "h-[100dvh] sticky top-0 flex flex-col",
          "border-r border-gray-200/70 bg-white/40 backdrop-blur",
          collapsed ? "w-[88px]" : "w-[300px]"
        )}>
          <div className={cn("p-4", collapsed ? "pb-2" : "pb-3")} style={{ paddingTop: "calc(var(--safe-t) + 16px)" }}>
            <div className={cn("flex items-center justify-between gap-2", collapsed && "justify-center")}>
              <div className={cn("min-w-0", collapsed && "hidden")}>
                <Logo />
              </div>

              <button
                type="button"
                onClick={() => setCollapsed(v => !v)}
                className="w-11 h-11 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 grid place-items-center"
                aria-label="Zwi≈Ñ / rozwi≈Ñ sidebar"
                title="Zwi≈Ñ / rozwi≈Ñ"
              >
                <i data-lucide={collapsed ? "panel-right-open" : "panel-left-close"} className="w-5 h-5"></i>
              </button>
            </div>
          </div>

          <div className={cn("px-4 pb-4", collapsed && "hidden")}>
            <div className="rounded-2xl border border-gray-200 bg-white/80 shadow-soft p-4">
              <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Status</div>
              <div className="mt-2 flex items-center justify-between gap-3">
                <div className="font-extrabold">System OK</div>
                <span className="chip bg-emerald-50 text-emerald-700 border-emerald-200">online</span>
              </div>
              <div className="mt-2 text-xs text-gray-600">
                Ostatnia synchronizacja: <span className="font-mono">{fmtDate(new Date())}</span>
              </div>
            </div>
          </div>

          <nav className={cn("px-4 pb-4 grid gap-3", collapsed && "px-3")}>
            <NavItem
              active={is("dashboard")}
              icon="layout-dashboard"
              label={collapsed ? "" : "Dashboard"}
              onClick={() => setRoute("dashboard")}
            />
            <NavItem
              active={is("orders")}
              icon="receipt"
              label={collapsed ? "" : "Zam√≥wienia"}
              badge={pendingCount}
              onClick={() => setRoute("orders")}
            />
            <NavItem
              active={is("users")}
              icon="users"
              label={collapsed ? "" : "U≈ºytkownicy"}
              onClick={() => setRoute("users")}
            />
            <NavItem
              active={is("infobar")}
              icon="info"
              label={collapsed ? "" : "Pasek info"}
              onClick={() => setRoute("infobar")}
            />
          </nav>

          <div className={cn("mt-auto p-4", collapsed && "p-3")} style={{ paddingBottom: "calc(var(--safe-b) + 16px)" }}>
            <div className={cn("rounded-2xl border border-gray-200 bg-white/80 shadow-soft p-4", collapsed && "hidden")}>
              <div className="flex items-center justify-between gap-3">
                <div className="min-w-0">
                  <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Konto</div>
                  <div className="font-extrabold truncate">Admin</div>
                  <div className="text-xs text-gray-600 truncate">admin@eatmi.pl</div>
                </div>
                <button
                  type="button"
                  className="w-11 h-11 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 grid place-items-center"
                  title="Wyloguj (demo)"
                  onClick={() => alert("Demo UI ‚Äî tu pod≈ÇƒÖczysz logout.")}
                >
                  <i data-lucide="log-out" className="w-5 h-5"></i>
                </button>
              </div>
            </div>

            {collapsed && (
              <button
                type="button"
                className="w-full h-12 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 grid place-items-center"
                title="Wyloguj (demo)"
                onClick={() => alert("Demo UI ‚Äî tu pod≈ÇƒÖczysz logout.")}
              >
                <i data-lucide="log-out" className="w-5 h-5"></i>
              </button>
            )}
          </div>
        </aside>
      );
    };

    /* =======================
       COMPONENTS: STATS CARDS
    ======================= */
    const StatCard = ({ label, value, icon, hint, tone="yellow" }) => {
      const toneMap = {
        yellow: { bg:"bg-brand-yellow/20", ring:"ring-brand-yellow/25", border:"border-brand-yellow/30" },
        blue:   { bg:"bg-kiosk-blue/15", ring:"ring-kiosk-blue/20", border:"border-kiosk-blue/25" },
        green:  { bg:"bg-kiosk-green/15", ring:"ring-kiosk-green/20", border:"border-kiosk-green/25" },
        violet: { bg:"bg-kiosk-violet/15", ring:"ring-kiosk-violet/20", border:"border-kiosk-violet/25" },
      };
      const t = toneMap[tone] || toneMap.yellow;

      return (
        <div className={cn("bg-white/90 border rounded-3xl shadow-soft hover:shadow-kiosk transition p-5 hover:ring-2", t.border, t.ring)}>
          <div className="flex items-start justify-between gap-3">
            <div className="min-w-0">
              <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">{label}</div>
              <div className="text-2xl md:text-3xl font-extrabold mt-2">{value}</div>
              {hint && <div className="text-xs text-gray-600 mt-1">{hint}</div>}
            </div>
            <div className={cn("w-12 h-12 rounded-2xl border grid place-items-center", t.bg, t.border)}>
              <i data-lucide={icon} className="w-6 h-6 text-gray-900"></i>
            </div>
          </div>
        </div>
      );
    };

    const Chip = ({ children, variant="gray" }) => {
      const v = {
        gray:  "bg-gray-50 text-gray-700 border-gray-200",
        ok:    "bg-emerald-50 text-emerald-700 border-emerald-200",
        warn:  "bg-amber-50 text-amber-800 border-amber-200",
        bad:   "bg-red-50 text-red-700 border-red-200",
        blue:  "bg-blue-50 text-blue-700 border-blue-200",
      }[variant] || "bg-gray-50 text-gray-700 border-gray-200";

      return <span className={cn("chip", v)}>{children}</span>;
    };

    /* =======================
       PAGES: DASHBOARD
    ======================= */
    const DashboardPage = ({ users, orders }) => {
      const t = todayKey();

      const stats = useMemo(() => {
        const usersCount = users.length;
        const todayOrders = orders.filter(o => o.dayKey === t);
        const ordersTodayCount = todayOrders.length;
        const ordersTotalCount = orders.length;

        const earningsTotal = orders
          .filter(o => o.status !== "rejected")
          .reduce((s,o)=> s + (o.total||0), 0);

        const earningsToday = todayOrders
          .filter(o => o.status !== "rejected")
          .reduce((s,o)=> s + (o.total||0), 0);

        const pending = orders.filter(o => o.status === "new").length;

        return { usersCount, ordersTodayCount, ordersTotalCount, earningsToday, earningsTotal, pending };
      }, [users, orders, t]);

      const recent = useMemo(() => {
        return [...orders]
          .sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt))
          .slice(0, 6);
      }, [orders]);

      return (
        <div className="px-4 md:px-6 py-6">
          <div className="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
            <StatCard label="U≈ºytkownicy" value={stats.usersCount} icon="users" hint="≈ÅƒÖcznie w systemie" tone="blue" />
            <StatCard label="Zam√≥wienia dzi≈õ" value={stats.ordersTodayCount} icon="calendar-check" hint={`Dzie≈Ñ: ${t}`} tone="yellow" />
            <StatCard label="Zam√≥wienia ≈ÇƒÖcznie" value={stats.ordersTotalCount} icon="receipt-text" hint="Wszystkie statusy" tone="violet" />
            <StatCard label="Zarobek" value={currency(stats.earningsTotal)} icon="wallet" hint={`${currency(stats.earningsToday)} dzi≈õ`} tone="green" />
          </div>

          <div className="mt-6 grid gap-6 lg:grid-cols-3 items-start">
            <div className="lg:col-span-2 bg-white/90 border border-gray-200 rounded-3xl shadow-soft p-5 md:p-6">
              <div className="flex items-start justify-between gap-3">
                <div>
                  <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">PrzeglƒÖd</div>
                  <div className="text-xl font-extrabold mt-1">Ostatnie zam√≥wienia</div>
                  <div className="text-sm text-gray-600 mt-1">Szybki podglƒÖd tego, co wpad≈Ço ostatnio.</div>
                </div>
                <a
                  href="#"
                  onClick={(e)=>e.preventDefault()}
                  className="inline-flex items-center gap-2 text-sm font-extrabold px-4 py-2 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30"
                  title="Demo"
                >
                  <i data-lucide="sparkles" className="w-4 h-4"></i>
                  Widok (demo)
                </a>
              </div>

              <div className="mt-5 overflow-auto">
                <table className="w-full min-w-[720px] text-sm">
                  <thead>
                    <tr className="text-xs uppercase tracking-wider text-gray-500">
                      <th className="text-left py-3">ID</th>
                      <th className="text-left py-3">Klient</th>
                      <th className="text-left py-3">Miasto</th>
                      <th className="text-left py-3">Kana≈Ç</th>
                      <th className="text-left py-3">Status</th>
                      <th className="text-right py-3">Suma</th>
                      <th className="text-right py-3">Data</th>
                    </tr>
                  </thead>
                  <tbody>
                    {recent.map(o => (
                      <tr key={o.id} className="border-t border-gray-200">
                        <td className="py-3 font-mono text-xs">{o.id}</td>
                        <td className="py-3 font-semibold">{o.customer?.name || "-"}</td>
                        <td className="py-3 text-gray-700">{o.customer?.city || "-"}</td>
                        <td className="py-3">
                          <Chip variant={o.channel === "www" ? "blue" : "gray"}>{o.channel}</Chip>
                        </td>
                        <td className="py-3">
                          {o.status === "new" && <Chip variant="warn">new</Chip>}
                          {o.status === "accepted" && <Chip variant="ok">accepted</Chip>}
                          {o.status === "done" && <Chip variant="gray">done</Chip>}
                          {o.status === "rejected" && <Chip variant="bad">rejected</Chip>}
                        </td>
                        <td className="py-3 text-right font-extrabold">{currency(o.total)}</td>
                        <td className="py-3 text-right text-gray-600">{fmtDate(new Date(o.createdAt))}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>

            <div className="bg-white/90 border border-gray-200 rounded-3xl shadow-soft p-5 md:p-6">
              <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Do ogarniƒôcia</div>
              <div className="text-xl font-extrabold mt-1">Kolejka</div>

              <div className="mt-4 space-y-3">
                <div className="rounded-2xl border border-amber-200 bg-amber-50 p-4">
                  <div className="flex items-center justify-between gap-3">
                    <div className="font-extrabold">Nowe zam√≥wienia</div>
                    <Chip variant="warn">{stats.pending}</Chip>
                  </div>
                  <div className="text-sm text-amber-900/70 mt-1">
                    Przejd≈∫ do ‚ÄûZam√≥wienia‚Äù i zaakceptuj/odrzuƒá.
                  </div>
                </div>

                <div className="rounded-2xl border border-gray-200 bg-white p-4">
                  <div className="flex items-center justify-between gap-3">
                    <div className="font-extrabold">Dzisiejszy obr√≥t</div>
                    <Chip variant="ok">{currency(stats.earningsToday)}</Chip>
                  </div>
                  <div className="text-sm text-gray-600 mt-1">
                    Liczone z zam√≥wie≈Ñ dzisiaj (bez odrzuconych).
                  </div>
                </div>

                <div className="rounded-2xl border border-gray-200 bg-white p-4">
                  <div className="font-extrabold">Tip</div>
                  <div className="text-sm text-gray-600 mt-1">
                    Podepnij tu webhook / SSE / WS, ≈ºeby dashboard ≈ºy≈Ç na ≈ºywo.
                  </div>
                  <div className="mt-3 flex items-center gap-2 text-xs text-gray-500">
                    <i data-lucide="bolt" className="w-4 h-4"></i>
                    Eventy: <span className="font-mono">order.created</span>, <span className="font-mono">order.status</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div className="mt-6 text-xs text-gray-500">
            Demo UI ‚Ä¢ Dane sƒÖ zapisane lokalnie (localStorage). Pod≈ÇƒÖcz backend, gdy bƒôdziesz gotowy.
          </div>
        </div>
      );
    };

    /* =======================
       PAGES: ORDERS (accept/reject)
    ======================= */
    const OrderRow = ({ o, onOpen, onAccept, onReject, onDone }) => {
      const statusChip =
        o.status === "new" ? <Chip variant="warn">new</Chip> :
        o.status === "accepted" ? <Chip variant="ok">accepted</Chip> :
        o.status === "done" ? <Chip variant="gray">done</Chip> :
        <Chip variant="bad">rejected</Chip>;

      return (
        <tr className="border-t border-gray-200">
          <td className="py-3 font-mono text-xs">{o.id}</td>
          <td className="py-3">
            <div className="font-semibold">{o.customer?.name || "-"}</div>
            <div className="text-xs text-gray-500">{o.customer?.phone || ""}</div>
          </td>
          <td className="py-3 text-gray-700">{o.customer?.city || "-"}</td>
          <td className="py-3">{statusChip}</td>
          <td className="py-3 text-right font-extrabold">{currency(o.total)}</td>
          <td className="py-3 text-right text-gray-600">{fmtDate(new Date(o.createdAt))}</td>
          <td className="py-3 text-right">
            <div className="flex items-center justify-end gap-2">
              <button
                className="px-3 py-2 rounded-xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 text-sm font-extrabold"
                onClick={() => onOpen(o)}
              >
                Szczeg√≥≈Çy
              </button>

              {o.status === "new" && (
                <>
                  <button
                    className="px-3 py-2 rounded-xl border border-emerald-200 bg-emerald-50 text-emerald-800 shadow-soft hover:ring-2 hover:ring-emerald-200 text-sm font-extrabold"
                    onClick={() => onAccept(o.id)}
                  >
                    Przyjmij
                  </button>
                  <button
                    className="px-3 py-2 rounded-xl border border-red-200 bg-red-50 text-red-700 shadow-soft hover:ring-2 hover:ring-red-200 text-sm font-extrabold"
                    onClick={() => onReject(o.id)}
                  >
                    Odrzuƒá
                  </button>
                </>
              )}

              {o.status === "accepted" && (
                <button
                  className="px-3 py-2 rounded-xl border border-gray-900 bg-gray-900 text-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 text-sm font-extrabold"
                  onClick={() => onDone(o.id)}
                >
                  Oznacz jako zrobione
                </button>
              )}
            </div>
          </td>
        </tr>
      );
    };

    const OrderDetailsModal = ({ open, order, onClose }) => {
      useEffect(() => {
        const onKey = (e) => { if (open && e.key === "Escape") onClose?.(); };
        window.addEventListener("keydown", onKey);
        return () => window.removeEventListener("keydown", onKey);
      }, [open, onClose]);

      useEffect(()=> { window.lucide?.createIcons?.(); }, [open]);

      if (!open || !order) return null;

      return (
        <div className="fixed inset-0 z-[120] bg-black/55 flex items-center justify-center px-4" onClick={onClose} role="dialog" aria-modal="true">
          <div className="relative w-full max-w-2xl bg-white rounded-3xl shadow-glass border border-gray-200 p-6" onClick={(e)=>e.stopPropagation()}>
            <button
              type="button"
              onClick={onClose}
              className="absolute top-3 right-3 p-2 rounded-full bg-white border border-gray-200 shadow-soft hover:bg-gray-50 hover:ring-2 hover:ring-brand-yellow/40"
              aria-label="Zamknij"
            >
              <i data-lucide="x" className="w-4 h-4"></i>
            </button>

            <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Zam√≥wienie</div>
            <div className="mt-1 flex flex-wrap items-center justify-between gap-3">
              <div className="text-2xl font-extrabold font-mono">{order.id}</div>
              <div className="flex items-center gap-2">
                <Chip variant="gray">{order.channel || "www"}</Chip>
                {order.status === "new" && <Chip variant="warn">new</Chip>}
                {order.status === "accepted" && <Chip variant="ok">accepted</Chip>}
                {order.status === "done" && <Chip variant="gray">done</Chip>}
                {order.status === "rejected" && <Chip variant="bad">rejected</Chip>}
              </div>
            </div>

            <div className="mt-5 grid md:grid-cols-2 gap-4">
              <div className="rounded-2xl border border-gray-200 bg-gray-50/60 p-4">
                <div className="text-xs uppercase tracking-widest text-gray-500 font-semibold">Klient</div>
                <div className="mt-2 font-extrabold">{order.customer?.name || "-"}</div>
                <div className="text-sm text-gray-700 mt-1">{order.customer?.phone || "-"}</div>
                <div className="text-sm text-gray-700">{order.customer?.city || "-"}</div>
                <div className="text-xs text-gray-500 mt-2">Utworzono: <span className="font-mono">{fmtDate(new Date(order.createdAt))}</span></div>
              </div>

              <div className="rounded-2xl border border-gray-200 bg-gray-50/60 p-4">
                <div className="text-xs uppercase tracking-widest text-gray-500 font-semibold">Podsumowanie</div>
                <div className="mt-2 space-y-2 max-h-44 overflow-auto pr-2">
                  {order.items?.map((it, idx) => (
                    <div key={idx} className="flex items-start justify-between gap-3 text-sm">
                      <div className="min-w-0">
                        <div className="font-semibold">{it.name}</div>
                        <div className="text-xs text-gray-600">√ó {it.qty} ‚Ä¢ {currency(it.price)} / szt.</div>
                      </div>
                      <div className="font-extrabold whitespace-nowrap">{currency((it.price||0)*(it.qty||1))}</div>
                    </div>
                  ))}
                </div>
                <div className="mt-3 border-t border-gray-200 pt-3 flex items-center justify-between">
                  <div className="font-extrabold">Suma</div>
                  <div className="text-lg font-extrabold">{currency(order.total)}</div>
                </div>
              </div>
            </div>

            <div className="mt-5 text-xs text-gray-500">
              Tu podepniesz: adres dostawy, notatki, p≈Çatno≈õƒá, integracje (PayU), itd.
            </div>
          </div>
        </div>
      );
    };

    const OrdersPage = ({ orders, setOrders }) => {
      const toast = useToast();
      const [q, setQ] = useState("");
      const [status, setStatus] = useState("all"); // all/new/accepted/done/rejected
      const [selected, setSelected] = useState(null);
      const [detailsOpen, setDetailsOpen] = useState(false);

      const filtered = useMemo(() => {
        const qq = (q || "").trim().toLowerCase();
        return orders
          .filter(o => status === "all" ? true : o.status === status)
          .filter(o => {
            if (!qq) return true;
            const hay = `${o.id} ${o.customer?.name||""} ${o.customer?.phone||""} ${o.customer?.city||""}`.toLowerCase();
            return hay.includes(qq);
          })
          .sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt));
      }, [orders, q, status]);

      const counts = useMemo(() => {
        const m = { all: orders.length, new: 0, accepted: 0, done: 0, rejected: 0 };
        orders.forEach(o => { m[o.status] = (m[o.status]||0) + 1; });
        return m;
      }, [orders]);

      const updateStatus = (id, next) => {
        setOrders(prev => prev.map(o => o.id === id ? { ...o, status: next } : o));
      };

      const accept = (id) => { updateStatus(id, "accepted"); toast?.show(`Zam√≥wienie ${id} przyjƒôte.`); };
      const reject = (id) => { updateStatus(id, "rejected"); toast?.show(`Zam√≥wienie ${id} odrzucone.`, "warn"); };
      const done   = (id) => { updateStatus(id, "done"); toast?.show(`Zam√≥wienie ${id} oznaczone jako zrobione.`); };

      const openDetails = (o) => { setSelected(o); setDetailsOpen(true); };

      useEffect(()=> { window.lucide?.createIcons?.(); }, [q, status, orders.length]);

      const tab = (key, label) => (
        <button
          type="button"
          onClick={() => setStatus(key)}
          className={cn(
            "px-3 py-2 rounded-2xl border text-sm font-extrabold shadow-soft transition",
            status === key
              ? "bg-brand-yellow/20 border-brand-yellow/30 ring-1 ring-brand-yellow/20"
              : "bg-white border-gray-200 hover:ring-2 hover:ring-brand-yellow/25"
          )}
        >
          {label} <span className="ml-2 px-2 py-0.5 rounded-full bg-gray-900 text-white text-xs">{counts[key] ?? 0}</span>
        </button>
      );

      return (
        <div className="px-4 md:px-6 py-6">
          <div className="bg-white/90 border border-gray-200 rounded-3xl shadow-soft p-5 md:p-6">
            <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
              <div className="min-w-0">
                <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Zam√≥wienia</div>
                <div className="text-xl font-extrabold mt-1">Przyjmowanie zam√≥wie≈Ñ</div>
                <div className="text-sm text-gray-600 mt-1">
                  Akcje: <span className="font-mono">Przyjmij</span>, <span className="font-mono">Odrzuƒá</span>, <span className="font-mono">Zrobione</span>.
                </div>
              </div>

              <div className="flex flex-col sm:flex-row gap-3">
                <div className="relative">
                  <i data-lucide="search" className="w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
                  <input
                    value={q}
                    onChange={(e)=>setQ(e.target.value)}
                    className="input-focus w-full sm:w-[320px] pl-9 pr-3 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft"
                    placeholder="Szukaj: ID, klient, telefon..."
                  />
                </div>
                <button
                  type="button"
                  onClick={() => toast?.show("Od≈õwie≈ºanie (demo) ‚Äî podepnij fetch/WS.", "ok")}
                  className="px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold"
                >
                  <span className="inline-flex items-center gap-2">
                    <i data-lucide="refresh-cw" className="w-4 h-4"></i>
                    Od≈õwie≈º
                  </span>
                </button>
              </div>
            </div>

            <div className="mt-5 flex flex-wrap gap-2">
              {tab("all", "Wszystkie")}
              {tab("new", "Nowe")}
              {tab("accepted", "Przyjƒôte")}
              {tab("done", "Zrobione")}
              {tab("rejected", "Odrzucone")}
            </div>

            <div className="mt-5 overflow-auto">
              <table className="w-full min-w-[900px] text-sm">
                <thead>
                  <tr className="text-xs uppercase tracking-wider text-gray-500">
                    <th className="text-left py-3">ID</th>
                    <th className="text-left py-3">Klient</th>
                    <th className="text-left py-3">Miasto</th>
                    <th className="text-left py-3">Status</th>
                    <th className="text-right py-3">Suma</th>
                    <th className="text-right py-3">Data</th>
                    <th className="text-right py-3">Akcje</th>
                  </tr>
                </thead>
                <tbody>
                  {filtered.map(o => (
                    <OrderRow
                      key={o.id}
                      o={o}
                      onOpen={openDetails}
                      onAccept={accept}
                      onReject={reject}
                      onDone={done}
                    />
                  ))}
                  {filtered.length === 0 && (
                    <tr>
                      <td colSpan="7" className="py-10 text-center text-gray-600">
                        Brak wynik√≥w. Zmie≈Ñ filtr lub wyszukiwanie.
                      </td>
                    </tr>
                  )}
                </tbody>
              </table>
            </div>
          </div>

          <OrderDetailsModal
            open={detailsOpen}
            order={orders.find(x => x.id === selected?.id) || selected}
            onClose={() => { setDetailsOpen(false); setSelected(null); }}
          />
        </div>
      );
    };

    /* =======================
       PAGES: USERS
    ======================= */
    const UsersPage = ({ users, setUsers }) => {
      const toast = useToast();
      const [q, setQ] = useState("");
      const [role, setRole] = useState("all"); // all/user/admin
      const [status, setStatus] = useState("all"); // all/active/blocked

      const filtered = useMemo(() => {
        const qq = (q || "").trim().toLowerCase();
        return users
          .filter(u => role === "all" ? true : u.role === role)
          .filter(u => status === "all" ? true : u.status === status)
          .filter(u => {
            if (!qq) return true;
            const hay = `${u.id} ${u.name} ${u.email}`.toLowerCase();
            return hay.includes(qq);
          });
      }, [users, q, role, status]);

      const toggleBlock = (id) => {
        setUsers(prev => prev.map(u => u.id === id ? { ...u, status: u.status === "active" ? "blocked" : "active" } : u));
        const u = users.find(x=>x.id===id);
        toast?.show(`${u?.name || id}: zmieniono status.`, "ok");
      };

      useEffect(()=> { window.lucide?.createIcons?.(); }, [q, role, status, users.length]);

      return (
        <div className="px-4 md:px-6 py-6">
          <div className="bg-white/90 border border-gray-200 rounded-3xl shadow-soft p-5 md:p-6">
            <div className="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
              <div className="min-w-0">
                <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">U≈ºytkownicy</div>
                <div className="text-xl font-extrabold mt-1">Lista u≈ºytkownik√≥w</div>
                <div className="text-sm text-gray-600 mt-1">Filtry, statusy i proste akcje (demo).</div>
              </div>

              <div className="flex flex-col sm:flex-row gap-3">
                <div className="relative">
                  <i data-lucide="search" className="w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
                  <input
                    value={q}
                    onChange={(e)=>setQ(e.target.value)}
                    className="input-focus w-full sm:w-[320px] pl-9 pr-3 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft"
                    placeholder="Szukaj: ID, imiƒô, e-mail..."
                  />
                </div>
                <button
                  type="button"
                  onClick={() => toast?.show("Dodaj u≈ºytkownika (demo) ‚Äî podepnij modal + API.", "ok")}
                  className="px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold"
                >
                  <span className="inline-flex items-center gap-2">
                    <i data-lucide="user-plus" className="w-4 h-4"></i>
                    Dodaj
                  </span>
                </button>
              </div>
            </div>

            <div className="mt-5 flex flex-wrap gap-2">
              <select className="input-focus px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft font-extrabold text-sm"
                value={role} onChange={(e)=>setRole(e.target.value)}>
                <option value="all">Rola: wszystkie</option>
                <option value="user">Rola: user</option>
                <option value="admin">Rola: admin</option>
              </select>
              <select className="input-focus px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft font-extrabold text-sm"
                value={status} onChange={(e)=>setStatus(e.target.value)}>
                <option value="all">Status: wszystkie</option>
                <option value="active">Status: active</option>
                <option value="blocked">Status: blocked</option>
              </select>
            </div>

            <div className="mt-5 overflow-auto">
              <table className="w-full min-w-[860px] text-sm">
                <thead>
                  <tr className="text-xs uppercase tracking-wider text-gray-500">
                    <th className="text-left py-3">ID</th>
                    <th className="text-left py-3">U≈ºytkownik</th>
                    <th className="text-left py-3">Rola</th>
                    <th className="text-left py-3">Status</th>
                    <th className="text-right py-3">Zam√≥wienia</th>
                    <th className="text-right py-3">Utworzono</th>
                    <th className="text-right py-3">Akcje</th>
                  </tr>
                </thead>
                <tbody>
                  {filtered.map(u => (
                    <tr key={u.id} className="border-t border-gray-200">
                      <td className="py-3 font-mono text-xs">{u.id}</td>
                      <td className="py-3">
                        <div className="font-extrabold">{u.name}</div>
                        <div className="text-xs text-gray-600">{u.email}</div>
                      </td>
                      <td className="py-3">
                        {u.role === "admin" ? <Chip variant="blue">admin</Chip> : <Chip variant="gray">user</Chip>}
                      </td>
                      <td className="py-3">
                        {u.status === "active" ? <Chip variant="ok">active</Chip> : <Chip variant="bad">blocked</Chip>}
                      </td>
                      <td className="py-3 text-right font-extrabold">{u.orders ?? 0}</td>
                      <td className="py-3 text-right text-gray-600">{u.createdAt}</td>
                      <td className="py-3 text-right">
                        <div className="flex items-center justify-end gap-2">
                          <button
                            className="px-3 py-2 rounded-xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 text-sm font-extrabold"
                            onClick={() => toast?.show(`Profil ${u.name} (demo).`, "ok")}
                          >
                            Profil
                          </button>
                          <button
                            className={cn(
                              "px-3 py-2 rounded-xl border shadow-soft text-sm font-extrabold hover:ring-2",
                              u.status === "active"
                                ? "border-red-200 bg-red-50 text-red-700 hover:ring-red-200"
                                : "border-emerald-200 bg-emerald-50 text-emerald-800 hover:ring-emerald-200"
                            )}
                            onClick={() => toggleBlock(u.id)}
                          >
                            {u.status === "active" ? "Zablokuj" : "Odblokuj"}
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}

                  {filtered.length === 0 && (
                    <tr>
                      <td colSpan="7" className="py-10 text-center text-gray-600">
                        Brak wynik√≥w.
                      </td>
                    </tr>
                  )}
                </tbody>
              </table>
            </div>

            <div className="mt-4 text-xs text-gray-500">
              Demo UI ‚Ä¢ Tu podepniesz paginacjƒô, uprawnienia i endpointy.
            </div>
          </div>
        </div>
      );
    };

    /* =======================
       PAGES: INFOBAR (banner/message)
    ======================= */
    const InfoBarPage = ({ infoBar, setInfoBar }) => {
      const toast = useToast();
      const [draft, setDraft] = useState(infoBar);

      useEffect(()=>setDraft(infoBar), [infoBar]);

      useEffect(()=> { window.lucide?.createIcons?.(); }, [draft]);

      const save = () => {
        setInfoBar(draft);
        toast?.show("Zapisano ustawienia paska info.");
      };

      const preset = (type) => {
        const presets = {
          promo: { enabled:true, type:"promo", text:"üî• Promocja dnia: -10% na Lunche (12:00‚Äì16:00) ‚Äî kod: LUNCH10", ctaLabel:"Sprawd≈∫", ctaHref:"#/orders" },
          maintenance: { enabled:true, type:"warn", text:"üöß Przerwa techniczna 22:00‚Äì22:30 ‚Äî zam√≥wienia mogƒÖ chwilowo nie dzia≈Çaƒá.", ctaLabel:"Szczeg√≥≈Çy", ctaHref:"#/infobar" },
          ok: { enabled:true, type:"info", text:"‚úÖ Dzi≈õ dow√≥z dzia≈Ça normalnie. Dziƒôki za cierpliwo≈õƒá!", ctaLabel:"Zam√≥wienia", ctaHref:"#/orders" },
          off: { enabled:false, type:"info", text:"", ctaLabel:"", ctaHref:"#/" },
        };
        setDraft(presets[type] || presets.ok);
      };

      const tone = draft.type === "promo" ? "bg-brand-yellow/30 border-brand-yellow/40" :
                   draft.type === "warn" ? "bg-amber-100/60 border-amber-200" :
                   "bg-blue-50 border-blue-200";

      return (
        <div className="px-4 md:px-6 py-6">
          <div className="bg-white/90 border border-gray-200 rounded-3xl shadow-soft p-5 md:p-6">
            <div className="flex items-start justify-between gap-3">
              <div>
                <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Pasek info</div>
                <div className="text-xl font-extrabold mt-1">Komunikat na stronie</div>
                <div className="text-sm text-gray-600 mt-1">
                  Ustaw baner/komunikat (np. promocja, alert, info). To jest UI ‚Äî podepnij backend/API, je≈õli chcesz.
                </div>
              </div>
              <button
                type="button"
                onClick={save}
                className="px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold"
              >
                <span className="inline-flex items-center gap-2">
                  <i data-lucide="save" className="w-4 h-4"></i>
                  Zapisz
                </span>
              </button>
            </div>

            <div className="mt-5 grid lg:grid-cols-2 gap-6 items-start">
              <div className="space-y-4">
                <div className="rounded-3xl border border-gray-200 bg-white p-5 shadow-soft">
                  <div className="flex items-center justify-between">
                    <div className="font-extrabold">W≈ÇƒÖczony</div>
                    <label className="inline-flex items-center gap-2 text-sm font-semibold">
                      <input
                        type="checkbox"
                        checked={!!draft.enabled}
                        onChange={(e)=>setDraft(s=>({ ...s, enabled: e.target.checked }))}
                      />
                      aktywny
                    </label>
                  </div>

                  <div className="mt-4 grid gap-3">
                    <div>
                      <label className="text-xs uppercase tracking-wider text-gray-500 font-semibold">Typ</label>
                      <select
                        className="input-focus w-full mt-1 px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft font-extrabold text-sm"
                        value={draft.type}
                        onChange={(e)=>setDraft(s=>({ ...s, type: e.target.value }))}
                      >
                        <option value="promo">promo</option>
                        <option value="warn">warn</option>
                        <option value="info">info</option>
                      </select>
                    </div>

                    <div>
                      <label className="text-xs uppercase tracking-wider text-gray-500 font-semibold">Tre≈õƒá</label>
                      <textarea
                        className="input-focus w-full mt-1 px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft min-h-[120px]"
                        value={draft.text}
                        onChange={(e)=>setDraft(s=>({ ...s, text: e.target.value }))}
                        placeholder="Np. üî• Promocja: -10% ..."
                      />
                    </div>

                    <div className="grid md:grid-cols-2 gap-3">
                      <div>
                        <label className="text-xs uppercase tracking-wider text-gray-500 font-semibold">CTA label</label>
                        <input
                          className="input-focus w-full mt-1 px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft"
                          value={draft.ctaLabel}
                          onChange={(e)=>setDraft(s=>({ ...s, ctaLabel: e.target.value }))}
                          placeholder="np. Sprawd≈∫"
                        />
                      </div>
                      <div>
                        <label className="text-xs uppercase tracking-wider text-gray-500 font-semibold">CTA link</label>
                        <input
                          className="input-focus w-full mt-1 px-4 py-3 rounded-2xl border border-gray-200 bg-white shadow-soft font-mono text-sm"
                          value={draft.ctaHref}
                          onChange={(e)=>setDraft(s=>({ ...s, ctaHref: e.target.value }))}
                          placeholder="#/orders"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div className="rounded-3xl border border-gray-200 bg-white p-5 shadow-soft">
                  <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">Presety</div>
                  <div className="mt-3 flex flex-wrap gap-2">
                    <button onClick={()=>preset("promo")} className="px-3 py-2 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold text-sm">
                      Promo
                    </button>
                    <button onClick={()=>preset("maintenance")} className="px-3 py-2 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold text-sm">
                      Alert
                    </button>
                    <button onClick={()=>preset("ok")} className="px-3 py-2 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold text-sm">
                      Info
                    </button>
                    <button onClick={()=>preset("off")} className="px-3 py-2 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold text-sm">
                      Wy≈ÇƒÖcz
                    </button>
                  </div>
                </div>
              </div>

              <div className="rounded-3xl border border-gray-200 bg-white p-5 shadow-soft">
                <div className="text-xs uppercase tracking-[0.16em] text-gray-500 font-semibold">PodglƒÖd</div>
                <div className="text-xl font-extrabold mt-1">Jak bƒôdzie wyglƒÖda≈Ço</div>
                <div className="text-sm text-gray-600 mt-1">To jest ‚Äûmock‚Äù banera (mo≈ºesz wkleiƒá go na stronƒô g≈Ç√≥wnƒÖ).</div>

                <div className="mt-5">
                  {draft.enabled ? (
                    <div className={cn("rounded-2xl border p-4", tone)}>
                      <div className="flex items-start justify-between gap-3">
                        <div className="min-w-0">
                          <div className="text-xs uppercase tracking-widest text-gray-700 font-extrabold">
                            {draft.type === "promo" ? "PROMO" : draft.type === "warn" ? "UWAGA" : "INFO"}
                          </div>
                          <div className="text-sm md:text-base font-semibold text-gray-900 mt-1 break-words">
                            {draft.text || "‚Äî (brak tre≈õci)"}
                          </div>
                        </div>
                        {draft.ctaLabel && (
                          <a
                            href={draft.ctaHref || "#/"}
                            onClick={(e)=>e.preventDefault()}
                            className="shrink-0 inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-white border border-gray-200 shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold text-sm"
                          >
                            {draft.ctaLabel}
                            <i data-lucide="arrow-right" className="w-4 h-4"></i>
                          </a>
                        )}
                      </div>
                    </div>
                  ) : (
                    <div className="rounded-2xl border border-gray-200 bg-gray-50 p-4 text-gray-600">
                      Baner jest wy≈ÇƒÖczony.
                    </div>
                  )}
                </div>

                <div className="mt-6 text-xs text-gray-500">
                  W praktyce: trzymasz te ustawienia w DB + endpoint <span className="font-mono">GET /api/infobar</span>.
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    /* =======================
       INFOBAR (GLOBAL BANNER)
    ======================= */
    const GlobalInfoBar = ({ infoBar }) => {
      useEffect(()=>{ window.lucide?.createIcons?.(); }, [infoBar]);
      if (!infoBar?.enabled) return null;

      const tone = infoBar.type === "promo"
        ? "bg-brand-yellow/30 border-brand-yellow/40"
        : infoBar.type === "warn"
          ? "bg-amber-100/70 border-amber-200"
          : "bg-blue-50 border-blue-200";

      return (
        <div className="px-4 md:px-6 pt-4">
          <div className={cn("rounded-3xl border shadow-soft p-4 md:p-5", tone)}>
            <div className="flex items-start justify-between gap-3">
              <div className="min-w-0">
                <div className="text-xs uppercase tracking-widest text-gray-700 font-extrabold">
                  {infoBar.type === "promo" ? "PROMO" : infoBar.type === "warn" ? "UWAGA" : "INFO"}
                </div>
                <div className="text-sm md:text-base font-semibold text-gray-900 mt-1 break-words">
                  {infoBar.text}
                </div>
              </div>
              {infoBar.ctaLabel && (
                <a
                  href={infoBar.ctaHref || "#/"}
                  className="shrink-0 inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-white border border-gray-200 shadow-soft hover:ring-2 hover:ring-brand-yellow/30 font-extrabold text-sm"
                >
                  {infoBar.ctaLabel}
                  <i data-lucide="arrow-right" className="w-4 h-4"></i>
                </a>
              )}
            </div>
          </div>
        </div>
      );
    };

    /* =======================
       ROUTER (hash)
    ======================= */
    const useHashRoute = (initial="dashboard") => {
      const get = () => {
        const h = window.location.hash || "#/dashboard";
        const path = h.split("?")[0]; // ignore query
        const seg = path.replace("#/", "") || "dashboard";
        return seg;
      };
      const [route, setRouteState] = useState(get());

      useEffect(() => {
        const onHash = () => setRouteState(get());
        window.addEventListener("hashchange", onHash);
        return () => window.removeEventListener("hashchange", onHash);
      }, []);

      const setRoute = (r) => {
        window.location.hash = `#/${r}`;
      };

      return [route, setRoute];
    };

    /* =======================
       APP
    ======================= */
    const App = () => {
      // demo persistence
      const [orders, setOrders] = useLocalStorage("admin-orders", seedOrders());
      const [users, setUsers]   = useLocalStorage("admin-users", seedUsers());
      const [infoBar, setInfoBar] = useLocalStorage("admin-infobar", {
        enabled: true,
        type: "promo",
        text: "üî• Promocja dnia: -10% na Lunche (12:00‚Äì16:00) ‚Äî kod: LUNCH10",
        ctaLabel: "Zam√≥wienia",
        ctaHref: "#/orders"
      });

      const [route, setRoute] = useHashRoute("dashboard");
      const [collapsed, setCollapsed] = useState(false);

      const pendingCount = useMemo(() => orders.filter(o => o.status === "new").length, [orders]);

      useEffect(()=> { window.lucide?.createIcons?.(); }, [route, collapsed, pendingCount, infoBar?.enabled]);

      const titleMap = {
        dashboard: { t:"Dashboard", s:"Statystyki: u≈ºytkownicy, zam√≥wienia dzi≈õ, zam√≥wienia ≈ÇƒÖcznie, zarobek." },
        orders: { t:"Zam√≥wienia", s:"Przyjmowanie zam√≥wie≈Ñ: przyjmij/odrzuƒá/oznacz jako zrobione." },
        users: { t:"U≈ºytkownicy", s:"ZarzƒÖdzanie u≈ºytkownikami: filtry, statusy, akcje." },
        infobar: { t:"Pasek info", s:"ZarzƒÖdzaj komunikatem/banerem widocznym na stronie." },
      };

      const head = titleMap[route] || titleMap.dashboard;

      const right = (
        <div className="flex items-center gap-2">
          <span className="hidden md:inline-flex items-center gap-2 px-3 py-2 rounded-2xl border border-gray-200 bg-white shadow-soft text-sm font-extrabold">
            <i data-lucide="bell" className="w-4 h-4"></i>
            Nowe: {pendingCount}
          </span>
          <button
            type="button"
            className="w-11 h-11 rounded-2xl border border-gray-200 bg-white shadow-soft hover:ring-2 hover:ring-brand-yellow/30 grid place-items-center"
            title="Powiadomienia (demo)"
            onClick={() => alert("Demo UI ‚Äî podepnij powiadomienia / inbox.")}
          >
            <i data-lucide="bell" className="w-5 h-5"></i>
          </button>
        </div>
      );

      return (
        <div className="min-h-screen">
          <div className="flex">
            <Sidebar
              route={route}
              setRoute={setRoute}
              pendingCount={pendingCount}
              collapsed={collapsed}
              setCollapsed={setCollapsed}
            />

            <main className="flex-1 min-w-0">
              <TopBar title={head.t} subtitle={head.s} right={right} />
              <GlobalInfoBar infoBar={infoBar} />

              {route === "dashboard" && <DashboardPage users={users} orders={orders} />}
              {route === "orders" && <OrdersPage orders={orders} setOrders={setOrders} />}
              {route === "users" && <UsersPage users={users} setUsers={setUsers} />}
              {route === "infobar" && <InfoBarPage infoBar={infoBar} setInfoBar={setInfoBar} />}

              <footer className="px-4 md:px-6 py-10 text-center text-xs text-gray-500">
                ¬© {new Date().getFullYear()} eatmi.pl ‚Ä¢ Admin Panel (UI demo) ‚Ä¢ localStorage: <span className="font-mono">admin-orders</span>, <span className="font-mono">admin-users</span>, <span className="font-mono">admin-infobar</span>
              </footer>
            </main>
          </div>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById("root")).render(
      <ToastProvider>
        <App />
      </ToastProvider>
    );
  </script>
</body>
</html>
